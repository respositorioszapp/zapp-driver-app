{"version":3,"sources":["webpack:///src/app/screens/forms/detail/detail.page.html","webpack:///src/app/screens/forms/detail/detail-routing.module.ts","webpack:///src/app/screens/forms/detail/detail.module.ts","webpack:///src/app/screens/forms/detail/detail.page.scss","webpack:///src/app/screens/forms/detail/detail.page.ts"],"names":["routes","path","component","DetailPageRoutingModule","imports","forChild","exports","DetailPageModule","declarations","DetailPage","ui","request","auth","az_arr","distance","duration","currentLocation","address_array","loader","loading","getCurrentPosition","coordinates","coords","latitude","longitude","push","detail","loadMap","directionsService","google","maps","DirectionsService","directionsDisplay","DirectionsRenderer","suppressMarkers","waypts","markers","infos","i","length","latlng","lat","parseFloat","lng","location","stopover","map","Map","document","getElementById","zoom","center","setMap","infoWindow","InfoWindow","marker","Marker","position","icon","address","origin","destination","return_pt","n","round_trip","getDistanceMatrix","route","waypoints","travelMode","TravelMode","DRIVING","response","status","DirectionsStatus","OK","setDirections","console","log","a","b","j","service","DistanceMatrixService","_this","origins","destinations","unitSystem","UnitSystem","METRIC","avoidHighways","avoidTolls","DistanceMatrixStatus","distance_text","rows","elements","text","substring","replace","duration_text","getCalculateDistance","dismiss","presentModal","data","FormData","append","id","toString","user","post","subscribe","res","showToast","err","selector","template"],"mappings":"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","file":"screens-forms-detail-detail-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\" style=\\\"position: relative;\\\">\\n    <ion-title style=\\\"position: absolute; left: 5px;bottom:14px\\\">{{detail.address}}\\n    </ion-title>\\n    <ion-button (click)=\\\"dismiss()\\\" style=\\\"position: absolute; right: 5px;bottom:5px\\\">\\n      <ion-icon slot=\\\"icon-only\\\" name=\\\"close-outline\\\"></ion-icon>\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content color=\\\"warning\\\">\\n\\n  <ion-card>\\n    <ion-card-content>\\n      <ion-grid>\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <div #map id=\\\"map\\\" style=\\\"width: 100%;height: 200px;\\\"></div>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n      <p>Duración: {{duration | uppercase}} </p>\\n      <p>Distancia: {{distance | uppercase}} </p>\\n      <p class=\\\"ion-text-center\\\">{{detail.description}}</p>\\n      <ng-container *ngIf=\\\"detail.status !=25\\\">\\n        <ion-button expand=\\\"full\\\" fill=\\\"outline\\\" color=\\\"primary\\\" (click)=\\\"registerEvent()\\\">Eventualiad</ion-button>\\n        <ion-button expand=\\\"full\\\" color=\\\"primary\\\" (click)=\\\"endDetail()\\\">Finalizar</ion-button>\\n      </ng-container>\\n    </ion-card-content>\\n  </ion-card>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DetailPage } from './detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DetailPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DetailPageRoutingModule } from './detail-routing.module';\n\nimport { DetailPage } from './detail.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DetailPageRoutingModule\n  ],\n  declarations: [DetailPage]\n})\nexport class DetailPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NjcmVlbnMvZm9ybXMvZGV0YWlsL2RldGFpbC5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit, Input } from '@angular/core';\nimport { UiService } from 'src/app/services/ui.service';\nimport { Geolocation } from '@capacitor/core';\nimport { EventsPage } from '../events/events.page';\nimport { RequestService } from 'src/app/services/request.service';\nimport { AuthService } from 'src/app/services/auth.service';\ndeclare var google: any;\n@Component({\n  selector: 'app-detail',\n  templateUrl: './detail.page.html',\n  styleUrls: ['./detail.page.scss'],\n})\nexport class DetailPage implements OnInit {\n  @Input() detail: any\n  az_arr = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\"];\n  distance = \"\"\n  duration = \"\"\n  currentLocation: any = {\n\n  }\n  address_array: any[] = []\n  constructor(private ui: UiService,private request: RequestService,private auth: AuthService) { }\n\n  async ngOnInit() {\n    const loader = this.ui.loading(\"Por favor espere...\");\n    const coordinates = await Geolocation.getCurrentPosition();\n    const {\n      latitude,\n      longitude\n    } = coordinates.coords;\n    this.currentLocation = {\n      latitude,\n      longitude\n    }\n    this.address_array.push(this.currentLocation)\n    this.address_array.push(this.detail)\n    this.loadMap(loader);\n  }\n\n  loadMap(loader) {\n\n    //obtener usos de la API\n    var directionsService = new google.maps.DirectionsService;\n    var directionsDisplay = new google.maps.DirectionsRenderer({ suppressMarkers: true });\n    //puntos de referencia para agregar\n    var waypts = [];\n    var markers = [];\n    var infos = [];\n    //coordenadas de los puntos de ruta\n    for (let i = 0; i < this.address_array.length; i++) {\n\n      let latlng = {\n        lat: parseFloat(this.address_array[i].latitude),\n        lng: parseFloat(this.address_array[i].longitude)\n      };\n      waypts.push({ location: latlng, stopover: true });\n    }\n    //creo mapa\n    var map = new google.maps.Map(document.getElementById('map'), {\n      zoom: 6,\n      center: { lat: waypts[0].location.lat, lng: waypts[0].location.lng }\n    });\n    //muestro el mapa\n    directionsDisplay.setMap(map);\n    //ventanas de informacion\n    var infoWindow = new google.maps.InfoWindow();\n    //coordenadas markers personalizados con ventana de información\n    for (let i = 0; i < this.address_array.length; i++) {\n\n      let latlng = {\n        lat: parseFloat(this.address_array[i].latitude),\n        lng: parseFloat(this.address_array[i].longitude)\n      };\n\n      let marker = new google.maps.Marker({\n        position: latlng,\n        map: map,\n        icon: '../../../assets/imgs/markers/' + this.az_arr[i] + '.png'\n      })\n      markers.push(marker);\n      // agrego la informacion de la dirección\n      infos.push(this.address_array[i].address);\n\n      // google.maps.event.addListener(marker, 'click', (function(marker, i) {\n      //   return function() {\n\n      //       infoWindow.setContent(infos[i]);\n      //       infoWindow.open(map, marker);\n      //   }\n      // })(marker, i));\n    }\n\n    // pregunto si es ida y vuelta el servicio\n    let origin, destination, return_pt;\n    let n = (this.address_array.length - 1);\n\n    if (this.detail.round_trip === true) {\n      origin = { lat: waypts[0].location.lat, lng: waypts[0].location.lng };\n      destination = { lat: waypts[0].location.lat, lng: waypts[0].location.lng };\n      return_pt = { lat: waypts[n].location.lat, lng: waypts[n].location.lng };\n      //punto de retorno en km y min\n      this.getDistanceMatrix(return_pt, origin);\n    } else {\n      origin = { lat: waypts[0].location.lat, lng: waypts[0].location.lng };\n      destination = { lat: waypts[n].location.lat, lng: waypts[n].location.lng };\n      this.getDistanceMatrix(origin, origin);\n    }\n    // pinto la ruta\n    directionsService.route({\n      origin: origin,\n      destination: destination,\n      waypoints: waypts,\n      travelMode: google.maps.TravelMode.DRIVING\n    }, async function (response, status) {\n      if (status === google.maps.DirectionsStatus.OK) {\n        directionsDisplay.setDirections(response);\n        \n      } else {\n        console.log('Ha fallat la comunicació amb el mapa a causa de: ' + status);\n      }\n    });\n\n    //calcular distancia\n    for (let i = 0; i < waypts.length; i++) {\n      let a = null, b = null;\n      if (i < (waypts.length - 1)) {\n        a = { lat: waypts[i].location.lat, lng: waypts[i].location.lng };\n      }\n      let j = i + 1;\n      if (j <= (waypts.length - 1)) {\n        b = { lat: waypts[j].location.lat, lng: waypts[j].location.lng };\n      }\n      if (a != null && b != null) {\n        this.getDistanceMatrix(a, b,loader);\n      }\n    }\n\n\n\n  }\n\n  getDistanceMatrix(origin, destination, loader?) {\n    var service = new google.maps.DistanceMatrixService();\n    var _this = this;\n    //calculo distancia\n    service.getDistanceMatrix({\n      origins: [origin],\n      destinations: [destination],\n      travelMode: google.maps.TravelMode.DRIVING,\n      unitSystem: google.maps.UnitSystem.METRIC,\n      avoidHighways: false,\n      avoidTolls: false\n    },\n     async  function (response, status) {\n        if (status != google.maps.DistanceMatrixStatus.OK) {\n          console.log(\"Error was: \" + status);\n        } else {\n          let distance_text = response.rows[0].elements[0].distance.text;\n          console.log(\"Distance Text\",distance_text)\n          let distance = distance_text.substring(0, distance_text.length - 3).replace(\",\", \".\");\n\n          let duration_text = response.rows[0].elements[0].duration.text;\n          console.log(\"Duration Text\",duration_text)\n          let duration = duration_text.substring(0, distance_text.length - 4);\n          _this.getCalculateDistance(distance_text, duration_text);\n          (await loader).dismiss();\n        }\n      });\n  }\n\n  getCalculateDistance(distance, duration) {\n    this.distance = distance ;\n    this.duration = duration;\n  }\n\n  registerEvent(){\n    this.ui.presentModal(EventsPage, {detail :this.detail})\n  }\n\n  async endDetail(){\n    const loader = this.ui.loading(\"Por favor espere...\");\n    const coordinates = await Geolocation.getCurrentPosition();\n    const {\n      latitude,\n      longitude\n    } = coordinates.coords;\n    const data = new FormData();\n    data.append(\"order_detail_id\", this.detail.id)\n    data.append(\"latitude\", latitude.toString())\n    data.append(\"longitude\", longitude.toString())\n    data.append(\"description\", \"Finalización Detalle\")\n    data.append(\"user_id\", this.auth.user.id.toString())\n    this.request.post(\"driver/end_order_detail\",data)\n    .subscribe(async (res:any) =>{\n      (await loader).dismiss();\n      this.detail.status =25;\n      this.ui.showToast(\"Servicio finalizado.\", () => {\n        this.dismiss()\n      })\n    }, async (err:any) =>{\n      console.log(\"Error\", err);\n      (await loader).dismiss();\n      this.ui.showToast(\"Ha ocurrido un error\")\n    })\n  }\n\n  dismiss() {\n    this.ui.dismiss()\n  }\n\n}\n"]}