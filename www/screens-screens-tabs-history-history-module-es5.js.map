{"version":3,"sources":["webpack:///src/app/screens/screens-tabs/history/history.page.html","webpack:///src/app/screens/screens-tabs/history/history-routing.module.ts","webpack:///src/app/screens/screens-tabs/history/history.module.ts","webpack:///src/app/screens/screens-tabs/history/history.page.scss","webpack:///src/app/screens/screens-tabs/history/history.page.ts"],"names":["routes","path","component","HistoryPageRoutingModule","imports","forChild","exports","HistoryPageModule","declarations","HistoryPage","ui","request","auth","router","network","orders","image","slideOpts","initialSlide","speed","store_states","message","state","color","allLoaded","dataParams","total","per_page","page","filters","nextPage","to","loadedText","loading","user","getNetworkStatus","connected","loader","get","id","subscribe","res","dismiss","console","log","data","err","showToast","order","status_order","presentAlert","mode","header","buttons","text","role","cssClass","handler","blah","presentModal","modal","onDidDismiss","m","ionViewWillEnter","event","map","d","push","target","complete","disabled","error","selector","template"],"mappings":"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","file":"screens-screens-tabs-history-history-module-es5.js","sourcesContent":["export default \"<ion-content color=\\\"warning\\\">\\n  <ion-card style=\\\"padding: 0;min-height: 350px;\\\">\\n    <ion-card-content style=\\\"padding: 0\\\">\\n      <ion-title class=\\\"ion-text-center\\\">Historial</ion-title>\\n      <ng-container *ngIf=\\\"orders.length > 0; else elseTemplateOrder\\\">\\n        <ion-card *ngFor=\\\"let item of orders\\\" style=\\\"margin-bottom: 10px;\\\" >\\n          <ion-card-content (click)=\\\"viewDetail(item)\\\">\\n\\n            <div style=\\\"width:100%;display: flex;\\\">\\n              <div class=\\\"w-50\\\">\\n                ORDEN #{{item.id}}\\n              </div>\\n              <div style=\\\"width: 50%;text-align:right\\\">\\n                \\n                {{ item.date | dateLocal | titlecase }}\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"w-50\\\">\\n                <p class=\\\" \\\">Tipo de Servicio :  </p>\\n              </div>\\n              <div style=\\\"width: 50%;\\\">\\n                <strong>{{item.service_type}}</strong>\\n                \\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"w-50\\\">\\n                <p class=\\\" \\\"> Ciudad : </p>\\n                \\n              </div>\\n              <div style=\\\"width: 50%;   \\\">\\n                <strong>{{item.city}}</strong>\\n                \\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"w-50\\\">\\n                <p class=\\\"\\\"> Cantidad : </p>\\n              </div>\\n              <div class=\\\"w-50\\\">\\n                <strong>{{item.details.length}}</strong>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"w-50\\\">\\n                <p class=\\\"\\\"> Recorrido : </p>\\n              </div>\\n              <div style=\\\"width: 50%; \\\">\\n                <strong>{{item.round_trip ==1 ? 'Ida y Vuelta': 'Ida'}}</strong>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"w-50\\\">\\n                <p class=\\\"\\\"> Valor declarado : </p>\\n              </div>\\n              <div class=\\\"w-50\\\">\\n                <strong>{{item.declared_value}}</strong>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"w-50\\\">\\n                <p class=\\\"\\\"> Tipo de accesorio : </p>\\n              </div>\\n              <div class=\\\"w-50\\\">\\n                <strong>{{item.accessory_type}}</strong>\\n              </div>\\n            </div>\\n            \\n            <div class=\\\"row\\\" *ngIf=\\\"item.service_type_id == 3\\\">\\n              <div class=\\\"w-50\\\">\\n                <p class=\\\"\\\"> NÃºmero de horas : </p>\\n              </div>\\n              <div style=\\\"width: 50%;    \\\">\\n                <strong>{{item.number_hours}}</strong>\\n              </div>\\n            </div>\\n            <ion-item lines=\\\"none\\\">\\n              <ion-button fill=\\\"clear\\\" size=\\\"small\\\" slot=\\\"start\\\"   style=\\\"\\\"  >\\n                <ng-container *ngIf=\\\"item.score_service; else elseTemplate\\\">\\n                  {{item.score_service ? item.score_service: 0 }}<ion-icon name=\\\"star\\\" class=\\\"text-yellow\\\"  ></ion-icon>  \\n                </ng-container>\\n                <ng-template #elseTemplate>\\n                  Sin calificar <ion-icon name=\\\"star\\\" ></ion-icon>   \\n                </ng-template>\\n                \\n                 \\n              </ion-button>\\n              <ion-button size=\\\"small\\\" [class]=\\\"store_states[item.status_order].class\\\" slot=\\\"end\\\">\\n                {{store_states[item.status_order].message}}\\n              </ion-button>\\n            </ion-item>\\n            \\n            \\n          </ion-card-content>\\n         \\n        </ion-card>\\n        <ion-card *ngIf=\\\"loading\\\">\\n          <ion-card-content >\\n\\n            <div style=\\\"width:100%;display: flex;\\\">\\n              <div class=\\\"w-50\\\">\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n              </div>\\n              <div style=\\\"width: 50%;text-align:right\\\">\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n              </div>\\n            </div>\\n            <div style=\\\"display: flex;margin-top: 5px;\\n            margin-bottom: 5px;\\\">\\n              <div class=\\\"w-50\\\">\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n              </div>\\n              <div style=\\\"width: 50%; margin-left: 11px;\\\">\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n              </div>\\n            </div>\\n            <div style=\\\"display: flex;margin-top: 5px;\\n            margin-bottom: 5px;\\\">\\n              <div class=\\\"w-50\\\">\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n              </div>\\n              <div style=\\\"width: 50%;    margin-left: 11px;\\\">\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n              </div>\\n            </div>\\n            <div style=\\\"display: flex;margin-top: 5px;\\n            margin-bottom: 5px;\\\">\\n              <div class=\\\"w-50\\\">\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n              </div>\\n              <div style=\\\"width: 50%;    margin-left: 11px;\\\">\\n                <ion-skeleton-text animated></ion-skeleton-text>\\n              </div>\\n            </div>\\n            \\n          </ion-card-content>\\n        </ion-card>\\n        <ion-infinite-scroll  (ionInfinite)=\\\"loadData($event)\\\" >\\n          <ion-infinite-scroll-content\\n          loadingSpinner=\\\"bubbles\\\">\\n          </ion-infinite-scroll-content>\\n          \\n        </ion-infinite-scroll>\\n        \\n      </ng-container>\\n      <ng-template #elseTemplateOrder>\\n        <div style=\\\"position: relative;height: 200px;\\\" *ngIf=\\\"orders.length == 0;\\\">\\n          <h3 class=\\\"ion-text-center \\\" style=\\\"    font-size: 1.5em;\\n        position: absolute;\\n        top: 0;\\n        bottom: 0;\\n        right: 0;\\n        left: 0;\\n        text-align: center;\\n        margin: auto;\\n        height: 40px;\\n    \\\">No ha realizado ningÃºn viaje</h3>\\n        </div>\\n\\n      </ng-template>\\n    </ion-card-content>\\n  </ion-card>\\n\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HistoryPage } from './history.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HistoryPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HistoryPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HistoryPageRoutingModule } from './history-routing.module';\n\nimport { HistoryPage } from './history.page';\nimport { AplicationPipeModuleModule } from 'src/app/modules/aplication-pipe-module/aplication-pipe-module.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HistoryPageRoutingModule, \n    AplicationPipeModuleModule\n  ],\n  declarations: [HistoryPage]\n})\nexport class HistoryPageModule {}\n","export default \".text-yellow {\\n  color: #c6c73a;\\n}\\n\\n.button-green {\\n  --background: green;\\n  color: white;\\n}\\n\\n.text-green {\\n  color: green;\\n}\\n\\n.button-red {\\n  --background: red;\\n  color: white;\\n}\\n\\n.text-red {\\n  color: red;\\n}\\n\\n.button-gray {\\n  --background: #CE4257;\\n  color: #CE4257;\\n}\\n\\n.button-cancel {\\n  --background: #95B2B0;\\n  color: #95B2B0;\\n}\\n\\n.button-dark {\\n  --background: #0e0f0f;\\n  color: white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXNwcmlsbGEvRG9jdW1lbnRvc01pZ3VlbC9Qcm95ZWN0b3MvemFwcC96YXBwLWRyaXZlci1hcHAtcnBlbmFsb3phL3NyYy9hcHAvc2NyZWVucy9zY3JlZW5zLXRhYnMvaGlzdG9yeS9oaXN0b3J5LnBhZ2Uuc2NzcyIsInNyYy9hcHAvc2NyZWVucy9zY3JlZW5zLXRhYnMvaGlzdG9yeS9oaXN0b3J5LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGNBQUE7QUNDSjs7QURFQTtFQUNJLG1CQUFBO0VBQ0EsWUFBQTtBQ0NKOztBREVBO0VBQ0ksWUFBQTtBQ0NKOztBREVBO0VBQ0ksaUJBQUE7RUFDQSxZQUFBO0FDQ0o7O0FERUE7RUFDSSxVQUFBO0FDQ0o7O0FERUE7RUFDSSxxQkFBQTtFQUNBLGNBQUE7QUNDSjs7QURFQTtFQUNJLHFCQUFBO0VBQ0EsY0FBQTtBQ0NKOztBREVBO0VBQ0kscUJBQUE7RUFDQSxZQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9zY3JlZW5zL3NjcmVlbnMtdGFicy9oaXN0b3J5L2hpc3RvcnkucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnRleHQteWVsbG93e1xuICAgIGNvbG9yOiAjYzZjNzNhO1xufVxuXG4uYnV0dG9uLWdyZWVuIHtcbiAgICAtLWJhY2tncm91bmQ6IGdyZWVuO1xuICAgIGNvbG9yOiB3aGl0ZTtcbn1cblxuLnRleHQtZ3JlZW57XG4gICAgY29sb3I6IGdyZWVuO1xufVxuXG4uYnV0dG9uLXJlZCB7XG4gICAgLS1iYWNrZ3JvdW5kOiByZWQ7XG4gICAgY29sb3I6IHdoaXRlO1xufVxuXG4udGV4dC1yZWR7XG4gICAgY29sb3I6IHJlZDtcbn1cblxuLmJ1dHRvbi1ncmF5IHtcbiAgICAtLWJhY2tncm91bmQ6ICNDRTQyNTc7XG4gICAgY29sb3I6ICNDRTQyNTc7XG59XG5cbi5idXR0b24tY2FuY2VsIHtcbiAgICAtLWJhY2tncm91bmQ6ICM5NUIyQjA7XG4gICAgY29sb3I6ICM5NUIyQjA7XG59XG5cbi5idXR0b24tZGFya3tcbiAgICAtLWJhY2tncm91bmQ6ICMwZTBmMGY7XG4gICAgY29sb3I6IHdoaXRlO1xufSIsIi50ZXh0LXllbGxvdyB7XG4gIGNvbG9yOiAjYzZjNzNhO1xufVxuXG4uYnV0dG9uLWdyZWVuIHtcbiAgLS1iYWNrZ3JvdW5kOiBncmVlbjtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4udGV4dC1ncmVlbiB7XG4gIGNvbG9yOiBncmVlbjtcbn1cblxuLmJ1dHRvbi1yZWQge1xuICAtLWJhY2tncm91bmQ6IHJlZDtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4udGV4dC1yZWQge1xuICBjb2xvcjogcmVkO1xufVxuXG4uYnV0dG9uLWdyYXkge1xuICAtLWJhY2tncm91bmQ6ICNDRTQyNTc7XG4gIGNvbG9yOiAjQ0U0MjU3O1xufVxuXG4uYnV0dG9uLWNhbmNlbCB7XG4gIC0tYmFja2dyb3VuZDogIzk1QjJCMDtcbiAgY29sb3I6ICM5NUIyQjA7XG59XG5cbi5idXR0b24tZGFyayB7XG4gIC0tYmFja2dyb3VuZDogIzBlMGYwZjtcbiAgY29sb3I6IHdoaXRlO1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { User } from 'src/app/interfaces/User';\nimport { UiService } from 'src/app/services/ui.service';\nimport { ViewDetailPage } from 'src/app/screens/forms/view-detail/view-detail.page';\nimport { RequestService } from 'src/app/services/request.service';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { Router } from '@angular/router';\nimport { NetworkStatusService } from 'src/app/services/network-status.service';\n\nimport { Capacitor } from '@capacitor/core';\n\n@Component({\n  selector: 'app-history',\n  templateUrl: './history.page.html',\n  styleUrls: ['./history.page.scss'],\n})\nexport class HistoryPage implements OnInit {\n  user: User;\n  orders = []\n  image = \"assets/imgs/avatar.svg\"\n  slideOpts = {\n    initialSlide: 1,\n    speed: 400\n  };\n  store_states = {\n    25:{\n      message: \"Finalizada\",\n      state: 25,\n      class:\"button-green\"\n    },\n    31:{\n      message: \"Cancelada\",\n      \n      state: 31,\n     color:\"button-cancel\"\n    },\n    36:{\n      message: \"Cancelada por mensajero\",\n     \n      state: 36,\n      color:\"button-gray \"\n    },\n    48:{\n      message: \"Orden no efectiva\",\n      \n      state: 48,\n      color:\"button-dark\"\n     \n    }\n\n  }\n  allLoaded = false\n  dataParams: any = {\n    total: 0,\n    per_page: 5,\n    page: 1,\n    filters: []\n  };\n  nextPage = \"\"\n  to = 0\n  loadedText: string = \"\"\n  loading = false\n  constructor(private ui: UiService,\n    private request: RequestService,\n    private auth: AuthService,\n    private router: Router,\n    private network: NetworkStatusService,\n    \n    ) { }\n\n  ngOnInit() {\n  \n  }\n\n  async ionViewWillEnter() {\n    this.user = this.auth.user;\n    this.dataParams.page = 1;\n    if (this.network.getNetworkStatus().connected) {\n      const loader = await this.ui.loading(\"Por favor espere...\");\n      this.request\n        .get(`driver/history_services/${this.auth.user.id}?per_page=${this.dataParams.per_page}&page=${this.dataParams.page}`)\n        .subscribe(async (res: any) => {\n          (await loader).dismiss();\n          console.log(\"Res\", res.data.data)\n          this.orders = res.data.data;\n          this.to = res.data.to;\n        }, async (err: any) => {\n          (await loader).dismiss();\n          this.orders = []\n\n\n        })\n    } else {\n      this.ui.showToast(\"Verifique su conexiÃ³n\");\n    }\n  }\n\n  async viewDetail(order: any) {\n    if (this.network.getNetworkStatus().connected) {\n      if (order.status_order == 23) {\n        await this.ui.presentAlert({\n          mode: 'ios',\n          header: 'Â¿Quieres iniciar el viaje?',\n          buttons: [\n            {\n              text: 'No',\n              role: 'cancel',\n              cssClass: 'secondary',\n              handler: (blah) => {\n                console.log('Confirm Cancel: blah');\n              }\n            }, {\n              text: 'SÃ­',\n              handler: async () => {\n                const modal = await this.ui.presentModal(ViewDetailPage, { order })\n                const m = await modal.onDidDismiss();\n                this.dataParams.page = 1;\n                this.ionViewWillEnter();\n              }\n\n            }\n          ]\n        })\n      } else {\n        const modal = await this.ui.presentModal(ViewDetailPage, { order })\n        const m = await modal.onDidDismiss();\n        this.dataParams.page = 1;\n        this.ionViewWillEnter();\n      }\n    } else {\n      this.ui.showToast(\"Verifique su conexiÃ³n\");\n    }\n\n\n  }\n\n  loadData(event) {\n    if (this.network.getNetworkStatus().connected) {\n      this.dataParams.page++;\n      this.loading = true;\n      this.request.get(`driver/history_services/${this.auth.user.id}?per_page=${this.dataParams.per_page}&page=${this.dataParams.page}`)\n        .subscribe(async (res: any) => {\n          console.log(\"Sucesss\")\n          res.data.data.map(d => {\n            this.orders.push(d)\n          })\n          console.log(\"Orders\", this.orders)\n          this.loading = false;\n          event.target.complete();\n\n        }, async (err: any) => {\n          console.log(\"Error\")\n          event.target.disabled = true;\n          this.allLoaded = true;\n          this.loading = false;\n          console.log(\"Error\", err)\n          err.error.data.map(d => {\n            this.orders.push(d)\n          })\n          event.target.complete();\n        })\n    } else {\n      this.ui.showToast(\"Verifique su conexiÃ³n\")\n    }\n\n  }\n\n}\n"]}