(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"],{

/***/ "./$$_lazy_route_resource lazy recursive":
/*!******************************************************!*\
  !*** ./$$_lazy_route_resource lazy namespace object ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(function() {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "./$$_lazy_route_resource lazy recursive";

/***/ }),

/***/ "./node_modules/@ionic/core/dist/esm lazy recursive ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm lazy ^\.\/.*\.entry\.js$ include: \.entry\.js$ exclude: \.system\.entry\.js$ namespace object ***!
  \*****************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./ion-action-sheet.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-action-sheet.entry.js",
		"common",
		0
	],
	"./ion-alert.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-alert.entry.js",
		"common",
		1
	],
	"./ion-app_8.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-app_8.entry.js",
		"common",
		2
	],
	"./ion-avatar_3.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-avatar_3.entry.js",
		"common",
		3
	],
	"./ion-back-button.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-back-button.entry.js",
		"common",
		4
	],
	"./ion-backdrop.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-backdrop.entry.js",
		5
	],
	"./ion-button_2.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-button_2.entry.js",
		"common",
		6
	],
	"./ion-card_5.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-card_5.entry.js",
		"common",
		7
	],
	"./ion-checkbox.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-checkbox.entry.js",
		"common",
		8
	],
	"./ion-chip.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-chip.entry.js",
		"common",
		9
	],
	"./ion-col_3.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-col_3.entry.js",
		10
	],
	"./ion-datetime_3.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-datetime_3.entry.js",
		"common",
		11
	],
	"./ion-fab_3.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-fab_3.entry.js",
		"common",
		12
	],
	"./ion-img.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-img.entry.js",
		13
	],
	"./ion-infinite-scroll_2.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-infinite-scroll_2.entry.js",
		14
	],
	"./ion-input.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-input.entry.js",
		"common",
		15
	],
	"./ion-item-option_3.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-item-option_3.entry.js",
		"common",
		16
	],
	"./ion-item_8.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-item_8.entry.js",
		"common",
		17
	],
	"./ion-loading.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-loading.entry.js",
		"common",
		18
	],
	"./ion-menu_3.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-menu_3.entry.js",
		"common",
		19
	],
	"./ion-modal.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-modal.entry.js",
		"common",
		20
	],
	"./ion-nav_2.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-nav_2.entry.js",
		"common",
		21
	],
	"./ion-popover.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-popover.entry.js",
		"common",
		22
	],
	"./ion-progress-bar.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-progress-bar.entry.js",
		"common",
		23
	],
	"./ion-radio_2.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-radio_2.entry.js",
		"common",
		24
	],
	"./ion-range.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-range.entry.js",
		"common",
		25
	],
	"./ion-refresher_2.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-refresher_2.entry.js",
		"common",
		26
	],
	"./ion-reorder_2.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-reorder_2.entry.js",
		"common",
		27
	],
	"./ion-ripple-effect.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-ripple-effect.entry.js",
		28
	],
	"./ion-route_4.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-route_4.entry.js",
		"common",
		29
	],
	"./ion-searchbar.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-searchbar.entry.js",
		"common",
		30
	],
	"./ion-segment_2.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-segment_2.entry.js",
		"common",
		31
	],
	"./ion-select_3.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-select_3.entry.js",
		"common",
		32
	],
	"./ion-slide_2.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-slide_2.entry.js",
		33
	],
	"./ion-spinner.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-spinner.entry.js",
		"common",
		34
	],
	"./ion-split-pane.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-split-pane.entry.js",
		35
	],
	"./ion-tab-bar_2.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-tab-bar_2.entry.js",
		"common",
		36
	],
	"./ion-tab_2.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-tab_2.entry.js",
		"common",
		37
	],
	"./ion-text.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-text.entry.js",
		"common",
		38
	],
	"./ion-textarea.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-textarea.entry.js",
		"common",
		39
	],
	"./ion-toast.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-toast.entry.js",
		"common",
		40
	],
	"./ion-toggle.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-toggle.entry.js",
		"common",
		41
	],
	"./ion-virtual-scroll.entry.js": [
		"./node_modules/@ionic/core/dist/esm/ion-virtual-scroll.entry.js",
		42
	]
};
function webpackAsyncContext(req) {
	if(!__webpack_require__.o(map, req)) {
		return Promise.resolve().then(function() {
			var e = new Error("Cannot find module '" + req + "'");
			e.code = 'MODULE_NOT_FOUND';
			throw e;
		});
	}

	var ids = map[req], id = ids[0];
	return Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {
		return __webpack_require__(id);
	});
}
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = "./node_modules/@ionic/core/dist/esm lazy recursive ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$";
module.exports = webpackAsyncContext;

/***/ }),

/***/ "./node_modules/@ionic/pwa-elements/dist/esm lazy recursive ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/@ionic/pwa-elements/dist/esm lazy ^\.\/.*\.entry\.js$ include: \.entry\.js$ exclude: \.system\.entry\.js$ namespace object ***!
  \*************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./pwa-action-sheet.entry.js": [
		"./node_modules/@ionic/pwa-elements/dist/esm/pwa-action-sheet.entry.js",
		43
	],
	"./pwa-camera-modal-instance.entry.js": [
		"./node_modules/@ionic/pwa-elements/dist/esm/pwa-camera-modal-instance.entry.js",
		44
	],
	"./pwa-camera-modal.entry.js": [
		"./node_modules/@ionic/pwa-elements/dist/esm/pwa-camera-modal.entry.js",
		45
	],
	"./pwa-camera.entry.js": [
		"./node_modules/@ionic/pwa-elements/dist/esm/pwa-camera.entry.js",
		46
	],
	"./pwa-toast.entry.js": [
		"./node_modules/@ionic/pwa-elements/dist/esm/pwa-toast.entry.js",
		47
	]
};
function webpackAsyncContext(req) {
	if(!__webpack_require__.o(map, req)) {
		return Promise.resolve().then(function() {
			var e = new Error("Cannot find module '" + req + "'");
			e.code = 'MODULE_NOT_FOUND';
			throw e;
		});
	}

	var ids = map[req], id = ids[0];
	return __webpack_require__.e(ids[1]).then(function() {
		return __webpack_require__(id);
	});
}
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = "./node_modules/@ionic/pwa-elements/dist/esm lazy recursive ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$";
module.exports = webpackAsyncContext;

/***/ }),

/***/ "./node_modules/moment/locale sync recursive ^\\.\\/.*$":
/*!**************************************************!*\
  !*** ./node_modules/moment/locale sync ^\.\/.*$ ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "./node_modules/moment/locale/af.js",
	"./af.js": "./node_modules/moment/locale/af.js",
	"./ar": "./node_modules/moment/locale/ar.js",
	"./ar-dz": "./node_modules/moment/locale/ar-dz.js",
	"./ar-dz.js": "./node_modules/moment/locale/ar-dz.js",
	"./ar-kw": "./node_modules/moment/locale/ar-kw.js",
	"./ar-kw.js": "./node_modules/moment/locale/ar-kw.js",
	"./ar-ly": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ly.js": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ma": "./node_modules/moment/locale/ar-ma.js",
	"./ar-ma.js": "./node_modules/moment/locale/ar-ma.js",
	"./ar-sa": "./node_modules/moment/locale/ar-sa.js",
	"./ar-sa.js": "./node_modules/moment/locale/ar-sa.js",
	"./ar-tn": "./node_modules/moment/locale/ar-tn.js",
	"./ar-tn.js": "./node_modules/moment/locale/ar-tn.js",
	"./ar.js": "./node_modules/moment/locale/ar.js",
	"./az": "./node_modules/moment/locale/az.js",
	"./az.js": "./node_modules/moment/locale/az.js",
	"./be": "./node_modules/moment/locale/be.js",
	"./be.js": "./node_modules/moment/locale/be.js",
	"./bg": "./node_modules/moment/locale/bg.js",
	"./bg.js": "./node_modules/moment/locale/bg.js",
	"./bm": "./node_modules/moment/locale/bm.js",
	"./bm.js": "./node_modules/moment/locale/bm.js",
	"./bn": "./node_modules/moment/locale/bn.js",
	"./bn-bd": "./node_modules/moment/locale/bn-bd.js",
	"./bn-bd.js": "./node_modules/moment/locale/bn-bd.js",
	"./bn.js": "./node_modules/moment/locale/bn.js",
	"./bo": "./node_modules/moment/locale/bo.js",
	"./bo.js": "./node_modules/moment/locale/bo.js",
	"./br": "./node_modules/moment/locale/br.js",
	"./br.js": "./node_modules/moment/locale/br.js",
	"./bs": "./node_modules/moment/locale/bs.js",
	"./bs.js": "./node_modules/moment/locale/bs.js",
	"./ca": "./node_modules/moment/locale/ca.js",
	"./ca.js": "./node_modules/moment/locale/ca.js",
	"./cs": "./node_modules/moment/locale/cs.js",
	"./cs.js": "./node_modules/moment/locale/cs.js",
	"./cv": "./node_modules/moment/locale/cv.js",
	"./cv.js": "./node_modules/moment/locale/cv.js",
	"./cy": "./node_modules/moment/locale/cy.js",
	"./cy.js": "./node_modules/moment/locale/cy.js",
	"./da": "./node_modules/moment/locale/da.js",
	"./da.js": "./node_modules/moment/locale/da.js",
	"./de": "./node_modules/moment/locale/de.js",
	"./de-at": "./node_modules/moment/locale/de-at.js",
	"./de-at.js": "./node_modules/moment/locale/de-at.js",
	"./de-ch": "./node_modules/moment/locale/de-ch.js",
	"./de-ch.js": "./node_modules/moment/locale/de-ch.js",
	"./de.js": "./node_modules/moment/locale/de.js",
	"./dv": "./node_modules/moment/locale/dv.js",
	"./dv.js": "./node_modules/moment/locale/dv.js",
	"./el": "./node_modules/moment/locale/el.js",
	"./el.js": "./node_modules/moment/locale/el.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-in": "./node_modules/moment/locale/en-in.js",
	"./en-in.js": "./node_modules/moment/locale/en-in.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./en-sg": "./node_modules/moment/locale/en-sg.js",
	"./en-sg.js": "./node_modules/moment/locale/en-sg.js",
	"./eo": "./node_modules/moment/locale/eo.js",
	"./eo.js": "./node_modules/moment/locale/eo.js",
	"./es": "./node_modules/moment/locale/es.js",
	"./es-do": "./node_modules/moment/locale/es-do.js",
	"./es-do.js": "./node_modules/moment/locale/es-do.js",
	"./es-mx": "./node_modules/moment/locale/es-mx.js",
	"./es-mx.js": "./node_modules/moment/locale/es-mx.js",
	"./es-us": "./node_modules/moment/locale/es-us.js",
	"./es-us.js": "./node_modules/moment/locale/es-us.js",
	"./es.js": "./node_modules/moment/locale/es.js",
	"./et": "./node_modules/moment/locale/et.js",
	"./et.js": "./node_modules/moment/locale/et.js",
	"./eu": "./node_modules/moment/locale/eu.js",
	"./eu.js": "./node_modules/moment/locale/eu.js",
	"./fa": "./node_modules/moment/locale/fa.js",
	"./fa.js": "./node_modules/moment/locale/fa.js",
	"./fi": "./node_modules/moment/locale/fi.js",
	"./fi.js": "./node_modules/moment/locale/fi.js",
	"./fil": "./node_modules/moment/locale/fil.js",
	"./fil.js": "./node_modules/moment/locale/fil.js",
	"./fo": "./node_modules/moment/locale/fo.js",
	"./fo.js": "./node_modules/moment/locale/fo.js",
	"./fr": "./node_modules/moment/locale/fr.js",
	"./fr-ca": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ca.js": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ch": "./node_modules/moment/locale/fr-ch.js",
	"./fr-ch.js": "./node_modules/moment/locale/fr-ch.js",
	"./fr.js": "./node_modules/moment/locale/fr.js",
	"./fy": "./node_modules/moment/locale/fy.js",
	"./fy.js": "./node_modules/moment/locale/fy.js",
	"./ga": "./node_modules/moment/locale/ga.js",
	"./ga.js": "./node_modules/moment/locale/ga.js",
	"./gd": "./node_modules/moment/locale/gd.js",
	"./gd.js": "./node_modules/moment/locale/gd.js",
	"./gl": "./node_modules/moment/locale/gl.js",
	"./gl.js": "./node_modules/moment/locale/gl.js",
	"./gom-deva": "./node_modules/moment/locale/gom-deva.js",
	"./gom-deva.js": "./node_modules/moment/locale/gom-deva.js",
	"./gom-latn": "./node_modules/moment/locale/gom-latn.js",
	"./gom-latn.js": "./node_modules/moment/locale/gom-latn.js",
	"./gu": "./node_modules/moment/locale/gu.js",
	"./gu.js": "./node_modules/moment/locale/gu.js",
	"./he": "./node_modules/moment/locale/he.js",
	"./he.js": "./node_modules/moment/locale/he.js",
	"./hi": "./node_modules/moment/locale/hi.js",
	"./hi.js": "./node_modules/moment/locale/hi.js",
	"./hr": "./node_modules/moment/locale/hr.js",
	"./hr.js": "./node_modules/moment/locale/hr.js",
	"./hu": "./node_modules/moment/locale/hu.js",
	"./hu.js": "./node_modules/moment/locale/hu.js",
	"./hy-am": "./node_modules/moment/locale/hy-am.js",
	"./hy-am.js": "./node_modules/moment/locale/hy-am.js",
	"./id": "./node_modules/moment/locale/id.js",
	"./id.js": "./node_modules/moment/locale/id.js",
	"./is": "./node_modules/moment/locale/is.js",
	"./is.js": "./node_modules/moment/locale/is.js",
	"./it": "./node_modules/moment/locale/it.js",
	"./it-ch": "./node_modules/moment/locale/it-ch.js",
	"./it-ch.js": "./node_modules/moment/locale/it-ch.js",
	"./it.js": "./node_modules/moment/locale/it.js",
	"./ja": "./node_modules/moment/locale/ja.js",
	"./ja.js": "./node_modules/moment/locale/ja.js",
	"./jv": "./node_modules/moment/locale/jv.js",
	"./jv.js": "./node_modules/moment/locale/jv.js",
	"./ka": "./node_modules/moment/locale/ka.js",
	"./ka.js": "./node_modules/moment/locale/ka.js",
	"./kk": "./node_modules/moment/locale/kk.js",
	"./kk.js": "./node_modules/moment/locale/kk.js",
	"./km": "./node_modules/moment/locale/km.js",
	"./km.js": "./node_modules/moment/locale/km.js",
	"./kn": "./node_modules/moment/locale/kn.js",
	"./kn.js": "./node_modules/moment/locale/kn.js",
	"./ko": "./node_modules/moment/locale/ko.js",
	"./ko.js": "./node_modules/moment/locale/ko.js",
	"./ku": "./node_modules/moment/locale/ku.js",
	"./ku.js": "./node_modules/moment/locale/ku.js",
	"./ky": "./node_modules/moment/locale/ky.js",
	"./ky.js": "./node_modules/moment/locale/ky.js",
	"./lb": "./node_modules/moment/locale/lb.js",
	"./lb.js": "./node_modules/moment/locale/lb.js",
	"./lo": "./node_modules/moment/locale/lo.js",
	"./lo.js": "./node_modules/moment/locale/lo.js",
	"./lt": "./node_modules/moment/locale/lt.js",
	"./lt.js": "./node_modules/moment/locale/lt.js",
	"./lv": "./node_modules/moment/locale/lv.js",
	"./lv.js": "./node_modules/moment/locale/lv.js",
	"./me": "./node_modules/moment/locale/me.js",
	"./me.js": "./node_modules/moment/locale/me.js",
	"./mi": "./node_modules/moment/locale/mi.js",
	"./mi.js": "./node_modules/moment/locale/mi.js",
	"./mk": "./node_modules/moment/locale/mk.js",
	"./mk.js": "./node_modules/moment/locale/mk.js",
	"./ml": "./node_modules/moment/locale/ml.js",
	"./ml.js": "./node_modules/moment/locale/ml.js",
	"./mn": "./node_modules/moment/locale/mn.js",
	"./mn.js": "./node_modules/moment/locale/mn.js",
	"./mr": "./node_modules/moment/locale/mr.js",
	"./mr.js": "./node_modules/moment/locale/mr.js",
	"./ms": "./node_modules/moment/locale/ms.js",
	"./ms-my": "./node_modules/moment/locale/ms-my.js",
	"./ms-my.js": "./node_modules/moment/locale/ms-my.js",
	"./ms.js": "./node_modules/moment/locale/ms.js",
	"./mt": "./node_modules/moment/locale/mt.js",
	"./mt.js": "./node_modules/moment/locale/mt.js",
	"./my": "./node_modules/moment/locale/my.js",
	"./my.js": "./node_modules/moment/locale/my.js",
	"./nb": "./node_modules/moment/locale/nb.js",
	"./nb.js": "./node_modules/moment/locale/nb.js",
	"./ne": "./node_modules/moment/locale/ne.js",
	"./ne.js": "./node_modules/moment/locale/ne.js",
	"./nl": "./node_modules/moment/locale/nl.js",
	"./nl-be": "./node_modules/moment/locale/nl-be.js",
	"./nl-be.js": "./node_modules/moment/locale/nl-be.js",
	"./nl.js": "./node_modules/moment/locale/nl.js",
	"./nn": "./node_modules/moment/locale/nn.js",
	"./nn.js": "./node_modules/moment/locale/nn.js",
	"./oc-lnc": "./node_modules/moment/locale/oc-lnc.js",
	"./oc-lnc.js": "./node_modules/moment/locale/oc-lnc.js",
	"./pa-in": "./node_modules/moment/locale/pa-in.js",
	"./pa-in.js": "./node_modules/moment/locale/pa-in.js",
	"./pl": "./node_modules/moment/locale/pl.js",
	"./pl.js": "./node_modules/moment/locale/pl.js",
	"./pt": "./node_modules/moment/locale/pt.js",
	"./pt-br": "./node_modules/moment/locale/pt-br.js",
	"./pt-br.js": "./node_modules/moment/locale/pt-br.js",
	"./pt.js": "./node_modules/moment/locale/pt.js",
	"./ro": "./node_modules/moment/locale/ro.js",
	"./ro.js": "./node_modules/moment/locale/ro.js",
	"./ru": "./node_modules/moment/locale/ru.js",
	"./ru.js": "./node_modules/moment/locale/ru.js",
	"./sd": "./node_modules/moment/locale/sd.js",
	"./sd.js": "./node_modules/moment/locale/sd.js",
	"./se": "./node_modules/moment/locale/se.js",
	"./se.js": "./node_modules/moment/locale/se.js",
	"./si": "./node_modules/moment/locale/si.js",
	"./si.js": "./node_modules/moment/locale/si.js",
	"./sk": "./node_modules/moment/locale/sk.js",
	"./sk.js": "./node_modules/moment/locale/sk.js",
	"./sl": "./node_modules/moment/locale/sl.js",
	"./sl.js": "./node_modules/moment/locale/sl.js",
	"./sq": "./node_modules/moment/locale/sq.js",
	"./sq.js": "./node_modules/moment/locale/sq.js",
	"./sr": "./node_modules/moment/locale/sr.js",
	"./sr-cyrl": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr-cyrl.js": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr.js": "./node_modules/moment/locale/sr.js",
	"./ss": "./node_modules/moment/locale/ss.js",
	"./ss.js": "./node_modules/moment/locale/ss.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js",
	"./sw": "./node_modules/moment/locale/sw.js",
	"./sw.js": "./node_modules/moment/locale/sw.js",
	"./ta": "./node_modules/moment/locale/ta.js",
	"./ta.js": "./node_modules/moment/locale/ta.js",
	"./te": "./node_modules/moment/locale/te.js",
	"./te.js": "./node_modules/moment/locale/te.js",
	"./tet": "./node_modules/moment/locale/tet.js",
	"./tet.js": "./node_modules/moment/locale/tet.js",
	"./tg": "./node_modules/moment/locale/tg.js",
	"./tg.js": "./node_modules/moment/locale/tg.js",
	"./th": "./node_modules/moment/locale/th.js",
	"./th.js": "./node_modules/moment/locale/th.js",
	"./tk": "./node_modules/moment/locale/tk.js",
	"./tk.js": "./node_modules/moment/locale/tk.js",
	"./tl-ph": "./node_modules/moment/locale/tl-ph.js",
	"./tl-ph.js": "./node_modules/moment/locale/tl-ph.js",
	"./tlh": "./node_modules/moment/locale/tlh.js",
	"./tlh.js": "./node_modules/moment/locale/tlh.js",
	"./tr": "./node_modules/moment/locale/tr.js",
	"./tr.js": "./node_modules/moment/locale/tr.js",
	"./tzl": "./node_modules/moment/locale/tzl.js",
	"./tzl.js": "./node_modules/moment/locale/tzl.js",
	"./tzm": "./node_modules/moment/locale/tzm.js",
	"./tzm-latn": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm-latn.js": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm.js": "./node_modules/moment/locale/tzm.js",
	"./ug-cn": "./node_modules/moment/locale/ug-cn.js",
	"./ug-cn.js": "./node_modules/moment/locale/ug-cn.js",
	"./uk": "./node_modules/moment/locale/uk.js",
	"./uk.js": "./node_modules/moment/locale/uk.js",
	"./ur": "./node_modules/moment/locale/ur.js",
	"./ur.js": "./node_modules/moment/locale/ur.js",
	"./uz": "./node_modules/moment/locale/uz.js",
	"./uz-latn": "./node_modules/moment/locale/uz-latn.js",
	"./uz-latn.js": "./node_modules/moment/locale/uz-latn.js",
	"./uz.js": "./node_modules/moment/locale/uz.js",
	"./vi": "./node_modules/moment/locale/vi.js",
	"./vi.js": "./node_modules/moment/locale/vi.js",
	"./x-pseudo": "./node_modules/moment/locale/x-pseudo.js",
	"./x-pseudo.js": "./node_modules/moment/locale/x-pseudo.js",
	"./yo": "./node_modules/moment/locale/yo.js",
	"./yo.js": "./node_modules/moment/locale/yo.js",
	"./zh-cn": "./node_modules/moment/locale/zh-cn.js",
	"./zh-cn.js": "./node_modules/moment/locale/zh-cn.js",
	"./zh-hk": "./node_modules/moment/locale/zh-hk.js",
	"./zh-hk.js": "./node_modules/moment/locale/zh-hk.js",
	"./zh-mo": "./node_modules/moment/locale/zh-mo.js",
	"./zh-mo.js": "./node_modules/moment/locale/zh-mo.js",
	"./zh-tw": "./node_modules/moment/locale/zh-tw.js",
	"./zh-tw.js": "./node_modules/moment/locale/zh-tw.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive ^\\.\\/.*$";

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html":
/*!**************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-app>\n  <ion-router-outlet></ion-router-outlet>\n</ion-app>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/components/comment/comment.component.html":
/*!*************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/components/comment/comment.component.html ***!
  \*************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<form [formGroup]=\"comment_data\" novalidate style=\"display:flex\">\n  <div style=\"width: 70%;margin-left: 5px;\">\n    <ion-item lines=\"none\" class=\"input-text ion-margin-top\">\n      <ion-input placeholder=\"Comentario\" formControlName=\"comment\" required></ion-input>\n    </ion-item>\n    <ion-item lines=\"none\" class=\"danger-color-text\"\n      *ngIf=\" controls.comment.dirty && controls.comment.touched && controls.comment.errors\">\n      <ion-icon name=\"alert-circle\" slot=\"start\" class=\"danger-color-text\"></ion-icon>\n      <ion-label *ngIf=\"controls.comment.errors.required\">El comentario es requerido</ion-label>\n    </ion-item>\n\n  </div>\n  <div style=\"width: 15%;\">\n    <ion-button expand=\"block\" mode=\"ios\" color=\"light\" class=\" ion-margin-top\" (click)=\"uploadPhoto()\">\n      <ion-icon name=\"images-outline\" ></ion-icon>\n    </ion-button>\n  </div>\n  <div style=\"width: 15%;\">\n    <ion-button type=\"submit\" expand=\"block\" mode=\"ios\" color=\"light\" class=\" ion-margin-top\" (click)=\"save()\">\n      <ion-spinner name=\"crescent\" *ngIf=\"sending == 'yes'\" color=\"primary\"></ion-spinner>\n      <ion-icon name=\"send-outline\" *ngIf=\"!sending\"></ion-icon>\n    </ion-button>\n  </div>\n</form>");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/components/order-card/order-card.component.html":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/components/order-card/order-card.component.html ***!
  \*******************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div class=\"ion-text-center\" style=\"padding: 1px;\n  border-top-left-radius: 20px;\n  border-top-right-radius: 20px;\n  background: #49158c;\n  width: 95%;\n  margin: auto;\n  color: white;\n  font-weight: 900;\n  \">\n    <h3 class=\"ion-text-center\" style=\"margin-top: 2px;\n    margin-bottom: 2px;\n    font-weight: 900;\">{{title}}</h3>\n  </div>\n  <ion-card style=\"padding: 0;min-height: 320px;margin-top: 0; border-bottom-left-radius: 20px;\n  border-bottom-right-radius: 20px;\" mode=\"ios\">\n    \n    <ion-card-content style=\"padding: 0;\">\n      <div style=\"justify-content: center;\n    margin: auto;\n    width: 50%;\">\n       \n      </div>\n      <ng-container *ngIf=\"available == 0; else elseTemplate\">\n        <div style=\"justify-content: center;\n    margin: auto;\n    width: 70%;\">\n\n          <div class=\"ion-text-center\" style=\"margin-top:60px;\">\n            <img src=\"assets/imgs/aqua-driver.png\" />\n            <h4 class=\"ion-text-center\">\n              Toca el botón para ponerte disponible y recibir servicios\n            </h4>\n          </div>\n        </div>\n      </ng-container>\n      <ng-template #elseTemplate>\n        <ng-container *ngIf=\"filter().length > 0; else elseTemplateOrder\">\n          <ion-card style=\"--background: #f2f2f2;\" *ngFor=\"let item of filter()\" (click)=\"viewDetail(item, near)\">\n            <ion-card-header style=\"padding: 0;\">\n              <ion-grid style=\"    padding: 0;\">\n                <ion-row>\n                  <ion-col size=\"3\" style=\"padding: 0;\">\n                    <div style=\"font-size: 0.7em;\n                    /* height: 100%; */\n                    padding: 10px;\n                    padding-left: 5px;\n                    font-weight: 900;\n                    background: #49158c;\n                    color: white;\n                    clip-path: polygon;\n                    clip-path: polygon(0 0, 100% 0, 79% 100%, 0% 100%);\">\n                      Orden # {{item.id}}\n                    </div>\n                  </ion-col>\n                  <ion-col size=\"9\" style=\"padding: 0;\">\n                    <h3>Tipo de servicio:\n                      <span style=\"    font-size: 1.1em;\n                      color: black;\n                      font-weight: 900;\" *ngIf=\"item.diligence==0\">{{item.service_type}}</span>\n                      <span style=\"    font-size: 1.1em;\n                      color: black;\n                      font-weight: 900;\" *ngIf=\"item.diligence==1\">Diligencia</span>\n                    </h3>\n                  </ion-col>\n                </ion-row>\n                <ion-row>\n                  <ng-container *ngIf=\"item.service_type_id==2\">\n                    <ion-col [size]=\"near? 6:12\">\n                      <p>Recorrido: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{item.round_trip ==1 ? 'Ida y Vuelta': 'Ida'}}</strong></span></p>\n                      <p>Fecha: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{item.date}}</strong></span></p>\n                      <p>Cantidad: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{item.details.length}} direcciones</strong></span></p>\n                      <p *ngFor=\"let itemAddress of item.details;let index=i\">Dirección {{index}}: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{itemAddress.address}}</strong></span></p>\n                      \n                      <p>Método de pago: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{item.payment_method}}</strong></span></p>\n                    </ion-col>\n                  </ng-container>\n                  <ng-container *ngIf=\"item.service_type_id==1\">\n                    <ion-col [size]=\"near? 6:12\">\n                      <p>Recorrido: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{item.round_trip ==1 ? 'Ida y Vuelta': 'Ida'}}</strong></span></p>\n                      <p>Fecha: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{item.date}}</strong></span></p>\n                      <p>Método de pago: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{item.payment_method}}</strong></span></p>\n                      <p>Dirección A: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{item.details[0].address}}</strong></span></p>\n                      <p>Dirección B: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{item.details[1].address}}</strong></span></p> \n                    </ion-col>\n                  </ng-container>\n\n                  <ng-container *ngIf=\"item.service_type_id==3\">\n                    <ion-col [size]=\"near? 6:12\">\n                      <p>Recorrido: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{item.round_trip ==1 ? 'Ida y Vuelta': 'Ida'}}</strong></span></p>\n                      <p>Fecha: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{item.date}}</strong></span></p>\n                      <p *ngFor=\"let itemAddress of item.details;let index=i\">Dirección {{index}}: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{itemAddress.address}}</strong></span></p>\n                      <p>Número de horas: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{item.number_hours}}</strong></span></p>\n                      <p>Horario: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong> {{item.details[0].start_time }} - {{item.details[0].departure_time}}</strong></span></p>\n                      \n                      <p>Método de pago: <span class=\"black-color-text\" style=\"font-weight: 900;\"><strong>{{item.payment_method}}</strong></span></p>\n                    </ion-col>\n                  </ng-container>\n                  \n                  \n                  <ion-col size=\"6\" *ngIf=\"near\">\n                    <ion-button color=\"primary\" round=\"true\" style=\"    --border-radius: 20px;\n                    height: 30px;\n                    min-width: 100%;\" (click)=\"accept(item)\">\n                      Aceptar\n                    </ion-button>\n                    <ion-button color=\"danger\" round=\"true\" style=\"    --border-radius: 20px;\n                    height: 30px;\n                    min-width: 100%;\" (click)=\"reject(item)\">\n                      Cancelar\n                    </ion-button>\n                  </ion-col>\n                </ion-row>\n                <ion-row *ngIf=\"item.status_order==23||item.status_order==24\">\n                  <ion-col size=\"12\">\n                    <div style=\"display: flex;justify-content: center;\">\n                      <ion-button>\n                        {{item.status_order==23?'Iniciar':'Continuar'}}\n                      </ion-button>\n                    </div>\n                  </ion-col>\n                </ion-row>\n              </ion-grid>\n            </ion-card-header>\n          </ion-card>\n          \n        </ng-container>\n        <ng-template #elseTemplateOrder>\n          <div style=\"position: relative;height: 200px;\" *ngIf=\"spinner\">\n            <h3 class=\"ion-text-center \" style=\"    font-size: 1.5em;\n                position: absolute;\n                top: 0;\n                bottom: 0;\n                right: 0;\n                left: 0;\n                text-align: center;\n                margin: auto;\n                height: 40px;\n            \">Cargando<br><ion-spinner name=\"dots\"></ion-spinner> </h3>\n            \n          </div>\n          <div style=\"position: relative;height: 200px;\" *ngIf=\"!spinner && orders.length == 0;\">\n            <h3 class=\"ion-text-center \" style=\"    font-size: 1.5em;\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          right: 0;\n          left: 0;\n          text-align: center;\n          margin: auto;\n          height: 40px;\n      \">No tiene ordenes asignadas</h3>\n          </div>\n\n        </ng-template>\n        \n        \n      </ng-template>\n    </ion-card-content>\n  </ion-card>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/components/order/order.component.html":
/*!*********************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/components/order/order.component.html ***!
  \*********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-card  style=\"margin-bottom: 10px;\" >\n  <ion-card-content >\n\n    <div style=\"width:100%;display: flex;\">\n      <div style=\"width: 50%;text-align:right\">\n        {{ order.date | dateLocal | titlecase }}\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"w-50\">\n        <p class=\" \">Tipo de Servicio :  </p>\n      </div>\n      <div style=\"width: 50%;\">\n        <strong>{{order.service_type}}</strong>\n        \n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"w-50\">\n        <p class=\" \"> Ciudad : </p>\n        \n      </div>\n      <div style=\"width: 50%;   \">\n        <strong>{{order.city}}</strong>\n        \n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"w-50\">\n        <p class=\"\"> Cantidad : </p>\n      </div>\n      <div class=\"w-50\">\n        <strong>{{order.details.length}}</strong>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"w-50\">\n        <p class=\"\"> Recorrido : </p>\n      </div>\n      <div style=\"width: 50%; \">\n        <strong>{{order.round_trip ==1 ? 'Ida y Vuelta': 'Ida'}}</strong>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"w-50\">\n        <p class=\"\"> Valor declarado : </p>\n      </div>\n      <div class=\"w-50\">\n        <strong>{{order.declared_value}}</strong>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"w-50\">\n        <p class=\"\"> Tipo de accesorio : </p>\n      </div>\n      <div class=\"w-50\">\n        <strong>{{order.accesory}}</strong>\n      </div>\n    </div>\n    \n    <div class=\"row\" *ngIf=\"order.service_type_id == 3\">\n      <div class=\"w-50\">\n        <p class=\"\"> Número de horas : </p>\n      </div>\n      <div style=\"width: 50%;    \">\n        <strong>{{order.number_hours}}</strong>\n      </div>\n      <div class=\"w-50\">\n        <p class=\"\"> Hora de entrada : </p>\n      </div>\n      <div style=\"width: 50%;    \">\n        <strong>{{order.detail ? order.detail[0].start_time : order.details[0].start_time}}</strong>\n      </div>\n      <div class=\"w-50\">\n        <p class=\"\"> Hora de salida : </p>\n      </div>\n      <div style=\"width: 50%;    \">\n        <strong>{{order.detail ? order.detail[0].departure_time : order.details[0].departure_time}}</strong>\n      </div>\n    </div>\n    <div class=\"row\" style=\"justify-content:center\" *ngIf=\"order.status_order != 25 && show\">\n      <ion-button mode=\"ios\" color=\"primary\" size=\"small\"\n         class=\"ion-margin-top ion-text-center\" style=\"margin: auto;\">\n        Iniciar\n      </ion-button>\n    </div>\n    \n  </ion-card-content>\n</ion-card>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/screens/forms/events/events.page.html":
/*!*********************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/screens/forms/events/events.page.html ***!
  \*********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-header>\n  <ion-toolbar color=\"primary\" style=\"position: relative;\" mode=\"ios\">\n    <ion-item lines=\"none\" color=\"primary\">\n      <ion-button (click)=\"dismiss()\">\n        <ion-icon slot=\"start\" name=\"arrow-back-outline\"></ion-icon>\n      </ion-button>\n      <ion-avatar style=\"width: 40px;\n    height: 40px;\">\n        <ion-img src=\"assets/imgs/avatar.svg\"></ion-img>\n\n      </ion-avatar>\n      <ion-title >{{order.customer_name}} {{order.customer_last_name}}\n      </ion-title>\n    </ion-item>\n\n\n  </ion-toolbar>\n</ion-header>\n\n<ion-content forceOverscroll=\"true\">\n  <div style=\"text-align: right;float:right;clear: both;\" *ngFor=\"let item of events\">\n    <ion-img [src]=\"item.photo\" alt=\"\" *ngIf=\"item.photo\" style=\"width: 200px;\n    height: 100px;\n    margin-right: 10px;\n    float: right;\n    margin-bottom: 10px;\" (click)=\"viewImage(item.photo)\"></ion-img>\n    <p style=\"margin-bottom: 5px;font-size: 1em;margin-right: 10px;\" *ngIf=\"item.description\">\n\n      <span style=\"text-align: right;\n      background: #49158c;\n      padding: 9px;\n      border-radius: 10px;\n      color: white;\n      display: block;\n      width: max-content;\n      float: right;\n      max-width: 300px;\">{{item.description}}<ion-icon\n          [name]=\"!item.sending ? 'checkmark-outline': 'checkmark-done-outline'\"></ion-icon></span>\n    </p>\n    <p class=\"grey-color-text\" style=\"margin-bottom: 5px;font-size: 1em; margin-right: 10px;clear: both;\">\n      {{ item.created_at | date:'HH:MM'  }}</p>\n  </div>\n</ion-content>\n<ion-toolbar *ngIf=\"(order.status_order !=25 && order.status_order !=31)\">\n  <comment [order]=\"order\" [events]=\"events\" [latitude]=\"latitude\" [longitude]=\"longitude\" (scroll)=\"scrollToBottom()\">\n  </comment>\n</ion-toolbar>");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/screens/forms/image/image.page.html":
/*!*******************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/screens/forms/image/image.page.html ***!
  \*******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-header>\n  <ion-toolbar color=\"primary\" style=\"position: relative;\" mode=\"ios\">\n    <ion-title style=\"position: absolute; left: 5px;bottom:14px\">Foto\n    </ion-title>\n    <ion-button (click)=\"dismiss()\" style=\"position: absolute; right: 5px;bottom:5px\">\n      <ion-icon slot=\"icon-only\" name=\"close-outline\"></ion-icon>\n    </ion-button>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen] =\"true\" class=\"custom-img\">\n  <ion-thumbnail style=\"width:100%;height:100%\">\n    <ion-img [src]=\"image\" alt=\"\" style=\"width:100%;height:100%\" ></ion-img>\n  </ion-thumbnail>\n\n</ion-content>");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/screens/forms/map/map.page.html":
/*!***************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/screens/forms/map/map.page.html ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-header>\n  <ion-toolbar color=\"primary\" style=\"position: relative;\">\n    <ion-title style=\"position: absolute; left: 5px;bottom:14px\">Mapa\n    </ion-title>\n    <ion-button (click)=\"dismiss()\" style=\"position: absolute; right: 5px;bottom:5px\">\n      <ion-icon slot=\"icon-only\" name=\"close-outline\"></ion-icon>\n    </ion-button>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <div #map id=\"map\" style=\"width: 100%;height: 100%;\"></div>\n</ion-content>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/screens/forms/view-detail/view-detail.page.html":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/screens/forms/view-detail/view-detail.page.html ***!
  \*******************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-header>\n  <ion-toolbar color=\"primary\" style=\"position: relative;\" mode=\"ios\">\n    <ion-item lines=\"none\" color=\"primary\">\n      <ion-title>ORDEN #{{order.id}}\n      </ion-title>\n      <ion-button (click)=\"dismiss()\" slot=\"end\" style=\"width: 40px;\"\n        *ngIf=\"(order.status_order == 25 || order.status_order == 31 || order.status_order == 48 || !detailActive)\">\n        <ion-icon name=\"close-outline\"></ion-icon>\n      </ion-button>\n    </ion-item>\n\n\n  </ion-toolbar>\n</ion-header>\n\n<div class=\"time\" *ngIf=\"initTimerB && order.service_type_id != 3\">\n  <div id=\"hms\">{{timer_hour}}</div>\n</div>\n<!--- the order service type is time-->\n<ion-content *ngIf=\"order.service_type_id == 3\">\n  <ng-container>\n    <ion-fab vertical=\"top\" horizontal=\"start\" slot=\"fixed\" *ngIf=\"order.status_order !=25 && order.status_order !=31 \"\n      (click)=\"cancel()\">\n      <ion-fab-button color=\"danger\">\n        <ion-icon name=\"close-outline\"></ion-icon>\n      </ion-fab-button>\n    </ion-fab>\n    <ion-fab vertical=\"top\" horizontal=\"end\" slot=\"fixed\" (click)=\"viewEvent(order)\">\n      <ion-fab-button color=\"primary\">\n        <ion-icon name=\"chatbox-outline\"></ion-icon>\n      </ion-fab-button>\n    </ion-fab>\n  </ng-container>\n\n  <div style=\"position: absolute;\n  top:0px;left: 0;right: 0;margin: auto;width: 80%;height: 400px;\">\n    <h2 class=\"ion-text-center\" style=\"text-align: center;\n  color: #2dd36f;\n  font-weight: bold;\">En Servicio</h2>\n    <p class=\"ion-padding ion-text-center\" style=\" font-size: 1em;\n    font-weight: 900;\n    padding: 0;\n    margin-top: 0;\n\"> {{initTime | date:'shortTime'}} - {{detailActive.departure_time}}</p>\n\n  </div>\n</ion-content>\n<!--- the order service type is different fron time-->\n<ion-content [fullscreen]=\"true\" *ngIf=\"order.service_type_id != 3\">\n  <ng-container>\n    <ion-fab vertical=\"top\" horizontal=\"start\" slot=\"fixed\" *ngIf=\"order.status_order !=25 && order.status_order !=31  \"\n      (click)=\"cancel()\">\n      <ion-fab-button color=\"danger\">\n        <ion-icon name=\"close-outline\"></ion-icon>\n      </ion-fab-button>\n    </ion-fab>\n    <ion-fab vertical=\"top\" horizontal=\"end\" slot=\"fixed\" style=\"right: 75px;\"\n      *ngIf=\"order.status_order !=25 && order.status_order !=31\">\n      <ion-fab-button color=\"warning\">\n        <ion-img src=\"assets/imgs/support-icon.jpg\" style=\"width: 35px;\"></ion-img>\n      </ion-fab-button>\n    </ion-fab>\n    <ion-fab vertical=\"top\" horizontal=\"end\" slot=\"fixed\" (click)=\"viewEvent(order)\">\n      <ion-fab-button color=\"primary\">\n        <ion-icon name=\"chatbox-outline\"></ion-icon>\n      </ion-fab-button>\n    </ion-fab>\n  </ng-container>\n\n\n\n  <div #map id=\"map\" style=\"width: 100%;height: 100%;\"></div>\n\n</ion-content>\n<!--- Details of the service-->\n<ion-footer [translucent]=\"true\">\n  <ng-container *ngIf=\"order.service_type_id != 3; else elseTemplate3\">\n    <ion-card style=\"position: absolute;\n  bottom: 64px;\n  left: 0;\n  right: 0;\n  margin: auto 10%;\n  padding: -5px;\n  border-radius: 10px;\" *ngIf=\"view_more\"\n      [ngClass]=\"{'min-he': (order.status_order == 25 && order.status_order == 31)}\">\n      <ion-card-content style=\"padding: 0;\">\n        <div>\n          <ion-toolbar *ngIf=\"detailActive ? order.status_order == 31 ? false : true: false\">\n            <ion-item (click)=\"callANumber(detailActive.contact_phone)\" lines=\"none\">\n              <ion-avatar slot=\"start\">\n                <ion-img src=\"assets/imgs/avatar.svg\"></ion-img>\n              </ion-avatar>\n              <ion-label>\n                <p class=\" black-color-text\">{{detailActive.contact_name}} </p>\n                <p class=\"grey-color-text\">Duración: {{ duration_text }}</p>\n              </ion-label>\n\n              <ion-icon name=\"call-outline\" slot=\"end\" color=\"success\" size=\"large\"></ion-icon>\n            </ion-item>\n\n\n          </ion-toolbar>\n          <div style=\"max-height: 500px;overflow: auto;transition: height 2s;\"\n            [ngClass]=\"{'min-he': order.status_order==25 || order.status_order == 31}\">\n            <ion-title class=\"ion-text-center\" *ngIf=\"order.status_order==25 || order.status_order == 31 \">Direcciones\n            </ion-title>\n            <ion-button expand=\"block\"\n              [color]=\"(!detailActive || detailActive.status == 25) || detailActive && detailActive.status == 48  ? 'medium': 'success'\"\n              (click)=\"end(detailActive)\"\n              *ngIf=\"detailActive && (order.status_order !=25 && order.status_order !=31) && order.service_type_id != 3\">\n              <ng-container *ngIf=\"detailActive.loading; else elseTemplate\">\n                <p class=\"ion-text-center ion-no-padding\">{{detailActive.text_loading}}<ion-spinner name=\"crescent\">\n                  </ion-spinner>\n                </p>\n              </ng-container>\n              <ng-template #elseTemplate>\n\n                {{!detailActive || detailActive.status == 25 ? 'FINALIZADO': (detailActive.ended) ? 'FINALIZAR TAREA' :\n                detailActive && detailActive.status == 48 ? 'NO EFECTIVO': 'YA LLEGUÉ'}}\n              </ng-template>\n\n            </ion-button>\n            <ng-container *ngIf=\"(order.status_order != 25 && order.status_order != 31);else elseT \">\n              <ion-card style=\"padding: 0;\n            --background: rgb(239 238 244);\n            border-radius: 20px;\n            box-shadow: none;\" *ngIf=\"detailActive\">\n                <ion-card-content class=\"row\">\n                  <div style=\"width:10%\">\n                    <ion-badge color=\"primary\">{{findLetter() | titlecase}}</ion-badge>\n                  </div>\n                  <div style=\"width: 70%;\">\n                    <p class=\"ion-text-justify black-color-text\">{{detailActive.address}}</p>\n                    <p class=\"ion-text-justify grey-color-text\">{{detailActive.description}}</p>\n                    <p class=\"ion-text-justify black-color-text\" *ngIf=\"order.zapp_store_order==1\" style=\"font-weight: bold;\n                  text-transform: uppercase;\n              \">debes retirar la orden {{order.wc_order_id}}</p>\n                  </div>\n                </ion-card-content>\n                <ng-container *ngIf=\"order.service_type_id == 3\">\n                  <p style=\"padding: 10px;\">Día : {{order.date}}</p>\n                  <p class=\"ion-padding\">{{initTime | date:'shortTime'}} - {{detailActive.departure_time}}</p>\n                  <p style=\"padding: 10px;\">Horas : {{detailActive.number_of_hours}}</p>\n                </ng-container>\n                <p class=\"grey-color-text ion-padding\" *ngIf=\"order.service_type_id != 3\" style=\"padding-right: 0;\n              padding-bottom: 0;\">Cobrar : <ion-label class=\"black-color-text\" style=\"font-weight: bold;\">\n                    <!--WHEN PAYMENT METHOD IS CASH -->\n                    <ng-container>\n\n                    </ng-container>\n\n                    {{(order.payment_method == 'efectivo' ? this.order.zapp_store_order ==1 ?\n                    this.order.total_zapp_store:\n                    order.total: order.payment_method == 'masivo'?(detailActive.declared_value || 0 ) :0) |\n                    currency:undefined:'symbol':'3.0'}}\n                  </ion-label>\n                </p>\n                <p class=\"grey-color-text ion-padding\" *ngIf=\"detailActive.total_charge > 0\" style=\"padding-top: 0;\">\n                  Tiempo de espera : <ion-label class=\"black-color-text\" style=\"font-weight: bold;\">\n                    {{detailActive.total_charge | currency:undefined:'symbol':'3.0' }}</ion-label>\n              </ion-card>\n              <ng-template #name>\n                <p class=\"grey-color-text ion-text-justify\">No hay mas direcciones , puedes finalizar la orden</p>\n              </ng-template>\n\n            </ng-container>\n            <ng-template #elseT>\n              <div style=\"max-height: 227px;\n            min-height: 350px;\">\n                <ion-card *ngFor=\"let item of order.details; let i=index\">\n                  <ion-card-content class=\"row\">\n                    <div style=\"width:10%\">\n                      <ion-badge color=\"primary\">{{az_arr[i] | titlecase}}</ion-badge>\n                    </div>\n                    <div style=\"width: 70%;\">\n                      <p class=\"ion-text-justify black-color-text\">{{item.address}}</p>\n                      <p class=\"ion-text-justify grey-color-text\">{{item.description}}</p>\n                      <ng-container *ngIf=\"order.diligence==1\">\n                        <div>\n                          <p class=\"ion-text-justify black-color-text\">Tiempo de espera:{{item.wait_time}} minutos</p>\n                          <p class=\"ion-text-justify grey-color-text\">Total:{{item.surplus_money}}</p>\n                        </div>\n                      </ng-container>\n                    </div>\n\n\n\n                  </ion-card-content>\n                  <ion-button expand=\"block\" color=\"medium\">\n\n                    {{item.status==25 ? 'FINALIZADO' : item.status==48 ?'NO EFECTIVO':'CANCELADO'}}\n                  </ion-button>\n                </ion-card>\n              </div>\n\n            </ng-template>\n\n          </div>\n        </div>\n\n\n\n      </ion-card-content>\n\n    </ion-card>\n    <ion-button class=\"ion-margin-top\" style=\"margin: auto;width: 80%;position: absolute;bottom: 15px; right: 0;\n  left: 0;\" color=\"primary\" (click)=\"viewMore()\" *ngIf=\"detailActive || order.status_order == 25\" expand=\"block\">\n      {{view_more ? 'Ocultar detalle' : 'Ver detalle'}}</ion-button>\n  </ng-container>\n  <ng-template #elseTemplate3>\n    <ion-card class=\"card-absolute-normal white-gray-background\" [ngClass]=\"{'min-he': order.status_order == 25}\">\n      <div class=\"view-detail\" (click)=\"viewMore()\">\n        Información del servicio\n      </div>        \n      <ion-card-content class=\"ion-no-padding\" *ngIf=\"view_more\">\n        <div >\n          \n          <ion-toolbar\n            *ngIf=\"detailActive ? order.status_order == 31 ? false : true: false\"\n            class=\"toolbar\">\n            <ion-item lines=\"none\">\n              <ion-avatar slot=\"start\">\n                <ion-img src=\"assets/imgs/avatar.svg\"\n                  ></ion-img>\n              </ion-avatar>\n              <ion-label>\n                <p class=\" black-color-text\" style=\"font-family: 'Gilroy-ExtraBold' !important;\">{{detailActive.contact_name}}</p>\n              </ion-label>\n\n              <ion-icon style=\"display: none;\" name=\"call-outline\" (click)=\"callANumber(this.order.drivers[0].driver_phone)\" slot=\"end\"\n                color=\"success\" size=\"large\"></ion-icon>\n                <div [class]=\"'status in-process'\" >\n                  En servicio\n                </div>\n            </ion-item>\n            \n\n          </ion-toolbar>\n          <div   style=\"min-height: 200px;\n          max-height: 300px;\">\n\n            <div style=\"    max-height: 235px;\n            overflow-y: scroll;\">\n              <ion-card *ngFor=\"let item of order.details; let i=index\" style=\"    border-radius: 20px;\n              padding: 5px;\n              padding-left: 10px;\n              padding-right: 10px;\n              margin-top: 5px;\n              box-shadow: none;\">\n                <ion-card-content class=\"\" style=\"padding-top: 3px;\n                padding-bottom: 3px;\">\n                   <h2 class=\"ion-text-center\" style=\"width: 100%;\">Horas {{item.number_of_hours}}</h2>\n                \n                   <p style=\"width: 100%;\">Dirección de inicio</p>\n                   <p style=\" font-size: 0.8em;width: 100%;font-weight: bold;\"><span style=\"color: black;\n                     font-weight: 900;\n                     font-family: 'Gilroy-ExtraBold' !important;\">\n                     {{item.address}}\n                     </span>\n                   </p>\n                   <p style=\"font-size: 0.8em;width: 100%;\">Hora de inicio:\n                     <span style=\"color: black;\n                     font-weight: 900;\n                     font-family: 'Gilroy-ExtraBold' !important;\">\n                     {{item.start_time}}\n                     </span>\n                      \n                     </p>\n                   <p style=\"font-size: 0.8em;width: 100%;\">Hora de finalización: \n                     <span style=\"color: black;\n                     font-weight: 900;\n                     font-family: 'Gilroy-ExtraBold' !important;\">\n                     {{item.departure_time}}\n                     </span>\n                   </p>\n                   <ng-container >\n                     <div class=\"time\" *ngIf=\"item.timer\" style=\"width: 100%;\n                     text-align: center;\n                     color: black;\n                     font-weight: 900;\n                     font-family: 'Gilroy-ExtraBold' !important;\" >\n                       <span id=\"hms\" style=\"color: black;\n                       font-weight: 900;\n                       font-family: 'Gilroy-ExtraBold' !important;\n                   \">{{item.timer.hours >9? item.timer.hours:'0'+item.timer.hours}}:{{item.timer.minutes >9? item.timer.minutes:'0'+item.timer.minutes}}:{{item.timer.seconds >9? item.timer.seconds:'0'+item.timer.seconds}}</span>\n                     </div>\n                     <br>\n                     \n                   </ng-container>\n\n                </ion-card-content>\n\n              </ion-card>\n            </div>\n            \n          </div>\n        </div>\n      </ion-card-content>\n\n    </ion-card>\n  </ng-template>\n\n\n</ion-footer>");

/***/ }),

/***/ "./src/app/app-routing.module.ts":
/*!***************************************!*\
  !*** ./src/app/app-routing.module.ts ***!
  \***************************************/
/*! exports provided: AppRoutingModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppRoutingModule", function() { return AppRoutingModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _guards_auth_guard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./guards/auth.guard */ "./src/app/guards/auth.guard.ts");




const routes = [
    {
        path: '',
        loadChildren: () => __webpack_require__.e(/*! import() | tabs-tabs-module */ "tabs-tabs-module").then(__webpack_require__.bind(null, /*! ./tabs/tabs.module */ "./src/app/tabs/tabs.module.ts")).then(m => m.TabsPageModule)
    },
    {
        path: 'login',
        loadChildren: () => __webpack_require__.e(/*! import() | screens-auth-login-login-module */ "screens-auth-login-login-module").then(__webpack_require__.bind(null, /*! ./screens/auth/login/login.module */ "./src/app/screens/auth/login/login.module.ts")).then(m => m.LoginPageModule),
    },
    {
        path: 'signup',
        loadChildren: () => __webpack_require__.e(/*! import() | screens-auth-signup-signup-module */ "screens-auth-signup-signup-module").then(__webpack_require__.bind(null, /*! ./screens/auth/signup/signup.module */ "./src/app/screens/auth/signup/signup.module.ts")).then(m => m.SignupPageModule)
    },
    {
        path: 'forgotpassword',
        loadChildren: () => __webpack_require__.e(/*! import() | screens-auth-forgotpassword-forgotpassword-module */ "forgotpassword-forgotpassword-module").then(__webpack_require__.bind(null, /*! ./screens/auth/forgotpassword/forgotpassword.module */ "./src/app/screens/auth/forgotpassword/forgotpassword.module.ts")).then(m => m.ForgotpasswordPageModule)
    },
    {
        path: 'home',
        loadChildren: () => Promise.all(/*! import() | screens-screens-tabs-home-home-module */[__webpack_require__.e("common"), __webpack_require__.e("screens-screens-tabs-home-home-module")]).then(__webpack_require__.bind(null, /*! ./screens/screens-tabs/home/home.module */ "./src/app/screens/screens-tabs/home/home.module.ts")).then(m => m.HomePageModule),
        canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_3__["AuthGuard"]]
    },
    {
        path: 'profile',
        loadChildren: () => __webpack_require__.e(/*! import() | screens-screens-tabs-profile-profile-module */ "screens-screens-tabs-profile-profile-module").then(__webpack_require__.bind(null, /*! ./screens/screens-tabs/profile/profile.module */ "./src/app/screens/screens-tabs/profile/profile.module.ts")).then(m => m.ProfilePageModule),
        canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_3__["AuthGuard"]]
    },
    {
        path: 'documents',
        loadChildren: () => Promise.all(/*! import() | screens-screens-tabs-documents-documents-module */[__webpack_require__.e("default~screens-forms-other-documents-other-documents-module~screens-screens-tabs-documents-documents-module"), __webpack_require__.e("screens-screens-tabs-documents-documents-module")]).then(__webpack_require__.bind(null, /*! ./screens/screens-tabs/documents/documents.module */ "./src/app/screens/screens-tabs/documents/documents.module.ts")).then(m => m.DocumentsPageModule),
        canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_3__["AuthGuard"]]
    },
    {
        path: 'personal-information',
        loadChildren: () => __webpack_require__.e(/*! import() | screens-screens-tabs-personal-information-personal-information-module */ "screens-screens-tabs-personal-information-personal-information-module").then(__webpack_require__.bind(null, /*! ./screens/screens-tabs/personal-information/personal-information.module */ "./src/app/screens/screens-tabs/personal-information/personal-information.module.ts")).then(m => m.PersonalInformationPageModule)
    },
    {
        path: 'vehicle-information',
        loadChildren: () => Promise.all(/*! import() | screens-screens-tabs-vehicle-information-vehicle-information-module */[__webpack_require__.e("common"), __webpack_require__.e("screens-screens-tabs-vehicle-information-vehicle-information-module")]).then(__webpack_require__.bind(null, /*! ./screens/screens-tabs/vehicle-information/vehicle-information.module */ "./src/app/screens/screens-tabs/vehicle-information/vehicle-information.module.ts")).then(m => m.VehicleInformationPageModule)
    },
    {
        path: 'change-password',
        loadChildren: () => Promise.all(/*! import() | screens-screens-tabs-change-password-change-password-module */[__webpack_require__.e("common"), __webpack_require__.e("screens-screens-tabs-change-password-change-password-module")]).then(__webpack_require__.bind(null, /*! ./screens/screens-tabs/change-password/change-password.module */ "./src/app/screens/screens-tabs/change-password/change-password.module.ts")).then(m => m.ChangePasswordPageModule)
    },
    {
        path: 'view-detail',
        loadChildren: () => __webpack_require__.e(/*! import() | screens-forms-view-detail-view-detail-module */ "common").then(__webpack_require__.bind(null, /*! ./screens/forms/view-detail/view-detail.module */ "./src/app/screens/forms/view-detail/view-detail.module.ts")).then(m => m.ViewDetailPageModule)
    },
    {
        path: 'detail',
        loadChildren: () => __webpack_require__.e(/*! import() | screens-forms-detail-detail-module */ "screens-forms-detail-detail-module").then(__webpack_require__.bind(null, /*! .//screens/forms/detail/detail.module */ "./src/app/screens/forms/detail/detail.module.ts")).then(m => m.DetailPageModule)
    },
    {
        path: 'events',
        loadChildren: () => __webpack_require__.e(/*! import() | screens-forms-events-events-module */ "screens-forms-events-events-module").then(__webpack_require__.bind(null, /*! .//screens/forms/events/events.module */ "./src/app/screens/forms/events/events.module.ts")).then(m => m.EventsPageModule)
    },
    {
        path: 'map',
        loadChildren: () => __webpack_require__.e(/*! import() | screens-forms-map-map-module */ "screens-forms-map-map-module").then(__webpack_require__.bind(null, /*! .//screens/forms/map/map.module */ "./src/app/screens/forms/map/map.module.ts")).then(m => m.MapPageModule)
    },
    {
        path: 'image',
        loadChildren: () => __webpack_require__.e(/*! import() | screens-forms-image-image-module */ "screens-forms-image-image-module").then(__webpack_require__.bind(null, /*! .//screens/forms/image/image.module */ "./src/app/screens/forms/image/image.module.ts")).then(m => m.ImagePageModule)
    },
    {
        path: 'history',
        loadChildren: () => __webpack_require__.e(/*! import() | screens-screens-tabs-history-history-module */ "screens-screens-tabs-history-history-module").then(__webpack_require__.bind(null, /*! ./screens/screens-tabs/history/history.module */ "./src/app/screens/screens-tabs/history/history.module.ts")).then(m => m.HistoryPageModule)
    },
    {
        path: 'other-documents',
        loadChildren: () => Promise.all(/*! import() | screens-forms-other-documents-other-documents-module */[__webpack_require__.e("default~screens-forms-other-documents-other-documents-module~screens-screens-tabs-documents-documents-module"), __webpack_require__.e("screens-forms-other-documents-other-documents-module")]).then(__webpack_require__.bind(null, /*! .//screens/forms/other-documents/other-documents.module */ "./src/app/screens/forms/other-documents/other-documents.module.ts")).then(m => m.OtherDocumentsPageModule)
    },
    {
        path: 'about',
        loadChildren: () => __webpack_require__.e(/*! import() | screens-screens-tabs-about-about-module */ "screens-screens-tabs-about-about-module").then(__webpack_require__.bind(null, /*! ./screens/screens-tabs/about/about.module */ "./src/app/screens/screens-tabs/about/about.module.ts")).then(m => m.AboutPageModule)
    },
    {
        path: 'request-location-permission',
        loadChildren: () => Promise.all(/*! import() | screens-forms-request-location-permission-request-location-permission-module */[__webpack_require__.e("common"), __webpack_require__.e("screens-forms-request-location-permission-request-location-permission-module")]).then(__webpack_require__.bind(null, /*! ./screens/forms/request-location-permission/request-location-permission.module */ "./src/app/screens/forms/request-location-permission/request-location-permission.module.ts")).then(m => m.RequestLocationPermissionPageModule)
    },
    {
        path: 'liquidation',
        loadChildren: () => __webpack_require__.e(/*! import() | screens-screens-tabs-liquidation-liquidation-module */ "screens-screens-tabs-liquidation-liquidation-module").then(__webpack_require__.bind(null, /*! ./screens/screens-tabs/liquidation/liquidation.module */ "./src/app/screens/screens-tabs/liquidation/liquidation.module.ts")).then(m => m.LiquidationPageModule)
    },
];
let AppRoutingModule = class AppRoutingModule {
};
AppRoutingModule = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        imports: [
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterModule"].forRoot(routes, { preloadingStrategy: _angular_router__WEBPACK_IMPORTED_MODULE_2__["PreloadAllModules"] })
        ],
        exports: [_angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterModule"]]
    })
], AppRoutingModule);



/***/ }),

/***/ "./src/app/app.component.scss":
/*!************************************!*\
  !*** ./src/app/app.component.scss ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyJ9 */");

/***/ }),

/***/ "./src/app/app.component.ts":
/*!**********************************!*\
  !*** ./src/app/app.component.ts ***!
  \**********************************/
/*! exports provided: AppComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppComponent", function() { return AppComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js");
/* harmony import */ var _ionic_native_splash_screen_ngx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ionic-native/splash-screen/ngx */ "./node_modules/@ionic-native/splash-screen/__ivy_ngcc__/ngx/index.js");
/* harmony import */ var _ionic_native_status_bar_ngx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic-native/status-bar/ngx */ "./node_modules/@ionic-native/status-bar/__ivy_ngcc__/ngx/index.js");
/* harmony import */ var _services_fcm_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./services/fcm.service */ "./src/app/services/fcm.service.ts");
/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @capacitor/core */ "./node_modules/@capacitor/core/dist/esm/index.js");
/* harmony import */ var _services_background_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./services/background.service */ "./src/app/services/background.service.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _services_ui_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./services/ui.service */ "./src/app/services/ui.service.ts");











const { Network, LocalNotifications } = _capacitor_core__WEBPACK_IMPORTED_MODULE_6__["Plugins"];
let AppComponent = class AppComponent {
    constructor(platform, splashScreen, statusBar, fcm, background_mode, location, router, ui) {
        this.platform = platform;
        this.splashScreen = splashScreen;
        this.statusBar = statusBar;
        this.fcm = fcm;
        this.background_mode = background_mode;
        this.location = location;
        this.router = router;
        this.ui = ui;
        this.lastTimeBackPress = 0;
        this.timePeriodToExit = 2000;
        Network.addListener('networkStatusChange', (status) => {
            this.networkStatus = status;
            console.log("Network status changed", status);
            localStorage.setItem("network_status", JSON.stringify(status));
            if (status.connected) {
                // location.reload()
            }
        });
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
        this.toggleDarkTheme(prefersDark.matches);
        // Listen for changes to the prefers-color-scheme media query
        prefersDark.addListener((mediaQuery) => this.toggleDarkTheme(mediaQuery.matches));
        // Add or remove the "dark" class based on if the media query matches
        document.body.classList.toggle('dark', true);
        this.backButtonEvent();
        this.initializeNetwork();
        this.initializeApp();
    }
    toggleDarkTheme(shouldAdd) {
        console.log("shouldAdd", shouldAdd);
        document.body.classList.toggle('dark', shouldAdd);
    }
    backButtonEvent() {
        this.platform.backButton.subscribeWithPriority(0, () => {
            this.routerOutlets.forEach((outlet) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                console.log(`Url ${this.router.url}`);
                if (!this.router.url.includes('tabs/home')) {
                    // await this.router.navigate(['/']);
                    yield this.location.back();
                }
                else if (this.router.url.includes('tabs/home')) {
                    if (new Date().getTime() - this.lastTimeBackPress >= this.timePeriodToExit) {
                        this.lastTimeBackPress = new Date().getTime();
                        this.presentAlertConfirm();
                    }
                    else {
                        navigator['app'].exitApp();
                    }
                }
            }));
        });
    }
    presentAlertConfirm() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            this.ui.presentAlert({
                // header: 'Confirm!',
                message: 'Está seguro de querer salir de la app?',
                buttons: [{
                        text: 'Cancelar',
                        role: 'cancel',
                        cssClass: 'secondary',
                        handler: (blah) => { }
                    }, {
                        text: 'Cerrar Aplicación',
                        handler: () => {
                            navigator['app'].exitApp();
                        }
                    }]
            });
        });
    }
    initializeNetwork() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            this.networkStatus = yield Network.getStatus();
            localStorage.setItem("network_status", JSON.stringify(this.networkStatus));
            console.log("Network status ", this.networkStatus);
        });
    }
    initializeApp() {
        this.platform.ready().then(() => {
            this.statusBar.styleDefault();
            this.splashScreen.hide();
            this.fcm.initPush();
            //this.backgroundMode.enable();
        });
    }
};
AppComponent.ctorParameters = () => [
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["Platform"] },
    { type: _ionic_native_splash_screen_ngx__WEBPACK_IMPORTED_MODULE_3__["SplashScreen"] },
    { type: _ionic_native_status_bar_ngx__WEBPACK_IMPORTED_MODULE_4__["StatusBar"] },
    { type: _services_fcm_service__WEBPACK_IMPORTED_MODULE_5__["FcmService"] },
    { type: _services_background_service__WEBPACK_IMPORTED_MODULE_7__["BackgroundService"] },
    { type: _angular_common__WEBPACK_IMPORTED_MODULE_8__["Location"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_9__["Router"] },
    { type: _services_ui_service__WEBPACK_IMPORTED_MODULE_10__["UiService"] }
];
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChildren"])(_ionic_angular__WEBPACK_IMPORTED_MODULE_2__["IonRouterOutlet"])
], AppComponent.prototype, "routerOutlets", void 0);
AppComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-root',
        template: Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! raw-loader!./app.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html")).default,
        styles: [Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! ./app.component.scss */ "./src/app/app.component.scss")).default]
    })
], AppComponent);



/***/ }),

/***/ "./src/app/app.module.ts":
/*!*******************************!*\
  !*** ./src/app/app.module.ts ***!
  \*******************************/
/*! exports provided: AppModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppModule", function() { return AppModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/__ivy_ngcc__/fesm2015/platform-browser.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js");
/* harmony import */ var _ionic_native_splash_screen_ngx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ionic-native/splash-screen/ngx */ "./node_modules/@ionic-native/splash-screen/__ivy_ngcc__/ngx/index.js");
/* harmony import */ var _ionic_native_status_bar_ngx__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ionic-native/status-bar/ngx */ "./node_modules/@ionic-native/status-bar/__ivy_ngcc__/ngx/index.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/http.js");
/* harmony import */ var _app_routing_module__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./app-routing.module */ "./src/app/app-routing.module.ts");
/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./app.component */ "./src/app/app.component.ts");
/* harmony import */ var _angular_fire__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/fire */ "./node_modules/@angular/fire/__ivy_ngcc__/fesm2015/angular-fire.js");
/* harmony import */ var _angular_fire_auth__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/fire/auth */ "./node_modules/@angular/fire/__ivy_ngcc__/fesm2015/angular-fire-auth.js");
/* harmony import */ var src_environments_environment_prod__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! src/environments/environment.prod */ "./src/environments/environment.prod.ts");
/* harmony import */ var _modules_aplication_pipe_module_aplication_pipe_module_module__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./modules/aplication-pipe-module/aplication-pipe-module.module */ "./src/app/modules/aplication-pipe-module/aplication-pipe-module.module.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _modules_common_components_common_components_module__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./modules/common-components/common-components.module */ "./src/app/modules/common-components/common-components.module.ts");
/* harmony import */ var _angular_fire_database__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/fire/database */ "./node_modules/@angular/fire/__ivy_ngcc__/fesm2015/angular-fire-database.js");
/* harmony import */ var _angular_fire_storage__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/fire/storage */ "./node_modules/@angular/fire/__ivy_ngcc__/fesm2015/angular-fire-storage.js");
/* harmony import */ var _ionic_native_call_number_ngx__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @ionic-native/call-number/ngx */ "./node_modules/@ionic-native/call-number/__ivy_ngcc__/ngx/index.js");
/* harmony import */ var _ionic_native_foreground_service_ngx__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @ionic-native/foreground-service/ngx */ "./node_modules/@ionic-native/foreground-service/__ivy_ngcc__/ngx/index.js");
/* harmony import */ var _ionic_native_file_ngx__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @ionic-native/file/ngx */ "./node_modules/@ionic-native/file/__ivy_ngcc__/ngx/index.js");
/* harmony import */ var _ionic_native_file_transfer_ngx__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @ionic-native/file-transfer/ngx */ "./node_modules/@ionic-native/file-transfer/__ivy_ngcc__/ngx/index.js");
/* harmony import */ var _ionic_native_in_app_browser_ngx__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @ionic-native/in-app-browser/ngx */ "./node_modules/@ionic-native/in-app-browser/__ivy_ngcc__/ngx/index.js");
/* harmony import */ var _ionic_native_file_opener_ngx__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @ionic-native/file-opener/ngx */ "./node_modules/@ionic-native/file-opener/__ivy_ngcc__/ngx/index.js");
/* harmony import */ var _ionic_native_diagnostic_ngx__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @ionic-native/diagnostic/ngx */ "./node_modules/@ionic-native/diagnostic/__ivy_ngcc__/ngx/index.js");




















// import { BackgroundGeolocation } from '@ionic-native/background-geolocation/ngx';





let AppModule = class AppModule {
};
AppModule = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        declarations: [_app_component__WEBPACK_IMPORTED_MODULE_9__["AppComponent"],],
        entryComponents: [],
        imports: [
            _angular_fire__WEBPACK_IMPORTED_MODULE_10__["AngularFireModule"].initializeApp(src_environments_environment_prod__WEBPACK_IMPORTED_MODULE_12__["environment"].firebaseConfig),
            _angular_fire_auth__WEBPACK_IMPORTED_MODULE_11__["AngularFireAuthModule"],
            _angular_fire_database__WEBPACK_IMPORTED_MODULE_16__["AngularFireDatabaseModule"],
            _angular_fire_storage__WEBPACK_IMPORTED_MODULE_17__["AngularFireStorageModule"],
            _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__["BrowserModule"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["IonicModule"].forRoot(),
            _angular_forms__WEBPACK_IMPORTED_MODULE_14__["FormsModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_14__["ReactiveFormsModule"],
            _app_routing_module__WEBPACK_IMPORTED_MODULE_8__["AppRoutingModule"],
            _angular_common_http__WEBPACK_IMPORTED_MODULE_7__["HttpClientModule"],
            _modules_common_components_common_components_module__WEBPACK_IMPORTED_MODULE_15__["CommonComponentsModule"],
            _modules_aplication_pipe_module_aplication_pipe_module_module__WEBPACK_IMPORTED_MODULE_13__["AplicationPipeModuleModule"]
        ],
        providers: [
            _ionic_native_status_bar_ngx__WEBPACK_IMPORTED_MODULE_6__["StatusBar"],
            _ionic_native_splash_screen_ngx__WEBPACK_IMPORTED_MODULE_5__["SplashScreen"],
            { provide: _angular_router__WEBPACK_IMPORTED_MODULE_3__["RouteReuseStrategy"], useClass: _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["IonicRouteStrategy"] },
            _ionic_native_call_number_ngx__WEBPACK_IMPORTED_MODULE_18__["CallNumber"],
            _ionic_native_foreground_service_ngx__WEBPACK_IMPORTED_MODULE_19__["ForegroundService"],
            // BackgroundGeolocation,
            _ionic_native_file_ngx__WEBPACK_IMPORTED_MODULE_20__["File"],
            _ionic_native_file_transfer_ngx__WEBPACK_IMPORTED_MODULE_21__["FileTransfer"],
            _ionic_native_in_app_browser_ngx__WEBPACK_IMPORTED_MODULE_22__["InAppBrowser"],
            _ionic_native_file_opener_ngx__WEBPACK_IMPORTED_MODULE_23__["FileOpener"],
            _ionic_native_diagnostic_ngx__WEBPACK_IMPORTED_MODULE_24__["Diagnostic"]
        ],
        bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_9__["AppComponent"]]
    })
], AppModule);



/***/ }),

/***/ "./src/app/components/comment/comment.component.scss":
/*!***********************************************************!*\
  !*** ./src/app/components/comment/comment.component.scss ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY29tbWVudC9jb21tZW50LmNvbXBvbmVudC5zY3NzIn0= */");

/***/ }),

/***/ "./src/app/components/comment/comment.component.ts":
/*!*********************************************************!*\
  !*** ./src/app/components/comment/comment.component.ts ***!
  \*********************************************************/
/*! exports provided: CommentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CommentComponent", function() { return CommentComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var src_app_services_ui_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/app/services/ui.service */ "./src/app/services/ui.service.ts");
/* harmony import */ var src_app_services_request_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/services/request.service */ "./src/app/services/request.service.ts");
/* harmony import */ var src_app_services_auth_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! src/app/services/auth.service */ "./src/app/services/auth.service.ts");
/* harmony import */ var src_app_services_photo_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! src/app/services/photo.service */ "./src/app/services/photo.service.ts");
/* harmony import */ var src_app_services_network_status_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! src/app/services/network-status.service */ "./src/app/services/network-status.service.ts");








let CommentComponent = class CommentComponent {
    constructor(ui, request, auth, photo, network) {
        this.ui = ui;
        this.request = request;
        this.auth = auth;
        this.photo = photo;
        this.network = network;
        this.eventsUpdate = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.scroll = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.comment_data = new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormGroup"]({
            comment: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', [_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required]),
        });
        this.sending = '';
    }
    ngOnInit() {
        console.log("Detail", this.order);
    }
    uploadPhoto() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            try {
                if (this.network.getNetworkStatus().connected) {
                    yield (yield this.photo.selectImageSource());
                    this.photo.imageSubject.subscribe((image) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                        if (Object.keys(image).length > 0) {
                            const dat = new Date().getTime();
                            const name_file1 = `${dat}_${this.auth.user.id}.${image.format}`;
                            const blob_image = this.photo.dataUrlToBlob(image.dataUrl);
                            const image_to_upload = this.photo.getFileImage(image.dataUrl, name_file1, image.format);
                            const item = this.order.details.find(d => d.status != 25);
                            const id = item.id;
                            this.events.push({
                                order_detail_id: id,
                                description: "Foto " + item.address,
                                photo: image.dataUrl,
                                sending: false
                            });
                            this.updateEvents();
                            this.scroll.emit();
                            this.sending = 'yes';
                            const { comment } = this.comment_data.value;
                            const data = new FormData();
                            const latitude = localStorage.getItem("latitude");
                            const longitude = localStorage.getItem("longitude");
                            data.append("order_detail_id", id);
                            data.append("latitude", latitude.toString());
                            data.append("longitude", longitude.toString());
                            data.append("description", "Foto " + item.address);
                            data.append("user_id", this.auth.user.id.toString());
                            data.append('photo', blob_image);
                            this.request.post('driver/register_event', data)
                                .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                this.events[this.events.length - 1].sending = true;
                                this.updateEvents();
                                this.sending = undefined;
                            }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                this.events.pop();
                                this.updateEvents();
                                yield this.ui.presentAlert({
                                    mode: 'ios',
                                    header: 'No se ha podido subir la imagen',
                                    buttons: [
                                        {
                                            text: 'Aceptar',
                                            role: 'cancel',
                                            cssClass: 'secondary',
                                            handler: (blah) => {
                                            }
                                        },
                                    ]
                                });
                                console.log("Error", err);
                                this.sending = undefined;
                            }));
                        }
                    }));
                }
                else {
                    this.ui.showToast("Verifique su conexión");
                }
            }
            catch (err) {
                yield this.ui.presentAlert({
                    mode: 'ios',
                    header: 'No se ha podido subir la imagen',
                    buttons: [
                        {
                            text: 'Aceptar',
                            role: 'cancel',
                            cssClass: 'secondary',
                            handler: (blah) => {
                            }
                        },
                    ]
                });
                console.log("Error", err);
            }
        });
    }
    get controls() {
        return this.comment_data.controls;
    }
    updateEvents() {
        this.eventsUpdate.emit(this.events);
    }
    save() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            if (this.network.getNetworkStatus().connected) {
                const id = this.order.details.find(d => d.status != 25).id;
                const { comment } = this.comment_data.value;
                this.events.push({
                    order_detail_id: id,
                    description: comment,
                    sending: false
                });
                this.comment_data.reset();
                this.sending = 'yes';
                this.updateEvents();
                this.scroll.emit();
                // const coordinates = await Geolocation.getCurrentPosition();
                // const {
                //   latitude,
                //   longitude
                // } = coordinates.coords;
                const data = new FormData();
                const latitude = localStorage.getItem("latitude");
                const longitude = localStorage.getItem("longitude");
                data.append("order_detail_id", id);
                data.append("latitude", latitude.toString());
                data.append("longitude", longitude.toString());
                data.append("description", comment);
                data.append("user_id", this.auth.user.id.toString());
                this.request.post('driver/register_event', data)
                    .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                    this.events[this.events.length - 1].sending = true;
                    this.updateEvents();
                    this.scroll.emit();
                    this.comment_data.reset();
                    this.sending = undefined;
                }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                    console.log("Error", err);
                    this.events.pop();
                    this.updateEvents();
                    this.sending = undefined;
                    this.ui.showToast("No se ha podido enviar el comentario");
                }));
            }
            else {
                this.ui.showToast("Verifique su conexión");
            }
        });
    }
};
CommentComponent.ctorParameters = () => [
    { type: src_app_services_ui_service__WEBPACK_IMPORTED_MODULE_3__["UiService"] },
    { type: src_app_services_request_service__WEBPACK_IMPORTED_MODULE_4__["RequestService"] },
    { type: src_app_services_auth_service__WEBPACK_IMPORTED_MODULE_5__["AuthService"] },
    { type: src_app_services_photo_service__WEBPACK_IMPORTED_MODULE_6__["PhotoService"] },
    { type: src_app_services_network_status_service__WEBPACK_IMPORTED_MODULE_7__["NetworkStatusService"] }
];
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], CommentComponent.prototype, "order", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], CommentComponent.prototype, "events", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], CommentComponent.prototype, "longitude", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], CommentComponent.prototype, "latitude", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()
], CommentComponent.prototype, "eventsUpdate", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()
], CommentComponent.prototype, "scroll", void 0);
CommentComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'comment',
        template: Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! raw-loader!./comment.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/components/comment/comment.component.html")).default,
        styles: [Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! ./comment.component.scss */ "./src/app/components/comment/comment.component.scss")).default]
    })
], CommentComponent);



/***/ }),

/***/ "./src/app/components/order-card/order-card.component.scss":
/*!*****************************************************************!*\
  !*** ./src/app/components/order-card/order-card.component.scss ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvb3JkZXItY2FyZC9vcmRlci1jYXJkLmNvbXBvbmVudC5zY3NzIn0= */");

/***/ }),

/***/ "./src/app/components/order-card/order-card.component.ts":
/*!***************************************************************!*\
  !*** ./src/app/components/order-card/order-card.component.ts ***!
  \***************************************************************/
/*! exports provided: OrderCardComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OrderCardComponent", function() { return OrderCardComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var src_app_services_realtime_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/realtime.service */ "./src/app/services/realtime.service.ts");
/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @capacitor/core */ "./node_modules/@capacitor/core/dist/esm/index.js");
/* harmony import */ var src_app_services_request_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/services/request.service */ "./src/app/services/request.service.ts");
/* harmony import */ var src_app_services_auth_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! src/app/services/auth.service */ "./src/app/services/auth.service.ts");
/* harmony import */ var src_app_services_ui_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! src/app/services/ui.service */ "./src/app/services/ui.service.ts");
/* harmony import */ var src_app_services_network_status_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! src/app/services/network-status.service */ "./src/app/services/network-status.service.ts");
/* harmony import */ var src_app_services_days_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! src/app/services/days.service */ "./src/app/services/days.service.ts");
/* harmony import */ var src_app_services_place_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! src/app/services/place.service */ "./src/app/services/place.service.ts");
/* harmony import */ var src_app_screens_forms_view_detail_view_detail_page__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! src/app/screens/forms/view-detail/view-detail.page */ "./src/app/screens/forms/view-detail/view-detail.page.ts");
/* harmony import */ var src_environments_environment_prod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! src/environments/environment.prod */ "./src/environments/environment.prod.ts");
/* harmony import */ var src_app_services_geolocation_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! src/app/services/geolocation.service */ "./src/app/services/geolocation.service.ts");













const { Geolocation, Haptics, Modals, LocalNotifications } = _capacitor_core__WEBPACK_IMPORTED_MODULE_3__["Plugins"];
let OrderCardComponent = class OrderCardComponent {
    constructor(realtime, request, auth, ui, network, days, place, geolocation) {
        this.realtime = realtime;
        this.request = request;
        this.auth = auth;
        this.ui = ui;
        this.network = network;
        this.days = days;
        this.place = place;
        this.geolocation = geolocation;
        this.near = true;
        this.spinner = false;
        this.orders = [];
        this.otherOrders = [];
    }
    ngOnInit() {
        this.near = this.near == "true" ? true : false;
    }
    reject(order) {
        this.orders = this.orders.filter(o => o.id != order.id);
        console.log("Orders", this.orders);
        this.realtime.getMassivesOrders().update({
            new_order: 0
        });
        this.auth.person.ordersNearYou = this.orders;
        this.auth.setPerson(this.auth.person);
    }
    accept(order) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const loader = yield this.ui.loading("Por favor espere...");
            try {
                let latitude;
                let longitude;
                if (localStorage.getItem("latitude") && localStorage.getItem("longitude")) {
                    latitude = localStorage.getItem("latitude");
                    longitude = localStorage.getItem("longitude");
                }
                else {
                    const position = yield Geolocation.getCurrentPosition({
                    // enableHighAccuracy: true
                    });
                    latitude = position.coords.latitude;
                    longitude = position.coords.longitude;
                }
                const data = new FormData();
                data.append("order_id", order.id);
                data.append("latitude", latitude.toString());
                data.append("longitude", longitude.toString());
                data.append("description", "Orden aceptada");
                data.append("user_id", this.auth.user.id.toString());
                this.request.post("driver/accept_near_order", data)
                    .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                    (yield loader).dismiss();
                    this.realtime.getNewOrder().update({
                        proximity: 1
                    });
                    let details = order.details ? order.details : order.detail;
                    details = details.map(d => {
                        return Object.assign(Object.assign({}, d), { status: 24 });
                    });
                    order.details = details;
                    details.forEach(detail => {
                        this.realtime.getFirebaseCollection(`order_detail_report/${order.id}/${detail.id}`)
                            .update(Object.assign(Object.assign({}, detail), { status: 24 }));
                    });
                    this.orders = this.orders.filter(o => o.id != order.id);
                    this.auth.person.ordersNearYou = this.orders;
                    this.auth.setPerson(this.auth.person);
                    this.otherOrders.unshift(order);
                    this.viewDetail(order);
                }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                    (yield loader).dismiss();
                    console.log("ddsd", err);
                    if (err.error.messages) {
                        yield this.ui.presentAlert({
                            mode: 'ios',
                            header: 'No se ha podido iniciar el servicio',
                            message: err.error.messages[0],
                            buttons: [
                                {
                                    text: 'Aceptar',
                                    role: 'cancel',
                                    cssClass: 'secondary',
                                    handler: (blah) => {
                                    }
                                },
                            ]
                        });
                    }
                }));
            }
            catch (e) {
                (yield loader).dismiss();
                this.ui.presentAlert({
                    mode: 'ios',
                    header: "Advertencia",
                    message: "Su ubicación no está disponible, por favor verificar el estado del GPS",
                    buttons: [
                        {
                            text: 'Aceptar',
                            cssClass: 'secondary',
                            handler: (res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                            })
                        }
                    ]
                });
            }
        });
    }
    isAboutToEnd(item) {
        return item.details.every(d => d.status == 25 || d.status == 48);
    }
    isOrderActive(order) {
        //Validate if the order is currently active
        const date_service = new Date(order.date);
        const today = new Date();
        const today_date = {
            day: today.getDate(),
            month: today.getMonth() + 1,
            year: today.getFullYear()
        };
        const date_split = order.date.split("-");
        const date_service_date = {
            day: Number(date_split[2]),
            month: Number(date_split[1]),
            year: Number(date_split[0])
        };
        const isToday = Object.keys(today_date).every(key => {
            return (today_date[key] == date_service_date[key]);
        });
        if (isToday) {
            if (order.service_type_id == 3) {
                const details = order.detail ? order.detail : order.details;
                const start_time = order.detail ? order.detail[0].start_time_military_format : order.details[0].start_time_military_format;
                console.log("Start time difference", start_time);
                const now = new Date();
                const now_hour = now.getHours() + ":" + now.getMinutes();
                const start_time_split = start_time.split(" ");
                const start_time_value = start_time_split.length > 1 ? start_time_split[1] : start_time_split[0];
                const differenceInHours = this.days.getHourDiff(start_time_value, now_hour);
                console.log("Difference", differenceInHours);
                const id = Math.round(Math.random() * 100);
                /**
                 * This validation calculate the difference and its
                 * true when current time is  after the start_time
                 */
                if (differenceInHours >= 0) {
                    return { active: true, message: "" };
                }
                else {
                    return { active: false, message: "Debe estar en la dirección en el horario establecido" };
                }
            }
            else {
                return { active: true, message: "" };
            }
        }
        else {
            return { active: false, message: "El día del servicio ha pasado " };
        }
    }
    viewDetail(order, massive = false) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            console.log("Order", order);
            if (this.network.getNetworkStatus().connected) {
                if (!massive) {
                    if (this.auth.user.available != 0) {
                        //Validate the isn't about to end 
                        /**
                         * The order is about to end
                         * When All the status from order details are finished or not effective
                         */
                        if (!this.isAboutToEnd(order)) {
                            if (order.status_order == 22 || order.status_order == 23) {
                                if (order.service_type_id == 3) {
                                    //Validate if the order is currently active
                                    const { message, active } = yield this.isOrderActive(order);
                                    if (active) {
                                        // this.stopPosition();
                                        const loader = yield this.ui.loading("Obteniendo ubicación...");
                                        try {
                                            //Validate if te user is near to the address
                                            this.geolocation.getCurrentPosition()
                                                .then((data) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                (yield loader).dismiss();
                                                const current_latitude = data.coords.latitude;
                                                const current_longitude = data.coords.longitude;
                                                const latitude = order.details[0].latitude;
                                                const longitude = order.details[0].longitude;
                                                const distance = this.place.calcCrow(latitude, longitude, current_latitude, current_longitude);
                                                console.log("Distance", distance);
                                                if (distance <= 1) {
                                                    console.log("Está ahí");
                                                    yield this.ui.presentAlert({
                                                        mode: 'ios',
                                                        header: '¿Quieres iniciar el viaje?',
                                                        buttons: [
                                                            {
                                                                text: 'No',
                                                                role: 'cancel',
                                                                cssClass: 'secondary',
                                                                handler: (blah) => {
                                                                    console.log('Confirm Cancel: blah');
                                                                }
                                                            }, {
                                                                text: 'Sí',
                                                                handler: () => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                                    this.realtime.getFirebaseCollectionObject(`order_gps/${order.id}/${this.auth.user.id}`)
                                                                        .set({
                                                                        order: order.id,
                                                                        key: this.auth.user.id,
                                                                        vehicleId: this.auth.vehicles.id,
                                                                        lat: current_latitude,
                                                                        lng: current_longitude,
                                                                        oldLat: current_latitude,
                                                                        oldLng: current_longitude,
                                                                        angle: 0,
                                                                        // last_active: Date.now(),
                                                                        code: src_environments_environment_prod__WEBPACK_IMPORTED_MODULE_11__["environment"].VERSION_NAME
                                                                    });
                                                                    localStorage.setItem("current_order", JSON.stringify(order));
                                                                    const modal = yield this.ui.presentModal(src_app_screens_forms_view_detail_view_detail_page__WEBPACK_IMPORTED_MODULE_10__["ViewDetailPage"], { order }, 'custom-modal');
                                                                    modal.onDidDismiss().then((data) => {
                                                                        this.loadData();
                                                                    });
                                                                })
                                                            }
                                                        ]
                                                    });
                                                }
                                                else {
                                                    yield this.ui.presentAlert({
                                                        mode: 'ios',
                                                        header: 'Advertencia',
                                                        message: 'Debe estar en el punto para iniciar el servicio',
                                                        buttons: [
                                                            {
                                                                text: 'Aceptar',
                                                                role: 'cancel',
                                                                cssClass: 'secondary',
                                                                handler: (blah) => {
                                                                    console.log('Confirm Cancel: blah');
                                                                }
                                                            }
                                                        ]
                                                    });
                                                }
                                            })).catch((e) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                (yield loader).dismiss();
                                            }));
                                        }
                                        catch (e) {
                                            (yield loader).dismiss();
                                            console.log("Error", e);
                                        }
                                    }
                                    else {
                                        yield this.ui.presentAlert({
                                            mode: 'ios',
                                            header: 'Advertencia',
                                            message,
                                            buttons: [
                                                {
                                                    text: 'Aceptar',
                                                    role: 'cancel',
                                                    cssClass: 'secondary',
                                                    handler: (blah) => {
                                                        console.log('Confirm Cancel: blah');
                                                    }
                                                }
                                            ]
                                        });
                                    }
                                }
                                else {
                                    const current_latitude = parseFloat(localStorage.getItem("latitude"));
                                    const current_longitude = parseFloat(localStorage.getItem("longitude"));
                                    this.realtime.getFirebaseCollectionObject(`order_gps/${order.id}/${this.auth.user.id}`)
                                        .set({
                                        order: order.id,
                                        key: this.auth.user.id,
                                        vehicleId: this.auth.vehicles.id,
                                        lat: current_latitude,
                                        lng: current_longitude,
                                        oldLat: current_latitude,
                                        oldLng: current_longitude,
                                        angle: 0,
                                        // last_active: Date.now(),
                                        code: src_environments_environment_prod__WEBPACK_IMPORTED_MODULE_11__["environment"].VERSION_NAME
                                    });
                                    localStorage.setItem("current_order", JSON.stringify(order));
                                    const modal = yield this.ui.presentModal(src_app_screens_forms_view_detail_view_detail_page__WEBPACK_IMPORTED_MODULE_10__["ViewDetailPage"], { order, latLng: this.latLng }, 'custom-modal');
                                    modal.onDidDismiss().then((data) => {
                                        this.loadData();
                                    });
                                }
                            }
                            else {
                                //Validate if the order status isn´t end or not effective or cancelled or cancelled by the delivery
                                if (order.status_order != 25 && order.status_order != 48 && order.status_order != 31 && order.status_order != 36 && !this.isAboutToEnd(order)) {
                                    //When I'll load the order, I  could update the proximity with it current value on the SQL database
                                    this.realtime.getNewOrder().update({
                                        proximity: order.proximity
                                    });
                                    localStorage.setItem("current_order", JSON.stringify(order));
                                    const modal = yield this.ui.presentModal(src_app_screens_forms_view_detail_view_detail_page__WEBPACK_IMPORTED_MODULE_10__["ViewDetailPage"], { order, latLng: this.latLng }, 'custom-modal');
                                    modal.onDidDismiss().then(r => {
                                        localStorage.removeItem("current_order");
                                        this.loadData();
                                    });
                                }
                            }
                        }
                    }
                    else {
                        this.ui.showToast("Debe estar disponible");
                    }
                }
            }
            else {
                this.ui.showToast("Por favor, verifique su conexión");
            }
        });
    }
    filter() {
        const orders = this.orders.filter(a => a.status_order != 25).sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());
        return orders;
    }
    loadData() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            if (this.network.getNetworkStatus().connected) {
                this.spinner = true;
                let loader;
                if (!localStorage.getItem("current_order")) {
                    loader = yield this.ui.loading("Por favor espere...");
                }
                this.orders = [];
                this.request.get(`driver/list_current_orders/${this.auth.user.id}`)
                    .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                    this.spinner = false;
                    this.orders = res.data.data;
                    console.log("Orders", this.orders);
                    if (loader) {
                        (yield loader).dismiss();
                    }
                }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                    if (loader) {
                        (yield loader).dismiss();
                    }
                    this.spinner = false;
                }));
            }
            else {
                this.ui.showToast("Verifique su conexión");
            }
        });
    }
};
OrderCardComponent.ctorParameters = () => [
    { type: src_app_services_realtime_service__WEBPACK_IMPORTED_MODULE_2__["RealtimeService"] },
    { type: src_app_services_request_service__WEBPACK_IMPORTED_MODULE_4__["RequestService"] },
    { type: src_app_services_auth_service__WEBPACK_IMPORTED_MODULE_5__["AuthService"] },
    { type: src_app_services_ui_service__WEBPACK_IMPORTED_MODULE_6__["UiService"] },
    { type: src_app_services_network_status_service__WEBPACK_IMPORTED_MODULE_7__["NetworkStatusService"] },
    { type: src_app_services_days_service__WEBPACK_IMPORTED_MODULE_8__["DaysService"] },
    { type: src_app_services_place_service__WEBPACK_IMPORTED_MODULE_9__["PlaceService"] },
    { type: src_app_services_geolocation_service__WEBPACK_IMPORTED_MODULE_12__["GeolocationService"] }
];
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], OrderCardComponent.prototype, "near", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], OrderCardComponent.prototype, "available", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], OrderCardComponent.prototype, "title", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], OrderCardComponent.prototype, "spinner", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], OrderCardComponent.prototype, "orders", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], OrderCardComponent.prototype, "otherOrders", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], OrderCardComponent.prototype, "latLng", void 0);
OrderCardComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-order-card',
        template: Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! raw-loader!./order-card.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/components/order-card/order-card.component.html")).default,
        styles: [Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! ./order-card.component.scss */ "./src/app/components/order-card/order-card.component.scss")).default]
    })
], OrderCardComponent);



/***/ }),

/***/ "./src/app/components/order/order.component.scss":
/*!*******************************************************!*\
  !*** ./src/app/components/order/order.component.scss ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvb3JkZXIvb3JkZXIuY29tcG9uZW50LnNjc3MifQ== */");

/***/ }),

/***/ "./src/app/components/order/order.component.ts":
/*!*****************************************************!*\
  !*** ./src/app/components/order/order.component.ts ***!
  \*****************************************************/
/*! exports provided: OrderComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OrderComponent", function() { return OrderComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");


let OrderComponent = class OrderComponent {
    constructor() { }
    ngOnInit() {
        if (typeof this.show == "undefined") {
            this.show = true;
        }
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], OrderComponent.prototype, "order", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], OrderComponent.prototype, "show", void 0);
OrderComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-order',
        template: Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! raw-loader!./order.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/components/order/order.component.html")).default,
        styles: [Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! ./order.component.scss */ "./src/app/components/order/order.component.scss")).default]
    })
], OrderComponent);



/***/ }),

/***/ "./src/app/guards/auth.guard.ts":
/*!**************************************!*\
  !*** ./src/app/guards/auth.guard.ts ***!
  \**************************************/
/*! exports provided: AuthGuard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthGuard", function() { return AuthGuard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _services_auth_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/auth.service */ "./src/app/services/auth.service.ts");




let AuthGuard = class AuthGuard {
    constructor(router, auth) {
        this.router = router;
        this.auth = auth;
    }
    canActivate(next, state) {
        let isLoggedIn = localStorage.getItem('isLoggedIn');
        if (isLoggedIn != 'si') {
            this.router.navigate(['/login']);
            return false;
        }
        else {
            this.auth.setData();
            return true;
        }
    }
};
AuthGuard.ctorParameters = () => [
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] },
    { type: _services_auth_service__WEBPACK_IMPORTED_MODULE_3__["AuthService"] }
];
AuthGuard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    })
], AuthGuard);



/***/ }),

/***/ "./src/app/modules/aplication-pipe-module/aplication-pipe-module.module.ts":
/*!*********************************************************************************!*\
  !*** ./src/app/modules/aplication-pipe-module/aplication-pipe-module.module.ts ***!
  \*********************************************************************************/
/*! exports provided: AplicationPipeModuleModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AplicationPipeModuleModule", function() { return AplicationPipeModuleModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _pipes_date_local_pipe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../pipes/date-local.pipe */ "./src/app/pipes/date-local.pipe.ts");
/* harmony import */ var src_app_pipes_wrap_name_pipe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/pipes/wrap-name.pipe */ "./src/app/pipes/wrap-name.pipe.ts");





let AplicationPipeModuleModule = class AplicationPipeModuleModule {
};
AplicationPipeModuleModule = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        declarations: [_pipes_date_local_pipe__WEBPACK_IMPORTED_MODULE_3__["DateLocalPipe"], src_app_pipes_wrap_name_pipe__WEBPACK_IMPORTED_MODULE_4__["WrapNamePipe"]],
        imports: [
            _angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"]
        ],
        exports: [
            _pipes_date_local_pipe__WEBPACK_IMPORTED_MODULE_3__["DateLocalPipe"], src_app_pipes_wrap_name_pipe__WEBPACK_IMPORTED_MODULE_4__["WrapNamePipe"]
        ]
    })
], AplicationPipeModuleModule);



/***/ }),

/***/ "./src/app/modules/common-components/common-components.module.ts":
/*!***********************************************************************!*\
  !*** ./src/app/modules/common-components/common-components.module.ts ***!
  \***********************************************************************/
/*! exports provided: CommonComponentsModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CommonComponentsModule", function() { return CommonComponentsModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var src_app_components_order_order_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/app/components/order/order.component */ "./src/app/components/order/order.component.ts");
/* harmony import */ var src_app_components_comment_comment_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/components/comment/comment.component */ "./src/app/components/comment/comment.component.ts");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js");
/* harmony import */ var _aplication_pipe_module_aplication_pipe_module_module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../aplication-pipe-module/aplication-pipe-module.module */ "./src/app/modules/aplication-pipe-module/aplication-pipe-module.module.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var src_app_components_order_card_order_card_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! src/app/components/order-card/order-card.component */ "./src/app/components/order-card/order-card.component.ts");









let CommonComponentsModule = class CommonComponentsModule {
};
CommonComponentsModule = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        declarations: [src_app_components_order_order_component__WEBPACK_IMPORTED_MODULE_3__["OrderComponent"], src_app_components_comment_comment_component__WEBPACK_IMPORTED_MODULE_4__["CommentComponent"], src_app_components_order_card_order_card_component__WEBPACK_IMPORTED_MODULE_8__["OrderCardComponent"]],
        imports: [
            _angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_7__["FormsModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_7__["ReactiveFormsModule"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_5__["IonicModule"],
            _aplication_pipe_module_aplication_pipe_module_module__WEBPACK_IMPORTED_MODULE_6__["AplicationPipeModuleModule"]
        ],
        exports: [src_app_components_order_order_component__WEBPACK_IMPORTED_MODULE_3__["OrderComponent"], src_app_components_comment_comment_component__WEBPACK_IMPORTED_MODULE_4__["CommentComponent"], src_app_components_order_card_order_card_component__WEBPACK_IMPORTED_MODULE_8__["OrderCardComponent"]],
    })
], CommonComponentsModule);



/***/ }),

/***/ "./src/app/pipes/date-local.pipe.ts":
/*!******************************************!*\
  !*** ./src/app/pipes/date-local.pipe.ts ***!
  \******************************************/
/*! exports provided: DateLocalPipe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DateLocalPipe", function() { return DateLocalPipe; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");


let DateLocalPipe = class DateLocalPipe {
    transform(value, format) {
        let countDownDate = new Date(value);
        if (!format) {
            const lang = navigator.language;
            const monthName = countDownDate.toLocaleString(lang, {
                month: 'long'
            });
            const dayName = countDownDate.toLocaleString(lang, {
                weekday: 'long'
            });
            return `${monthName} ${(countDownDate.getDate() + 1)}, ${countDownDate.getFullYear()} `;
        }
        else {
            if (format == 'hour') {
                return `${countDownDate.getHours()}: ${countDownDate.getMinutes()}  `;
            }
            return '';
        }
    }
};
DateLocalPipe = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Pipe"])({
        name: 'dateLocal'
    })
], DateLocalPipe);



/***/ }),

/***/ "./src/app/pipes/wrap-name.pipe.ts":
/*!*****************************************!*\
  !*** ./src/app/pipes/wrap-name.pipe.ts ***!
  \*****************************************/
/*! exports provided: WrapNamePipe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WrapNamePipe", function() { return WrapNamePipe; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");


let WrapNamePipe = class WrapNamePipe {
    transform(value, max) {
        if (value.length > max) {
            return value.slice(0, max) + ".";
        }
        return value;
    }
};
WrapNamePipe = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Pipe"])({
        name: 'wrapName'
    })
], WrapNamePipe);



/***/ }),

/***/ "./src/app/screens/forms/events/events.page.scss":
/*!*******************************************************!*\
  !*** ./src/app/screens/forms/events/events.page.scss ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NjcmVlbnMvZm9ybXMvZXZlbnRzL2V2ZW50cy5wYWdlLnNjc3MifQ== */");

/***/ }),

/***/ "./src/app/screens/forms/events/events.page.ts":
/*!*****************************************************!*\
  !*** ./src/app/screens/forms/events/events.page.ts ***!
  \*****************************************************/
/*! exports provided: EventsPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventsPage", function() { return EventsPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var src_app_services_ui_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/ui.service */ "./src/app/services/ui.service.ts");
/* harmony import */ var src_app_services_photo_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/app/services/photo.service */ "./src/app/services/photo.service.ts");
/* harmony import */ var src_app_services_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/services/auth.service */ "./src/app/services/auth.service.ts");
/* harmony import */ var src_app_services_request_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! src/app/services/request.service */ "./src/app/services/request.service.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _map_map_page__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../map/map.page */ "./src/app/screens/forms/map/map.page.ts");
/* harmony import */ var _image_image_page__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../image/image.page */ "./src/app/screens/forms/image/image.page.ts");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js");
/* harmony import */ var src_app_services_network_status_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! src/app/services/network-status.service */ "./src/app/services/network-status.service.ts");












let EventsPage = class EventsPage {
    constructor(ui, photo, auth, request, fb, router, network) {
        this.ui = ui;
        this.photo = photo;
        this.auth = auth;
        this.request = request;
        this.fb = fb;
        this.router = router;
        this.network = network;
        this.personal_information = this.fb.group({
            comment: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_6__["Validators"].required],
        });
        this.image = {
            url: "assets/imgs/img-default.jpg",
            format: "",
        };
        this.events = [];
    }
    get controls() {
        return this.personal_information.controls;
    }
    ionViewWillEnter() {
        if (this.network.getNetworkStatus().connected) {
            const loader = this.ui.loading("Por favor espere...");
            this.request
                .get(`driver/events_per_driver/${this.order.id}/${this.auth.user.id}`)
                .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                (yield loader).dismiss();
                this.events = res.data;
                this.events = this.events.map(e => {
                    return Object.assign(Object.assign({}, e), { sending: true });
                });
                console.log("Events", res.data);
                this.scrollToBottom();
            }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                (yield loader).dismiss();
                yield this.ui.presentAlert({
                    mode: 'ios',
                    header: 'No se ha podido cargar las eventualidades',
                    buttons: [
                        {
                            text: 'Aceptar',
                            role: 'cancel',
                            cssClass: 'secondary',
                            handler: (blah) => {
                            }
                        },
                    ]
                });
                console.log("Error", err);
            }));
        }
        else {
            this.ui.showToast("Verifique su conexión", () => {
                this.dismiss();
            });
        }
    }
    ngOnInit() {
    }
    // ngAfterViewChecked() {
    //   this.scrollToBottom();
    // }
    scrollToBottom() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            try {
                console.log("Scrolling...");
                yield this.myContent.scrollToBottom(100);
            }
            catch (err) { }
        });
    }
    viewMap(detail) {
        const modal = this.ui.presentModal(_map_map_page__WEBPACK_IMPORTED_MODULE_8__["MapPage"], { detail });
    }
    viewImage(image) {
        const modal = this.ui.presentModal(_image_image_page__WEBPACK_IMPORTED_MODULE_9__["ImagePage"], { image });
    }
    dismiss() {
        this.ui.dismiss();
    }
    save() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const { comment } = this.personal_information.value;
            const data = new FormData();
            const detail = this.order.details.find(d => d.status == 24);
            data.append("order_detail_id", detail.id);
            data.append("latitude", this.latitude.toString());
            data.append("longitude", this.longitude.toString());
            data.append("description", comment);
            if (this.image.url != "assets/imgs/img-default.jpg") {
                const dat = new Date().getTime();
                yield this.ui.presentAlert({
                    mode: 'ios',
                    header: 'Imagen',
                    buttons: [
                        {
                            text: 'Aceptar',
                            role: 'cancel',
                            cssClass: 'secondary',
                            handler: (blah) => {
                            }
                        },
                    ]
                });
                const name_file1 = `${dat}_${this.auth.user.id}.${this.image.format}`;
                const blob_image = this.photo.dataUrlToBlob(this.image.url);
                const image_to_upload = this.photo.getFileImage(this.image.url, name_file1, this.image.format);
                data.append('photo', blob_image);
            }
            data.append("user_id", this.auth.user.id.toString());
            const loader = this.ui.loading("Por favor espere...");
            this.request.post('driver/register_event', data)
                .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                (yield loader).dismiss();
                this.ui.showToast("Eventualidad registrada", () => {
                    this.dismiss();
                });
            }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                console.log("Error", err);
                this.ui.showToast("Ha ocurrido un error");
            }));
        });
    }
};
EventsPage.ctorParameters = () => [
    { type: src_app_services_ui_service__WEBPACK_IMPORTED_MODULE_2__["UiService"] },
    { type: src_app_services_photo_service__WEBPACK_IMPORTED_MODULE_3__["PhotoService"] },
    { type: src_app_services_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] },
    { type: src_app_services_request_service__WEBPACK_IMPORTED_MODULE_5__["RequestService"] },
    { type: _angular_forms__WEBPACK_IMPORTED_MODULE_6__["FormBuilder"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_7__["Router"] },
    { type: src_app_services_network_status_service__WEBPACK_IMPORTED_MODULE_11__["NetworkStatusService"] }
];
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], EventsPage.prototype, "order", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])(_ionic_angular__WEBPACK_IMPORTED_MODULE_10__["IonContent"], { read: _ionic_angular__WEBPACK_IMPORTED_MODULE_10__["IonContent"], static: false })
], EventsPage.prototype, "myContent", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], EventsPage.prototype, "longitude", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], EventsPage.prototype, "latitude", void 0);
EventsPage = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-events',
        template: Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! raw-loader!./events.page.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/screens/forms/events/events.page.html")).default,
        styles: [Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! ./events.page.scss */ "./src/app/screens/forms/events/events.page.scss")).default]
    })
], EventsPage);



/***/ }),

/***/ "./src/app/screens/forms/image/image.page.scss":
/*!*****************************************************!*\
  !*** ./src/app/screens/forms/image/image.page.scss ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("::ng-deep .custom-img ion-img img {\n  width: 100%;\n  height: 100%;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXNwcmlsbGEvRG9jdW1lbnRvc01pZ3VlbC9Qcm95ZWN0b3MvemFwcC96YXBwLWRyaXZlci1hcHAtcnBlbmFsb3phL3NyYy9hcHAvc2NyZWVucy9mb3Jtcy9pbWFnZS9pbWFnZS5wYWdlLnNjc3MiLCJzcmMvYXBwL3NjcmVlbnMvZm9ybXMvaW1hZ2UvaW1hZ2UucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNJO0VBQ0ksV0FBQTtFQUNBLFlBQUE7QUNBUiIsImZpbGUiOiJzcmMvYXBwL3NjcmVlbnMvZm9ybXMvaW1hZ2UvaW1hZ2UucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOjpuZy1kZWVwe1xuICAgIC5jdXN0b20taW1nIGlvbi1pbWcgaW1ne1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgIH1cbn0iLCI6Om5nLWRlZXAgLmN1c3RvbS1pbWcgaW9uLWltZyBpbWcge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xufSJdfQ== */");

/***/ }),

/***/ "./src/app/screens/forms/image/image.page.ts":
/*!***************************************************!*\
  !*** ./src/app/screens/forms/image/image.page.ts ***!
  \***************************************************/
/*! exports provided: ImagePage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImagePage", function() { return ImagePage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var src_app_services_ui_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/ui.service */ "./src/app/services/ui.service.ts");



let ImagePage = class ImagePage {
    constructor(ui) {
        this.ui = ui;
    }
    ngOnInit() {
    }
    dismiss() {
        this.ui.dismiss();
    }
};
ImagePage.ctorParameters = () => [
    { type: src_app_services_ui_service__WEBPACK_IMPORTED_MODULE_2__["UiService"] }
];
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], ImagePage.prototype, "image", void 0);
ImagePage = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-image',
        template: Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! raw-loader!./image.page.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/screens/forms/image/image.page.html")).default,
        styles: [Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! ./image.page.scss */ "./src/app/screens/forms/image/image.page.scss")).default]
    })
], ImagePage);



/***/ }),

/***/ "./src/app/screens/forms/map/map.page.scss":
/*!*************************************************!*\
  !*** ./src/app/screens/forms/map/map.page.scss ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NjcmVlbnMvZm9ybXMvbWFwL21hcC5wYWdlLnNjc3MifQ== */");

/***/ }),

/***/ "./src/app/screens/forms/map/map.page.ts":
/*!***********************************************!*\
  !*** ./src/app/screens/forms/map/map.page.ts ***!
  \***********************************************/
/*! exports provided: MapPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapPage", function() { return MapPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var src_app_services_ui_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/ui.service */ "./src/app/services/ui.service.ts");
/* harmony import */ var src_app_services_request_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/app/services/request.service */ "./src/app/services/request.service.ts");
/* harmony import */ var src_app_services_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/services/auth.service */ "./src/app/services/auth.service.ts");





let MapPage = class MapPage {
    constructor(ui, request, auth) {
        this.ui = ui;
        this.request = request;
        this.auth = auth;
        this.az_arr = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
        this.distance = "";
        this.duration = "";
        this.details = [];
    }
    ngOnInit() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const loader = yield this.ui.loading("Por favor espere...");
            this.details.push(this.detail);
            console.log("Details", this.details);
            this.loadMap(loader);
        });
    }
    loadMap(loader) {
        //obtener usos de la API
        var directionsService = new google.maps.DirectionsService;
        var directionsDisplay = new google.maps.DirectionsRenderer({ suppressMarkers: true });
        //puntos de referencia para agregar
        var waypts = [];
        var markers = [];
        var infos = [];
        //coordenadas de los puntos de ruta
        for (let i = 0; i < this.details.length; i++) {
            let latlng = {
                lat: parseFloat(this.details[i].latitude),
                lng: parseFloat(this.details[i].longitude)
            };
            waypts.push({ location: latlng, stopover: true });
        }
        //creo mapa
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 6,
            center: { lat: waypts[0].location.lat, lng: waypts[0].location.lng }
        });
        //muestro el mapa
        directionsDisplay.setMap(map);
        //ventanas de informacion
        var infoWindow = new google.maps.InfoWindow();
        //coordenadas markers personalizados con ventana de información
        for (let i = 0; i < this.details.length; i++) {
            let latlng = {
                lat: parseFloat(this.details[i].latitude),
                lng: parseFloat(this.details[i].longitude)
            };
            let marker = new google.maps.Marker({
                position: latlng,
                map: map,
                icon: '../../../assets/imgs/markers/' + this.az_arr[i] + '.png'
            });
            markers.push(marker);
            // agrego la informacion de la dirección
            infos.push(this.details[i].address);
            // google.maps.event.addListener(marker, 'click', (function(marker, i) {
            //   return function() {
            //       infoWindow.setContent(infos[i]);
            //       infoWindow.open(map, marker);
            //   }
            // })(marker, i));
        }
        // pregunto si es ida y vuelta el servicio
        let origin, destination, return_pt;
        let n = (this.details.length - 1);
        if (this.order && this.order.round_trip === true) {
            origin = { lat: waypts[0].location.lat, lng: waypts[0].location.lng };
            destination = { lat: waypts[0].location.lat, lng: waypts[0].location.lng };
            return_pt = { lat: waypts[n].location.lat, lng: waypts[n].location.lng };
            //punto de retorno en km y min
            this.getDistanceMatrix(return_pt, origin);
        }
        else {
            origin = { lat: waypts[0].location.lat, lng: waypts[0].location.lng };
            destination = { lat: waypts[n].location.lat, lng: waypts[n].location.lng };
            this.getDistanceMatrix(origin, destination);
        }
        // pinto la ruta
        const _this = this;
        directionsService.route({
            origin: origin,
            destination: destination,
            waypoints: waypts,
            travelMode: google.maps.TravelMode.DRIVING
        }, function (response, status) {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                if (status === google.maps.DirectionsStatus.OK) {
                    directionsDisplay.setDirections(response);
                    (yield loader).dismiss();
                }
                else {
                    (yield loader).dismiss();
                    _this.ui.showToast("No se ha podido mostrar el mapa. Verifique su conexión.", () => {
                        _this.dismiss();
                    });
                    console.log('Ha fallat la comunicació amb el mapa a causa de: ' + status);
                }
            });
        });
        //calcular distancia
    }
    getDistanceMatrix(origin, destination, loader) {
        var service = new google.maps.DistanceMatrixService();
        var _this = this;
        //calculo distancia
        service.getDistanceMatrix({
            origins: [origin],
            destinations: [destination],
            travelMode: google.maps.TravelMode.DRIVING,
            unitSystem: google.maps.UnitSystem.METRIC,
            avoidHighways: false,
            avoidTolls: false
        }, function (response, status) {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                if (status != google.maps.DistanceMatrixStatus.OK) {
                    console.log("Error was: " + status);
                }
                else {
                    try {
                        let distance_text = response.rows[0].elements[0].distance.text;
                        console.log("Distance Text", distance_text);
                        let distance = distance_text.substring(0, distance_text.length - 3).replace(",", ".");
                        let duration_text = response.rows[0].elements[0].duration.text;
                        console.log("Duration Text", duration_text);
                        let duration = duration_text.substring(0, distance_text.length - 4);
                        _this.getCalculateDistance(distance_text, duration_text);
                    }
                    catch (e) {
                        console.log("error", e);
                    }
                }
            });
        });
    }
    getCalculateDistance(distance, duration) {
        this.distance = distance;
        this.duration = duration;
    }
    dismiss() {
        this.ui.dismiss();
    }
};
MapPage.ctorParameters = () => [
    { type: src_app_services_ui_service__WEBPACK_IMPORTED_MODULE_2__["UiService"] },
    { type: src_app_services_request_service__WEBPACK_IMPORTED_MODULE_3__["RequestService"] },
    { type: src_app_services_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }
];
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], MapPage.prototype, "order", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], MapPage.prototype, "detail", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], MapPage.prototype, "history", void 0);
MapPage = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-map',
        template: Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! raw-loader!./map.page.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/screens/forms/map/map.page.html")).default,
        styles: [Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! ./map.page.scss */ "./src/app/screens/forms/map/map.page.scss")).default]
    })
], MapPage);



/***/ }),

/***/ "./src/app/screens/forms/view-detail/view-detail.page.scss":
/*!*****************************************************************!*\
  !*** ./src/app/screens/forms/view-detail/view-detail.page.scss ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (".green {\n  color: #25e24e;\n}\n\n.red {\n  color: #dd0707;\n}\n\n.time {\n  height: 47px;\n  display: flex;\n  justify-content: center;\n  background: white;\n}\n\n.card-absolute-normal {\n  position: absolute;\n  bottom: 0px;\n  left: 0;\n  right: 0;\n  margin: auto 5%;\n  padding: -5px;\n  border-radius: 30px;\n  border-bottom-left-radius: 10px;\n  border-bottom-right-radius: 10px;\n  box-shadow: none;\n}\n\n.card-absolute-normal .view-detail {\n  border-radius: 26px;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n  left: 0;\n  right: 0;\n  text-transform: uppercase;\n  z-index: 1000;\n  font-weight: 900;\n  text-align: center;\n  color: white;\n  margin: 0;\n  padding: 10px;\n  background: #497cd5;\n}\n\n.card-absolute-normal .toolbar {\n  /* border-bottom-left-radius: 20px; */\n  border-radius: 20px;\n  /* border-bottom-right-radius: 20px; */\n  /* margin-right: 10px; */\n  /* margin-left: 10px; */\n  width: 100%;\n  margin: auto;\n  --background: transparent;\n}\n\n.card-absolute-normal .toolbar ion-item {\n  --background: transparent;\n}\n\n.card-absolute-normal .toolbar ion-item ion-avatar {\n  padding: 2px;\n  border: 2px solid white;\n  width: 70px;\n  height: 70px;\n}\n\n.card-absolute-normal .toolbar ion-item .status {\n  position: absolute;\n  right: 10px;\n  padding-left: 10px;\n  color: white;\n  border-top-left-radius: 30px;\n  border-bottom-left-radius: 30px;\n  border-bottom-right-radius: 0;\n  border-top-right-radius: 0;\n  width: 45%;\n  font-size: 1em;\n  bottom: 0;\n  height: 25px;\n  display: flex;\n  align-items: center;\n}\n\n.card-absolute-normal .toolbar ion-item .status.completed {\n  background-color: red;\n}\n\n.card-absolute-normal .toolbar ion-item .status.in-process {\n  background-color: #0eda0e;\n}\n\n.card-absolute-normal .toolbar ion-item .status.not-effective {\n  background-color: #1e1e2f;\n}\n\n.card-absolute-normal .div-max-height {\n  max-height: 200px;\n  overflow: auto;\n  transition: height 2s;\n}\n\n.card-absolute-normal ion-badge {\n  padding: 5px;\n  margin-left: 5px;\n}\n\n.timeline-title {\n  margin-left: 10px;\n}\n\n.timeline-title .badge {\n  background: #2dd36f;\n  padding: 4px 8px;\n  border-radius: 3px;\n  font-size: 12px;\n  font-weight: bold;\n  color: white;\n}\n\n.timeline-title .badge.success {\n  background-color: #497cd5 !important;\n}\n\n.timeline-title .badge.warning {\n  background-color: #fd5d93 !important;\n}\n\n.timeline-title .badge.danger {\n  background-color: #ff8d72 !important;\n}\n\n.timeline-title .badge.in-proccess {\n  background: #2dd36f;\n}\n\n.timeline-title .badge.not-effective {\n  background-color: #1e1e2f;\n}\n\n.time ion-button {\n  z-index: 1;\n}\n\n.time #hms {\n  color: black;\n  font-size: 2em;\n  z-index: 1;\n  letter-spacing: 8px;\n}\n\n.blue {\n  color: #07f5f5;\n}\n\n.button-small {\n  width: 50%;\n  text-align: center;\n  display: block;\n  margin: 5px auto;\n}\n\n.gm-bundled-control-on-bottom {\n  bottom: 350px !important;\n}\n\n.min-he {\n  min-height: 350px !important;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXNwcmlsbGEvRG9jdW1lbnRvc01pZ3VlbC9Qcm95ZWN0b3MvemFwcC96YXBwLWRyaXZlci1hcHAtcnBlbmFsb3phL3NyYy9hcHAvc2NyZWVucy9mb3Jtcy92aWV3LWRldGFpbC92aWV3LWRldGFpbC5wYWdlLnNjc3MiLCJzcmMvYXBwL3NjcmVlbnMvZm9ybXMvdmlldy1kZXRhaWwvdmlldy1kZXRhaWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksY0FBQTtBQ0NKOztBREVBO0VBQ0ksY0FBQTtBQ0NKOztBRGVBO0VBQ0ksWUFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtFQUNBLGlCQUFBO0FDWko7O0FEZUE7RUFDSSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLGVBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSwrQkFBQTtFQUNBLGdDQUFBO0VBQ0EsZ0JBQUE7QUNaSjs7QURjSTtFQUNJLG1CQUFBO0VBQ0EsNEJBQUE7RUFDQSw2QkFBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EseUJBQUE7RUFDQSxhQUFBO0VBQ0EsZ0JBQUE7RUFDQSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxTQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQTVDRTtBQ2dDVjs7QURpQkk7RUFFSSxxQ0FBQTtFQUNBLG1CQUFBO0VBQ0Esc0NBQUE7RUFDQSx3QkFBQTtFQUNBLHVCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSx5QkFBQTtBQ2hCUjs7QURrQlE7RUFDSSx5QkFBQTtBQ2hCWjs7QURrQlk7RUFDSSxZQUFBO0VBQ0EsdUJBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtBQ2hCaEI7O0FEbUJZO0VBQ0ksa0JBQUE7RUFDQSxXQUFBO0VBQ0Esa0JBQUE7RUFFQSxZQUFBO0VBQ0EsNEJBQUE7RUFDQSwrQkFBQTtFQUNBLDZCQUFBO0VBQ0EsMEJBQUE7RUFDQSxVQUFBO0VBQ0EsY0FBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0FDbEJoQjs7QURvQmdCO0VBQ0kscUJBQUE7QUNsQnBCOztBRHFCZ0I7RUFDSSx5QkFBQTtBQ25CcEI7O0FEc0JnQjtFQUNJLHlCQTFGYjtBQ3NFUDs7QUQyQkk7RUFDSSxpQkFBQTtFQUNBLGNBQUE7RUFDQSxxQkFBQTtBQ3pCUjs7QUQ0Qkk7RUFDSSxZQUFBO0VBQ0EsZ0JBQUE7QUMxQlI7O0FEK0JBO0VBQ0ksaUJBQUE7QUM1Qko7O0FEOEJJO0VBQ0ksbUJBQUE7RUFDQSxnQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0VBQ0EsWUFBQTtBQzVCUjs7QUQ4QlE7RUFDSSxvQ0FBQTtBQzVCWjs7QUQrQlE7RUFDSSxvQ0FBQTtBQzdCWjs7QURnQ1E7RUFDSSxvQ0FBQTtBQzlCWjs7QURpQ1E7RUFDSSxtQkFBQTtBQy9CWjs7QURrQ1E7RUFDSSx5QkExSUw7QUMwR1A7O0FEcUNBO0VBQ0ksVUFBQTtBQ2xDSjs7QURxQ0E7RUFDSSxZQUFBO0VBQ0EsY0FBQTtFQUNBLFVBQUE7RUFDQSxtQkFBQTtBQ2xDSjs7QURxQ0E7RUFDSSxjQUFBO0FDbENKOztBRHFDQTtFQUNJLFVBQUE7RUFDQSxrQkFBQTtFQUNBLGNBQUE7RUFDQSxnQkFBQTtBQ2xDSjs7QURxQ0E7RUFDSSx3QkFBQTtBQ2xDSjs7QURxQ0E7RUFDSSw0QkFBQTtBQ2xDSiIsImZpbGUiOiJzcmMvYXBwL3NjcmVlbnMvZm9ybXMvdmlldy1kZXRhaWwvdmlldy1kZXRhaWwucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmdyZWVue1xuICAgIGNvbG9yIDogIzI1ZTI0ZVxufVxuXG4ucmVke1xuICAgIGNvbG9yIDogI2RkMDcwN1xufVxuXG4vLyBjb2xvcnNcbiRwcmltYXJ5OiAjNDk3Y2Q1O1xuJHNlY29uZGFyeTogIzFkOGNmODtcbiRpbmZvOiAjMTFjZGVmO1xuJHN1Y2Nlc3M6ICMwMGJmOWE7XG4kd2FybmluZzogI2ZmOGQ3MjtcbiRkYW5nZXI6ICNmZDVkOTM7XG4kZGFyazogIzFlMWUyZjtcbiRpbi1wcm9jY2VzczogcmdiKDIxMywgMjE2LCAzOCk7XG5cblxuXG5cbi50aW1le1xuICAgIGhlaWdodDogNDdweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOyBcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbn1cblxuLmNhcmQtYWJzb2x1dGUtbm9ybWFsIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgYm90dG9tOiAwcHg7XG4gICAgbGVmdDogMDtcbiAgICByaWdodDogMDtcbiAgICBtYXJnaW46IGF1dG8gNSU7XG4gICAgcGFkZGluZzogLTVweDtcbiAgICBib3JkZXItcmFkaXVzOiAzMHB4O1xuICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDEwcHg7XG4gICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDEwcHg7XG4gICAgYm94LXNoYWRvdzogbm9uZTtcblxuICAgICYgLnZpZXctZGV0YWlsIHtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMjZweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgICB6LWluZGV4OiAxMDAwO1xuICAgICAgICBmb250LXdlaWdodDogOTAwO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiAkcHJpbWFyeTtcblxuXG4gICAgfVxuXG4gICAgJiAudG9vbGJhciB7XG4gICAgICAgIC8vYm9yZGVyOiAwLjVweCBzb2xpZCAjZDdkOGRhO1xuICAgICAgICAvKiBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAyMHB4OyAqL1xuICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4O1xuICAgICAgICAvKiBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMjBweDsgKi9cbiAgICAgICAgLyogbWFyZ2luLXJpZ2h0OiAxMHB4OyAqL1xuICAgICAgICAvKiBtYXJnaW4tbGVmdDogMTBweDsgKi9cbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIG1hcmdpbjogYXV0bztcbiAgICAgICAgLS1iYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcblxuICAgICAgICAmIGlvbi1pdGVtIHtcbiAgICAgICAgICAgIC0tYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG5cbiAgICAgICAgICAgICYgaW9uLWF2YXRhciB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHdoaXRlO1xuICAgICAgICAgICAgICAgIHdpZHRoOiA3MHB4O1xuICAgICAgICAgICAgICAgIGhlaWdodDogNzBweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJiAuc3RhdHVzIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgcmlnaHQ6IDEwcHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAxMHB4O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAzMHB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDMwcHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDA7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDQ1JTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgICAgICAgICBib3R0b206IDA7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyNXB4O1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAgICAgICAgICAgICAgICYuY29tcGxldGVke1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJi5pbi1wcm9jZXNze1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMGVkYTBlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICYubm90LWVmZmVjdGl2ZXtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJGRhcms7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAmIC5kaXYtbWF4LWhlaWdodCB7XG4gICAgICAgIG1heC1oZWlnaHQ6IDIwMHB4O1xuICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgdHJhbnNpdGlvbjogaGVpZ2h0IDJzO1xuICAgIH1cblxuICAgICYgaW9uLWJhZGdlIHtcbiAgICAgICAgcGFkZGluZzogNXB4O1xuICAgICAgICBtYXJnaW4tbGVmdDogNXB4O1xuICAgIH1cblxufVxuXG4udGltZWxpbmUtdGl0bGUge1xuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuXG4gICAgLmJhZGdlIHtcbiAgICAgICAgYmFja2dyb3VuZDogIzJkZDM2ZjtcbiAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG5cbiAgICAgICAgJi5zdWNjZXNzIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICRwcmltYXJ5ICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cblxuICAgICAgICAmLndhcm5pbmcge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJGRhbmdlciAhaW1wb3J0YW50O1xuICAgICAgICB9XG5cbiAgICAgICAgJi5kYW5nZXIge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHdhcm5pbmcgIWltcG9ydGFudDtcbiAgICAgICAgfVxuXG4gICAgICAgICYuaW4tcHJvY2Nlc3Mge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogIzJkZDM2ZjtcbiAgICAgICAgfVxuXG4gICAgICAgICYubm90LWVmZmVjdGl2ZXtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICRkYXJrO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4udGltZSBpb24tYnV0dG9ue1xuICAgIHotaW5kZXg6IDE7XG59XG5cbi50aW1lICNobXN7XG4gICAgY29sb3I6IGJsYWNrO1xuICAgIGZvbnQtc2l6ZTogMmVtO1xuICAgIHotaW5kZXg6IDE7XG4gICAgbGV0dGVyLXNwYWNpbmc6IDhweDtcbn1cblxuLmJsdWV7XG4gICAgY29sb3IgOiAjMDdmNWY1XG59XG5cbi5idXR0b24tc21hbGx7XG4gICAgd2lkdGg6IDUwJTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgbWFyZ2luOiA1cHggYXV0bztcbn1cblxuLmdtLWJ1bmRsZWQtY29udHJvbC1vbi1ib3R0b217XG4gICAgYm90dG9tOiAzNTBweCAhaW1wb3J0YW50O1xufVxuXG4ubWluLWhle1xuICAgIG1pbi1oZWlnaHQ6IDM1MHB4ICFpbXBvcnRhbnQ7XG59IiwiLmdyZWVuIHtcbiAgY29sb3I6ICMyNWUyNGU7XG59XG5cbi5yZWQge1xuICBjb2xvcjogI2RkMDcwNztcbn1cblxuLnRpbWUge1xuICBoZWlnaHQ6IDQ3cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbn1cblxuLmNhcmQtYWJzb2x1dGUtbm9ybWFsIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBib3R0b206IDBweDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIG1hcmdpbjogYXV0byA1JTtcbiAgcGFkZGluZzogLTVweDtcbiAgYm9yZGVyLXJhZGl1czogMzBweDtcbiAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMTBweDtcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDEwcHg7XG4gIGJveC1zaGFkb3c6IG5vbmU7XG59XG4uY2FyZC1hYnNvbHV0ZS1ub3JtYWwgLnZpZXctZGV0YWlsIHtcbiAgYm9yZGVyLXJhZGl1czogMjZweDtcbiAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMDtcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICB6LWluZGV4OiAxMDAwO1xuICBmb250LXdlaWdodDogOTAwO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAxMHB4O1xuICBiYWNrZ3JvdW5kOiAjNDk3Y2Q1O1xufVxuLmNhcmQtYWJzb2x1dGUtbm9ybWFsIC50b29sYmFyIHtcbiAgLyogYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMjBweDsgKi9cbiAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgLyogYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDIwcHg7ICovXG4gIC8qIG1hcmdpbi1yaWdodDogMTBweDsgKi9cbiAgLyogbWFyZ2luLWxlZnQ6IDEwcHg7ICovXG4gIHdpZHRoOiAxMDAlO1xuICBtYXJnaW46IGF1dG87XG4gIC0tYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG59XG4uY2FyZC1hYnNvbHV0ZS1ub3JtYWwgLnRvb2xiYXIgaW9uLWl0ZW0ge1xuICAtLWJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xufVxuLmNhcmQtYWJzb2x1dGUtbm9ybWFsIC50b29sYmFyIGlvbi1pdGVtIGlvbi1hdmF0YXIge1xuICBwYWRkaW5nOiAycHg7XG4gIGJvcmRlcjogMnB4IHNvbGlkIHdoaXRlO1xuICB3aWR0aDogNzBweDtcbiAgaGVpZ2h0OiA3MHB4O1xufVxuLmNhcmQtYWJzb2x1dGUtbm9ybWFsIC50b29sYmFyIGlvbi1pdGVtIC5zdGF0dXMge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAxMHB4O1xuICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMzBweDtcbiAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMzBweDtcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7XG4gIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAwO1xuICB3aWR0aDogNDUlO1xuICBmb250LXNpemU6IDFlbTtcbiAgYm90dG9tOiAwO1xuICBoZWlnaHQ6IDI1cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG4uY2FyZC1hYnNvbHV0ZS1ub3JtYWwgLnRvb2xiYXIgaW9uLWl0ZW0gLnN0YXR1cy5jb21wbGV0ZWQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XG59XG4uY2FyZC1hYnNvbHV0ZS1ub3JtYWwgLnRvb2xiYXIgaW9uLWl0ZW0gLnN0YXR1cy5pbi1wcm9jZXNzIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzBlZGEwZTtcbn1cbi5jYXJkLWFic29sdXRlLW5vcm1hbCAudG9vbGJhciBpb24taXRlbSAuc3RhdHVzLm5vdC1lZmZlY3RpdmUge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWUxZTJmO1xufVxuLmNhcmQtYWJzb2x1dGUtbm9ybWFsIC5kaXYtbWF4LWhlaWdodCB7XG4gIG1heC1oZWlnaHQ6IDIwMHB4O1xuICBvdmVyZmxvdzogYXV0bztcbiAgdHJhbnNpdGlvbjogaGVpZ2h0IDJzO1xufVxuLmNhcmQtYWJzb2x1dGUtbm9ybWFsIGlvbi1iYWRnZSB7XG4gIHBhZGRpbmc6IDVweDtcbiAgbWFyZ2luLWxlZnQ6IDVweDtcbn1cblxuLnRpbWVsaW5lLXRpdGxlIHtcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG59XG4udGltZWxpbmUtdGl0bGUgLmJhZGdlIHtcbiAgYmFja2dyb3VuZDogIzJkZDM2ZjtcbiAgcGFkZGluZzogNHB4IDhweDtcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xuICBmb250LXNpemU6IDEycHg7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBjb2xvcjogd2hpdGU7XG59XG4udGltZWxpbmUtdGl0bGUgLmJhZGdlLnN1Y2Nlc3Mge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDk3Y2Q1ICFpbXBvcnRhbnQ7XG59XG4udGltZWxpbmUtdGl0bGUgLmJhZGdlLndhcm5pbmcge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmQ1ZDkzICFpbXBvcnRhbnQ7XG59XG4udGltZWxpbmUtdGl0bGUgLmJhZGdlLmRhbmdlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZjhkNzIgIWltcG9ydGFudDtcbn1cbi50aW1lbGluZS10aXRsZSAuYmFkZ2UuaW4tcHJvY2Nlc3Mge1xuICBiYWNrZ3JvdW5kOiAjMmRkMzZmO1xufVxuLnRpbWVsaW5lLXRpdGxlIC5iYWRnZS5ub3QtZWZmZWN0aXZlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUyZjtcbn1cblxuLnRpbWUgaW9uLWJ1dHRvbiB7XG4gIHotaW5kZXg6IDE7XG59XG5cbi50aW1lICNobXMge1xuICBjb2xvcjogYmxhY2s7XG4gIGZvbnQtc2l6ZTogMmVtO1xuICB6LWluZGV4OiAxO1xuICBsZXR0ZXItc3BhY2luZzogOHB4O1xufVxuXG4uYmx1ZSB7XG4gIGNvbG9yOiAjMDdmNWY1O1xufVxuXG4uYnV0dG9uLXNtYWxsIHtcbiAgd2lkdGg6IDUwJTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBkaXNwbGF5OiBibG9jaztcbiAgbWFyZ2luOiA1cHggYXV0bztcbn1cblxuLmdtLWJ1bmRsZWQtY29udHJvbC1vbi1ib3R0b20ge1xuICBib3R0b206IDM1MHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5taW4taGUge1xuICBtaW4taGVpZ2h0OiAzNTBweCAhaW1wb3J0YW50O1xufSJdfQ== */");

/***/ }),

/***/ "./src/app/screens/forms/view-detail/view-detail.page.ts":
/*!***************************************************************!*\
  !*** ./src/app/screens/forms/view-detail/view-detail.page.ts ***!
  \***************************************************************/
/*! exports provided: ViewDetailPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewDetailPage", function() { return ViewDetailPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var src_app_services_ui_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/ui.service */ "./src/app/services/ui.service.ts");
/* harmony import */ var src_app_services_request_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/app/services/request.service */ "./src/app/services/request.service.ts");
/* harmony import */ var src_app_services_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/services/auth.service */ "./src/app/services/auth.service.ts");
/* harmony import */ var _events_events_page__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../events/events.page */ "./src/app/screens/forms/events/events.page.ts");
/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @capacitor/core */ "./node_modules/@capacitor/core/dist/esm/index.js");
/* harmony import */ var _angular_fire_database__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/fire/database */ "./node_modules/@angular/fire/__ivy_ngcc__/fesm2015/angular-fire-database.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var src_app_services_place_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! src/app/services/place.service */ "./src/app/services/place.service.ts");
/* harmony import */ var _services_network_status_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../services/network-status.service */ "./src/app/services/network-status.service.ts");
/* harmony import */ var src_app_services_realtime_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! src/app/services/realtime.service */ "./src/app/services/realtime.service.ts");
/* harmony import */ var src_environments_environment__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! src/environments/environment */ "./src/environments/environment.ts");
/* harmony import */ var src_app_services_days_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! src/app/services/days.service */ "./src/app/services/days.service.ts");
/* harmony import */ var cordova_background_geolocation_lt__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! cordova-background-geolocation-lt */ "./node_modules/cordova-background-geolocation-lt/src/ionic/index.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js");
/* harmony import */ var _ionic_native_foreground_service_ngx__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @ionic-native/foreground-service/ngx */ "./node_modules/@ionic-native/foreground-service/__ivy_ngcc__/ngx/index.js");













// import { BackgroundGeolocation, BackgroundGeolocationConfig, BackgroundGeolocationEvents, BackgroundGeolocationResponse } from '@ionic-native/background-geolocation/ngx';




const { Geolocation, Haptics } = _capacitor_core__WEBPACK_IMPORTED_MODULE_6__["Plugins"];
let ViewDetailPage = class ViewDetailPage {
    constructor(ui, request, auth, db, place, network, realtime, days, platform, foregroundService) {
        this.ui = ui;
        this.request = request;
        this.auth = auth;
        this.db = db;
        this.place = place;
        this.network = network;
        this.realtime = realtime;
        this.days = days;
        this.platform = platform;
        this.foregroundService = foregroundService;
        // @ViewChild(HTMLIonLoadingElement) loading: HTMLIonLoadingElement
        this.az_arr = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
        this.statesClasses = {
            "23": "red",
            "24": "blue",
            "25": "green"
        };
        this.markers = [];
        this.distance = "";
        this.duration = 0;
        this.duration_text = "";
        this.details = [];
        this.initTimerB = false;
        this.firstTime = true;
        this.equal_or_greater_than_a_kilometer = true;
        this.markerPoints = [];
        this.view_more = false;
        this.proximity = 1;
        this.s = 0;
        this.m = 0;
        this.h = 0;
        this.timer_hour = "00:00:00";
        this.markers_numbers = [
            '1',
            '2',
            '3',
            '4',
            '5',
            '6',
            '7',
            '8',
            '9',
            '10',
            '11',
            '12',
            '13',
            '14',
            '15',
            '16',
            '17',
            '18',
            '19',
            '20',
            '21',
            '22',
            '23',
            '24',
            '25',
            '26',
            '27',
            '28',
            '29',
            '30',
            '31',
            '32',
            '33',
            '34',
            '35',
            '36',
            '37',
            '38',
            '39',
            '40',
            '41',
            '42',
            '43',
            '44',
            '45',
            '46',
            '47',
            '48',
            '49',
            '50',
        ];
        this.client_configuration_data = {};
        this.total_charge = 0;
        this.marker_div = null;
        this.paths = [];
        this.keyDetail = "";
    }
    //#region Life Cycle ionic Angular
    ngOnInit() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
        });
    }
    ngAfterContentInit() {
        console.log("Content Init");
        if (this.latLng) {
            console.log("Content Init defined", this.latLng);
            console.log("Content init Markers", this.markerPoints);
            const location = this.latLng;
            this.locationSubscription = location.subscribe((loc) => {
                console.log("Content Init Subscribe", loc);
                //Set the marker position
                this.markerPoints[0].setPosition(loc);
                this.updatePosition(this.auth.user.id, this.auth.vehicles.id, loc.lat, loc.lng, loc.bearing);
            });
        }
    }
    ionViewWillLeave() {
        console.log("ionViewWillLeave");
        clearInterval(this.positionTracking);
    }
    ionViewDidLeave() {
        console.log("ionViewDidLeave");
        clearInterval(this.positionTracking);
    }
    ngOnDestroy() {
        //Called once, before the instance is destroyed.
        //Add 'implements OnDestroy' to the class.
        clearInterval(this.positionTracking);
    }
    ionViewDidEnter() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            // this.changeAvailability(true);
        });
    }
    ionViewWillEnter() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            if (this.order.service_type_id == 3) {
                this.view_more = true;
            }
            // this.icon=encodeURIComponent(this.icon)
            // this.icon = this.icon.replace("<", "\ <")
            this.sTopTimer();
            if (this.order.status_order != 25 && this.order.status_order != 31) {
                if (localStorage.getItem("initTimer") && this.order.service_type_id != 3) {
                    this.initTimer();
                }
                this.total_charge = 0;
                if (this.detailActive && this.detailActive.total_charge) {
                    this.total_charge = Number(this.detailActive.total_charge);
                }
            }
            clearInterval(this.positionTracking);
            console.log("Proximity", this.proximity);
            // this.changeAvailability()
            if (this.network.getNetworkStatus().connected) {
                //Assign the proximity property from the the SQL database
                // this.proximity = this.order.proximity;
                this.orderSubscription = this.realtime.getNewOrder().valueChanges()
                    .subscribe((res) => {
                    // console.log("New order res", res.proximity)
                    if (res != null) {
                        if (typeof (res.proximity) != "undefined") {
                            //Assign the proximity property from firebase
                            this.proximity = res.proximity;
                        }
                    }
                    console.log("Proximity", this.proximity);
                });
                if (this.order.service_type_id != 3) {
                    this.request.get("list/attributes?parameter_id=9")
                        .subscribe((res) => {
                        let distance = Number(res.data[0].value);
                        this.equal_or_greater_than_a_kilometer = distance >= 1000;
                        if (distance >= 1000) {
                            distance = distance / 1000;
                        }
                        this.minimum_distance = distance;
                    }, err => {
                        this.ui.showToast("Verifique su conexión", () => {
                            this.clearLocals();
                            this.dismiss();
                        });
                    });
                }
                console.log("Order", this.order);
                let icon = "";
                clearInterval(this.positionTracking);
                if (this.order.service_type_id != 3) {
                    switch (Number(this.auth.vehicles.transport_type_id)) {
                        case 4:
                            icon = "assets/imgs/moto-new.svg";
                            break;
                        case 5:
                            icon = "assets/imgs/carry.png";
                            break;
                        case 6:
                            icon = "assets/imgs/auto.png";
                            break;
                    }
                    if (this.order.status_order != 31) {
                        this.markers.push(icon);
                    }
                    this.markers_numbers.map((ab, i) => {
                        //  
                        this.markers.push("/assets/imgs/markers_numbers/" + (i + 1) + '.png');
                    });
                }
                const latitude = localStorage.getItem("latitude");
                const longitude = localStorage.getItem("longitude");
                console.log("Order Current", this.order);
                if (this.order.status_order == 22 || this.order.status_order == 23 || this.order.status_order == 53) {
                    try {
                        const data = new FormData();
                        data.append("order_id", this.order.id);
                        data.append("latitude", latitude.toString());
                        data.append("longitude", longitude.toString());
                        data.append("description", "Inicio Servicio");
                        data.append("user_id", this.auth.user.id.toString());
                        this.request.post('driver/start_service', data)
                            .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                            if (this.order.service_type_id == 3) {
                                this.initTimerForTimeService(true);
                                this.realtime.getFirebaseCollectionObject(`status_order_mobile/${this.order.city_id}/${this.order.customer_id}/${this.order.id}`)
                                    .valueChanges().subscribe((res) => {
                                    if (res != null) {
                                        if (res.status_order == 25) {
                                            this.order.status_order = 25;
                                            this.dismiss();
                                            this.clearLocals();
                                            if (this.subscription) {
                                                this.subscription.unsubscribe();
                                            }
                                            if (this.subscription2) {
                                                this.subscription2.unsubscribe();
                                            }
                                            this.ui.presentAlert({
                                                mode: 'ios',
                                                header: 'Orden Finalizada',
                                                message: 'La orden ha sido finalizada con éxito',
                                                buttons: [
                                                    {
                                                        text: 'Aceptar',
                                                        role: 'cancel',
                                                        cssClass: 'secondary',
                                                        handler: (blah) => {
                                                        }
                                                    }
                                                ]
                                            });
                                            return;
                                        }
                                    }
                                });
                                // this.backgroundMode.on('activate').subscribe(res=>{
                                //   console.log("Debug init timer background")
                                //   this.initTimerForTimeService(true);
                                // })
                                // this.backgroundMode.on('deactivate').subscribe(res=>{
                                //   console.log("Debug init timer foreground")
                                //   this.initTimerForTimeService(true);
                                // })
                            }
                            if (this.order.zapp_store_order == 0) {
                                this.order.status_order = 24;
                            }
                            let details = this.order.details ? this.order.details : this.order.detail;
                            details = details.map(d => {
                                const detail = Object.assign(Object.assign({}, d), { status: 24 });
                                return Object.assign(Object.assign({}, d), { status: 24 });
                            });
                            details.forEach(detail => {
                                this.realtime.getFirebaseCollection(`order_detail_report/${this.order.id}/${detail.id}`)
                                    .update(Object.assign(Object.assign({}, detail), { status: 24 }));
                            });
                            this.order.details = details;
                            // this.ui.showToast("Se inició el servicio");
                            console.log("Order Current", this.order);
                            localStorage.setItem("current_order", JSON.stringify(this.order));
                            if (this.order.service_type_id != 3) {
                                this.loadMap(true);
                            }
                            else {
                                //this.initTimerForTimeService()
                            }
                        }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                            console.log("Error", err);
                            localStorage.removeItem("current_order");
                            this.clearLocals();
                            if (err.status == 400) {
                                yield this.ui.presentAlert({
                                    mode: 'ios',
                                    header: 'No se ha podido iniciar el servicio',
                                    message: err.error.messages[0],
                                    buttons: [
                                        {
                                            text: 'Aceptar',
                                            role: 'cancel',
                                            cssClass: 'secondary',
                                            handler: (blah) => {
                                                this.dismiss();
                                            }
                                        },
                                    ]
                                });
                            }
                            console.log("Error", err);
                        }));
                    }
                    catch (e) {
                        console.log("Error", e);
                    }
                }
                else {
                    if (this.order.status_order == 25) {
                        this.request
                            .get(`driver/events_per_driver/${this.order.id}/${this.auth.user.id}`)
                            .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                            const event = res.data.find(e => e.latitude && e.longitude);
                            const { latitude, longitude } = event;
                            console.log("Event", event);
                            this.details.unshift({
                                latitude,
                                longitude
                            });
                            this.order.details.map(d => {
                                this.details.push({
                                    id: d.id,
                                    latitude: d.latitude,
                                    longitude: d.longitude,
                                });
                            });
                            console.log("Details", this.details);
                            this.loadMap(true);
                        }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                            localStorage.removeItem("current_order");
                            this.clearLocals();
                            yield this.ui.presentAlert({
                                mode: 'ios',
                                header: 'No se ha podido mostrar el historial',
                                buttons: [
                                    {
                                        text: 'Aceptar',
                                        role: 'cancel',
                                        cssClass: 'secondary',
                                        handler: (blah) => {
                                            this.dismiss();
                                        }
                                    },
                                ]
                            });
                            console.log("Error", err);
                        }));
                    }
                    else {
                        if (this.order.service_type_id != 3) {
                            this.loadMap(true);
                        }
                        else {
                            this.realtime.getFirebaseCollectionObject(`status_order_mobile/${this.order.city_id}/${this.order.customer_id}/${this.order.id}`)
                                .valueChanges().subscribe((res) => {
                                if (res != null) {
                                    if (res.status_order == 25) {
                                        this.order.status_order = 25;
                                        this.dismiss();
                                        this.clearLocals();
                                        if (this.subscription) {
                                            this.subscription.unsubscribe();
                                        }
                                        if (this.subscription2) {
                                            this.subscription2.unsubscribe();
                                        }
                                        this.ui.presentAlert({
                                            mode: 'ios',
                                            header: 'Orden Finalizada',
                                            message: 'La orden ha sido finalizada con éxito',
                                            buttons: [
                                                {
                                                    text: 'Aceptar',
                                                    role: 'cancel',
                                                    cssClass: 'secondary',
                                                    handler: (blah) => {
                                                    }
                                                }
                                            ]
                                        });
                                        return;
                                    }
                                }
                            });
                            this.initTimerForTimeService();
                        }
                    }
                }
                try {
                    let latitude;
                    let longitude;
                    if (localStorage.getItem("latitude") && localStorage.getItem("longitude")) {
                        latitude = localStorage.getItem("latitude");
                        longitude = localStorage.getItem("longitude");
                    }
                    else {
                        const position = yield Geolocation.getCurrentPosition({
                            enableHighAccuracy: true
                        });
                        latitude = position.coords.latitude;
                        longitude = position.coords.longitude;
                    }
                    localStorage.setItem("latitude", latitude.toString());
                    localStorage.setItem("longitude", longitude.toString());
                    const y = this.realtime.getUserGeolocation().valueChanges().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["take"])(1))
                        .subscribe((snapshot) => {
                        console.log(snapshot);
                        y.unsubscribe();
                        if (snapshot === null) {
                            this.realtime.getUserGeolocation().set({
                                key: this.auth.user.id,
                                user_id: this.auth.user.id,
                                latitude: latitude.toString(),
                                longitude: longitude.toString(),
                                city_id: this.auth.person.city_id,
                                state_id: Number(this.auth.person.state_id),
                                level_id: Number(this.auth.user.level_id),
                                // last_active: Date.now(),
                                available: this.auth.user.available,
                                driver_name: this.auth.user.name,
                                transport_type_id: this.auth.vehicles.transport_type_id,
                            });
                        }
                        else {
                            // update
                            this.realtime.getUserGeolocation().update({
                                key: this.auth.user.id,
                                user_id: this.auth.user.id,
                                latitude: latitude.toString(),
                                longitude: longitude.toString(),
                                city_id: this.auth.person.city_id,
                                state_id: Number(this.auth.person.state_id),
                                level_id: Number(this.auth.user.level_id),
                                // last_active: Date.now(),
                                available: this.auth.user.available,
                                driver_name: this.auth.user.name,
                                transport_type_id: this.auth.vehicles.transport_type_id,
                            });
                        }
                    });
                }
                catch (e) {
                    let latitude;
                    let longitude;
                    if (localStorage.getItem("latitude") && localStorage.getItem("longitude")) {
                        latitude = localStorage.getItem("latitude");
                        longitude = localStorage.getItem("longitude");
                        const y = this.realtime.getUserGeolocation().valueChanges().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["take"])(1))
                            .subscribe((snapshot) => {
                            console.log(snapshot);
                            y.unsubscribe();
                            if (snapshot === null) {
                                this.realtime.getUserGeolocation().set({
                                    key: this.auth.user.id,
                                    user_id: this.auth.user.id,
                                    latitude: latitude.toString(),
                                    longitude: longitude.toString(),
                                    city_id: this.auth.person.city_id,
                                    state_id: Number(this.auth.person.state_id),
                                    level_id: Number(this.auth.user.level_id),
                                    // last_active: Date.now(),
                                    available: this.auth.user.available,
                                    driver_name: this.auth.user.name,
                                    transport_type_id: this.auth.vehicles.transport_type_id,
                                });
                            }
                            else {
                                // update
                                this.realtime.getUserGeolocation().update({
                                    key: this.auth.user.id,
                                    user_id: this.auth.user.id,
                                    latitude: latitude.toString(),
                                    longitude: longitude.toString(),
                                    city_id: this.auth.person.city_id,
                                    state_id: Number(this.auth.person.state_id),
                                    level_id: Number(this.auth.user.level_id),
                                    // last_active: Date.now(),
                                    available: this.auth.user.available,
                                    driver_name: this.auth.user.name,
                                    transport_type_id: this.auth.vehicles.transport_type_id,
                                });
                            }
                        });
                    }
                }
                this.order.step = this.order.details.findIndex(d => d.status != 25);
            }
            else {
                this.ui.showToast("Verifique su conexión e intentelo de nuevo", () => {
                    localStorage.removeItem("current_order");
                    this.clearLocals();
                    this.dismiss();
                });
            }
        });
    }
    //#endregion
    viewMore() {
        this.view_more = !this.view_more;
        if (!this.view_more) {
            clearInterval(this.positionTracking);
        }
        else {
            if (this.order.status_order != 25) {
                // this.changeAvailability();
            }
        }
    }
    get detailActive() {
        return this.order.details.find(d => d.status != 25 && d.status != 36 && d.status != 48);
    }
    findLetter() {
        let index = 0;
        if (this.order.details) {
            index = this.order.details.findIndex(d => d == this.detailActive);
        }
        else {
            index = this.order.detail.findIndex(d => d == this.detailActive);
        }
        return this.markers_numbers[index];
    }
    dismiss() {
        clearInterval(this.positionTracking);
        this.ui.dismiss();
    }
    initTimerForTimeService(init = false) {
        this.keyDetail = `initDetailTime${this.detailActive.id}`;
        const initDetailTime = localStorage.getItem(this.keyDetail);
        if (!initDetailTime) {
            this.initTime = new Date();
            localStorage.setItem(this.keyDetail, Date.now().toString());
        }
        else {
            this.initTime = new Date(Number(initDetailTime));
        }
        this.s = 0;
        this.m = 0;
        this.h = 0;
        if (localStorage.getItem("timer")) {
            const timer = JSON.parse(localStorage.getItem("timer"));
            this.s = timer.seconds;
            this.m = timer.minutes;
            this.h = timer.hours;
        }
        if (this.detailActive.timer) {
            const time = this.detailActive.timer;
            this.s = time.seconds;
            this.m = time.minutes;
            this.h = time.hours;
        }
        let close_time;
        let hours = 0;
        let minutes = 0;
        let seconds = 0;
        const timer = {
            seconds: this.s,
            minutes: this.m,
            hours: this.h
        };
        this.initTimerB = true;
        localStorage.setItem("initTimer", "yes");
        localStorage.setItem("timer", JSON.stringify(timer));
        if (init && this.id_interval) {
            console.log("Debug Clear interval");
            clearInterval(this.id_interval);
        }
        this.id_interval = setInterval(() => {
            this.timerForTimeService();
        }, 1000);
        localStorage.setItem("id_interval", this.id_interval.toString());
    }
    timerForTimeService() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            var hAux, mAux, sAux;
            let daysD = 0;
            let close_time;
            let hours = 0;
            let minutes = 0;
            let seconds = 0;
            const intDate = localStorage.getItem(this.keyDetail);
            var dateFuture = new Date(Number(intDate));
            var dateNow = new Date();
            var secondsS = Math.floor((dateNow - (dateFuture)) / 1000);
            var minutesS = Math.floor(secondsS / 60);
            var hoursS = Math.floor(minutesS / 60);
            var days = Math.floor(hoursS / 24);
            console.log(`Debug Days ${days} Hours ${hoursS} Minutes ${minutesS} Seconds ${secondsS}`);
            hours = hoursS - (days * 24);
            minutes = minutesS - (days * 24 * 60) - (hours * 60);
            seconds = secondsS - (days * 24 * 60 * 60) - (hours * 60 * 60) - (minutes * 60);
            console.log(`Debug Days ${daysD} Hours ${hours} Minutes ${minutes} Seconds ${seconds}`);
            this.s = seconds;
            this.m = minutes;
            this.h = hours;
            console.log("Seconds", this.s);
            if (this.s > 59) {
                this.m++;
                this.s = 0;
            }
            if (this.m > 59) {
                this.h++;
                this.m = 0;
            }
            if (this.detailActive) {
                const today = new Date();
                const today_date = {
                    day: today.getDate(),
                    month: today.getMonth() + 1,
                    year: today.getFullYear()
                };
                const date_split = this.order.date.split("-");
                const date_service_date = {
                    day: Number(date_split[2]),
                    month: Number(date_split[1]),
                    year: Number(date_split[0])
                };
                const isToday = Object.keys(today_date).every(key => {
                    return (today_date[key] == date_service_date[key]);
                });
                if (this.h == Number(this.detailActive.number_of_hours) || !isToday) {
                    clearInterval(this.id_interval);
                    this.clearLocals();
                    this.endTimeOrder();
                    yield this.ui.presentAlert({
                        mode: 'ios',
                        header: '¡Tu viaje ha finalizado!',
                        buttons: [
                            {
                                text: 'Aceptar',
                                role: 'cancel',
                                cssClass: 'secondary',
                                handler: (blah) => {
                                }
                            },
                        ]
                    });
                }
            }
            else {
                console.log("Not exist");
            }
            if (this.h > 24) {
                this.h = 0;
            }
            if (this.s < 10) {
                sAux = "0" + this.s;
            }
            else {
                sAux = this.s;
            }
            if (this.m < 10) {
                mAux = "0" + this.m;
            }
            else {
                mAux = this.m;
            }
            if (this.h < 10) {
                hAux = "0" + this.h;
            }
            else {
                hAux = this.h;
            }
            const timer = {
                seconds: this.s,
                minutes: this.m,
                hours: this.h
            };
            console.log("Seconds After", timer.seconds);
            localStorage.setItem("timer", JSON.stringify(timer));
            /*
           REGISTER THE CURRENT DATE
           THE REASON OT THIS IS
             IF THE USER CLOSE THE APPLICATION
             READ IT AND CALCULATE THE DIFFERENCE BETWEEN THE LAST SAVED DATE AND THE CURRENT DATE
           */
            this.timer_hour = hAux + ":" + mAux + ":" + sAux;
            if (this.detailActive) {
                const detail = this.order.details.find(d => d.id == this.detailActive.id);
                console.log("Detail", detail, this.detailActive, this.details);
                detail.timer = timer;
                detail.total_charge = this.total_charge;
                console.log("FIND dETAIL", detail);
                //Update real time timer for the client
                this.realtime.getFirebaseCollection(`order_detail_report/${this.order.id}/${this.detailActive.id}`)
                    .update(Object.assign({}, detail));
                localStorage.setItem("current_order", JSON.stringify(this.order));
            }
        });
    }
    getDaysHoursMinutesSecondsFromMiliseconds(ms) {
        let days = 0;
        let daysms = 0;
        let hours = 0;
        let hoursms;
        let minutes;
        let minutesms;
        let sec;
        days = Math.floor(ms / (24 * 60 * 60 * 1000));
        daysms = ms % (24 * 60 * 60 * 1000);
        hours = Math.floor((daysms) / (60 * 60 * 1000));
        hoursms = ms % (60 * 60 * 1000);
        minutes = Math.floor((hoursms) / (60 * 1000));
        minutesms = ms % (60 * 1000);
        sec = Math.floor((minutesms) / (1000));
        return { days, hours, minutes, sec };
    }
    initTimer() {
        this.keyDetail = `initDetailTime${this.detailActive.id}`;
        const initDetailTime = localStorage.getItem(this.keyDetail);
        if (!initDetailTime) {
            localStorage.setItem(this.keyDetail, Date.now().toString());
        }
        this.s = 0;
        this.m = 0;
        this.h = 0;
        if (this.detailActive.timer) {
            const time = this.detailActive.timer;
            this.s = time.seconds;
            this.m = time.minutes;
            this.h = time.hours;
            const minuteToCharge = Number(this.m) + (Number(this.h) * 60);
            this.total_charge = (Math.floor(minuteToCharge / Number(this.order.time_wait))) * (Number(this.order.rate_per_minute));
            console.log("Total charge", this.total_charge);
            console.log("Timer", time);
        }
        let close_time;
        let hours = 0;
        let minutes = 0;
        let seconds = 0;
        const timer = {
            seconds: this.s,
            minutes: this.m,
            hours: this.h
        };
        console.log(`Difference Time ${timer.hours}:${timer.minutes}:${timer.seconds}`);
        localStorage.setItem("timer", JSON.stringify(timer));
        this.initTimerB = true;
        localStorage.setItem("initTimer", "yes");
        this.total_charge = 0;
        const detail = this.order.details.find(d => d.id == this.detailActive.id);
        if (detail) {
            detail.timer = timer;
            detail.total_charge = 0;
            console.log("Order ", this.order);
            localStorage.setItem("current_order", JSON.stringify(this.order));
        }
        console.log("Detail");
        this.id_interval = setInterval(() => {
            this.timer();
        }, 1000);
        localStorage.setItem("id_interval", this.id_interval.toString());
    }
    sTopTimer() {
        localStorage.removeItem("id_interval");
        clearInterval(this.id_interval);
    }
    timer() {
        let hAux, mAux, sAux;
        let close_time;
        let daysD = 0;
        let hours = 0;
        let minutes = 0;
        let seconds = 0;
        /**
         * This feature is for when the operating
         * system close the processes of the application when it restarts
         * take the App close date and compare it with the current time and get the difference in hours, minutes and seconds
         */
        const intDate = localStorage.getItem(this.keyDetail);
        var dateFuture = new Date(Number(intDate));
        var dateNow = new Date();
        var secondsS = Math.floor((dateNow - (dateFuture)) / 1000);
        var minutesS = Math.floor(secondsS / 60);
        var hoursS = Math.floor(minutesS / 60);
        var days = Math.floor(hoursS / 24);
        console.log(`Days ${days} Hours ${hoursS} Minutes ${minutesS} Seconds ${secondsS}`);
        hours = hoursS - (days * 24);
        minutes = minutesS - (days * 24 * 60) - (hours * 60);
        seconds = secondsS - (days * 24 * 60 * 60) - (hours * 60 * 60) - (minutes * 60);
        console.log(`Days ${daysD} Hours ${hours} Minutes ${minutes} Seconds ${seconds}`);
        this.s = seconds;
        this.m = minutes;
        this.h = hours;
        const detail = this.order.details.find(d => d.id == this.detailActive.id);
        if (this.order.time_wait) {
            //if the minute is multiple of order the it recalculate the total charge
            /**
             * With this formula
             * total_charge = (minutes/order_wait_time)*order_rate_per_minute
             */
            this.total_charge = 0;
            const minuteToCharge = Number(this.m) + (Number(this.h) * 60) + (Number(days) * 24 * 60);
            this.total_charge = (Math.floor(minuteToCharge / Number(this.order.time_wait))) * (Number(this.order.rate_per_minute));
            console.log("Total charge", this.total_charge, this.order.time_wait, this.order.rate_per_minute, minuteToCharge, (Math.floor(minuteToCharge / Number(this.order.time_wait))));
        }
        else {
            console.log("Not exist");
        }
        if (this.s < 10) {
            sAux = "0" + this.s;
        }
        else {
            sAux = this.s;
        }
        if (this.m < 10) {
            mAux = "0" + this.m;
        }
        else {
            mAux = this.m;
        }
        if (this.h < 10) {
            hAux = "0" + this.h;
        }
        else {
            hAux = this.h;
        }
        const timer = {
            seconds: this.s,
            minutes: this.m,
            hours: this.h
        };
        if (detail) {
            detail.timer = timer;
            detail.total_charge = this.total_charge;
            console.log("FIND dETAIL", detail);
            //Update real time timer for the client
            this.realtime.getFirebaseCollection(`order_detail_report/${this.order.id}/${this.detailActive.id}`)
                .update(Object.assign({}, detail));
            localStorage.setItem("current_order", JSON.stringify(this.order));
        }
        this.timer_hour = hAux + ":" + mAux + ":" + sAux;
    }
    clearLocals() {
        //id_interval
        localStorage.removeItem("current_order");
        localStorage.removeItem("total_charge");
        localStorage.removeItem("initTimer");
        localStorage.removeItem("client_configuration_data");
        localStorage.removeItem("configuration_data");
        localStorage.removeItem("timer");
        localStorage.removeItem(this.keyDetail);
        localStorage.removeItem("bearing");
        localStorage.removeItem("bearing_used");
        localStorage.removeItem("app_close_date");
        this.sTopTimer();
        if (this.locationSubscription) {
            this.locationSubscription.unsubscribe();
        }
    }
    toNumber(number) {
        return Number(number);
    }
    toogleComment(detail) {
        if (detail.status != 25) {
            if (detail.comment) {
                detail.comment = undefined;
                return;
            }
            detail.comment = "yes";
        }
        else {
            this.ui.showToast("La direccióon ya está realizada en el detalle del servicio");
        }
    }
    loadMap(firstTime = false) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            //obtener usos de la API
            if (this.network.getNetworkStatus().connected) {
                const loader = yield this.ui.loading("Por favor espere...");
                try {
                    if (this.order.status_order != 25 && this.order.status_order != 31 && this.order.status_order != 48) {
                        let latitude;
                        let longitude;
                        if (localStorage.getItem("latitude") && localStorage.getItem("longitude")) {
                            latitude = localStorage.getItem("latitude");
                            longitude = localStorage.getItem("longitude");
                        }
                        else {
                        }
                        this.details.unshift({
                            latitude,
                            longitude
                        });
                        this.latitude = latitude;
                        this.longitude = longitude;
                    }
                    if (this.order.status_order != 25) {
                        this.order.details.map(d => {
                            this.details.push({
                                id: d.id,
                                latitude: d.latitude,
                                longitude: d.longitude,
                            });
                        });
                    }
                    var directionsService = new google.maps.DirectionsService;
                    var directionsDisplay = new google.maps.DirectionsRenderer({ suppressMarkers: true });
                    //puntos de referencia para agregar
                    var waypts = [];
                    var markers = [];
                    var infos = [];
                    //coordenadas de los puntos de ruta
                    for (let i = 0; i < this.details.length; i++) {
                        if (this.details[i].latitude && this.details[i].longitude) {
                            let latlng = {
                                lat: parseFloat(this.details[i].latitude),
                                lng: parseFloat(this.details[i].longitude)
                            };
                            waypts.push({ location: latlng, stopover: true });
                        }
                    }
                    console.log("Way Points", waypts);
                    //creo mapa
                    const center = { lat: waypts[0].location.lat, lng: waypts[0].location.lng };
                    var map = new google.maps.Map(document.getElementById('map'), {
                        zoom: 8,
                        center: { lat: waypts[0].location.lat, lng: waypts[0].location.lng },
                        mapTypeControl: false,
                        zoomControl: true,
                        streetViewControl: false,
                    });
                    this.map = map;
                    //muestro el mapa
                    directionsDisplay.setMap(map);
                    //ventanas de informacion
                    var infoWindow = new google.maps.InfoWindow();
                    //coordenadas markers personalizados con ventana de información
                    if (this.details.length < 25) {
                        for (let i = 0; i < this.details.length; i++) {
                            let latlng = {
                                lat: parseFloat(this.details[i].latitude),
                                lng: parseFloat(this.details[i].longitude)
                            };
                            console.log("Marker Url", this.markers[i]);
                            //Adding icon to the marker
                            let icon_image = {
                                url: this.markers[i],
                                scaledSize: i == 0 ? new google.maps.Size(35, 50) : new google.maps.Size(35, 50),
                                // The origin for this image is (0, 0).
                                origin: new google.maps.Point(0, 0),
                                // The anchor for this image is the base of the flagpole at (0, 32).
                                anchor: new google.maps.Point(0, 32),
                            };
                            var marker_icon = icon_image;
                            let marker = new google.maps.Marker({
                                position: latlng,
                                map: map,
                                icon: marker_icon,
                                id: "dsd",
                                optimized: false
                            });
                            const url = "img[src='" + this.markers[0] + "']";
                            console.log("Url", url);
                            const y = document.querySelectorAll("img[src='assets/imgs/moto-new.svg']");
                            this.marker_div = document.querySelector(url);
                            this.markerPoints.push(marker);
                            // agrego la informacion de la dirección
                            console.log("Detail", this.details[i]);
                            const df = this.order.details.find(d => d.id == this.details[i].id);
                            console.log("Df", df);
                            if (df) {
                                infos.push(df.address);
                            }
                            if (i != 0) {
                                const y = this;
                                google.maps.event.addListener(marker, 'click', (function (marker, i) {
                                    return function () {
                                        const df = y.order.details.find(d => d.id == y.details[i].id);
                                        console.log("Detail", df);
                                        infoWindow.setContent(df.address);
                                        infoWindow.open(map, marker);
                                    };
                                })(marker, i));
                            }
                        }
                    }
                    // pregunto si es ida y vuelta el servicio
                    let origin, destination, return_pt;
                    let n = this.order.status_order != 31 ? (this.details.length - 1) : (waypts.length - 1);
                    console.log("Length Array", n);
                    if (this.order && this.order.round_trip == 1) {
                        console.log("Round trip");
                        origin = { lat: waypts[0].location.lat, lng: waypts[0].location.lng };
                        destination = { lat: waypts[0].location.lat, lng: waypts[0].location.lng };
                        return_pt = { lat: waypts[n].location.lat, lng: waypts[n].location.lng };
                        //punto de retorno en km y min
                        if ((this.order.status_order != 25)) {
                            if (this.order.status_order != 31) {
                                this.getDistanceMatrix(return_pt, origin);
                            }
                        }
                    }
                    else {
                        origin = { lat: waypts[0].location.lat, lng: waypts[0].location.lng };
                        destination = { lat: waypts[n].location.lat, lng: waypts[n].location.lng };
                        if (this.order.status_order != 25 && this.order.status_order != 31) {
                            this.getDistanceMatrix(origin, destination);
                        }
                    }
                    const _this = this;
                    console.log("Origin", origin, "Destination", destination);
                    console.log("Way Points", waypts);
                    if (this.details.length >= 25) {
                        //DIVIDIMOS EL DRIVER NEAR ADDRRES EN PARTES DE 25, EL CUAL ES EL LIMITE POR SOLICITUD
                        for (var i = 0, parts_driver_address = [], max = 23 - 1; i < this.details.length; i = i + max + 1)
                            parts_driver_address.push(this.details.slice(i, i + max + 1));
                        for (var i = 0, parts = [], max = 23; i < waypts.length; i = i + max)
                            parts.push(waypts.slice(i, i + max));
                        //
                        console.log('PARTES DEL WPTS', parts);
                        // AQUI RECOORO EL ARR PARTS Y HAGO LAS DISITINTAS SOLICITUDES
                        /*  **************************************************************************************** */
                        /*   *********************INICIO DEL RECORRIDO DE CADA PARTE ***************************** */
                        /*  **************************************************************************************** */
                        //Aqui definio el numero desde donde empezara el recorrido de marcadore
                        let marker_origin_number;
                        //
                        let array_routed_addresses = [];
                        for (var i = 0; i < parts.length; i++) {
                            // CALCULAR LA DIRECCION MAS LEJANA DE LA PARTE ACTUAL 
                            //
                            let origin_por_recorrido;
                            if (i == 0) {
                                origin_por_recorrido = origin;
                                console.log('SEGUNDA PARTE', origin_por_recorrido);
                            }
                            else {
                                origin_por_recorrido = {
                                    lat: Number(array_routed_addresses[array_routed_addresses.length - 1].latitude),
                                    lng: Number(array_routed_addresses[array_routed_addresses.length - 1].longitude)
                                };
                                console.log('SEGUNDA PARTE', origin_por_recorrido);
                                marker_origin_number = parts[i - 1].length;
                                //
                            }
                            console.log('marker_origin_number', marker_origin_number);
                            var waypoints = [];
                            for (var j = 0; j < parts[i].length; j++) {
                                waypoints.push(parts[i][j]);
                                console.log('I', i, 'J', j);
                            }
                            let services_options = {
                                origin: origin_por_recorrido,
                                destination: destination,
                                waypoints: waypoints,
                                travelMode: google.maps.TravelMode.DRIVING,
                            };
                            yield this.printDirections(services_options, this.map);
                            array_routed_addresses = array_routed_addresses.concat(parts_driver_address[i]);
                            // array_routed_addresses = await this.directionServiceFunction(services_options, driver,map,parts_driver_near_address[i]);
                            console.log('ESTE ES EL ARRAY ENRUTADO INICIAL LDM', array_routed_addresses);
                        }
                        for (let i = 0; i < this.details.length; i++) {
                            let latlng = {
                                lat: parseFloat(this.details[i].latitude),
                                lng: parseFloat(this.details[i].longitude)
                            };
                            console.log("Marker Url", this.markers[i]);
                            var car = "M17.402,0H5.643C2.526,0,0,3.467,0,6.584v34.804c0,3.116,2.526,5.644,5.643,5.644h11.759c3.116,0,5.644-2.527,5.644-5.644 V6.584C23.044,3.467,20.518,0,17.402,0z M22.057,14.188v11.665l-2.729,0.351v-4.806L22.057,14.188z M20.625,10.773 c-1.016,3.9-2.219,8.51-2.219,8.51H4.638l-2.222-8.51C2.417,10.773,11.3,7.755,20.625,10.773z M3.748,21.713v4.492l-2.73-0.349 V14.502L3.748,21.713z M1.018,37.938V27.579l2.73,0.343v8.196L1.018,37.938z M2.575,40.882l2.218-3.336h13.771l2.219,3.336H2.575z M19.328,35.805v-7.872l2.729-0.355v10.048L19.328,35.805z";
                            var icon = {
                                path: this.markers[0],
                                scale: .7,
                                strokeColor: 'white',
                                strokeWeight: .10,
                                fillOpacity: 1,
                                fillColor: '#404040',
                                offset: '5%',
                                // rotation: parseInt(heading[i]),
                                anchor: new google.maps.Point(10, 25) // orig 10,50 back of car, 10,0 front of car, 10,25 center of car
                            };
                            //Adding icon to the marker
                            let icon_image = {
                                url: this.markers[i],
                                scaledSize: i == 0 ? new google.maps.Size(50, 50) : new google.maps.Size(35, 50),
                                // The origin for this image is (0, 0).
                                origin: new google.maps.Point(0, 0),
                                // The anchor for this image is the base of the flagpole at (0, 32).
                                anchor: new google.maps.Point(0, 32),
                            };
                            var marker_icon = icon_image;
                            let marker = new google.maps.Marker({
                                position: latlng,
                                map: map,
                                icon: marker_icon,
                            });
                            this.markerPoints.push(marker);
                            // agrego la informacion de la dirección
                            console.log("Detail", this.details[i]);
                            const df = this.order.details.find(d => d.id == this.details[i].id);
                            console.log("Df", df);
                            if (df) {
                                infos.push(df.address);
                            }
                            if (i != 0) {
                                const y = this;
                                google.maps.event.addListener(marker, 'click', (function (marker, i) {
                                    return function () {
                                        const df = y.order.details.find(d => d.id == y.details[i].id);
                                        console.log("Detail", df);
                                        infoWindow.setContent(df.address);
                                        infoWindow.open(map, marker);
                                    };
                                })(marker, i));
                            }
                        }
                        (yield loader).dismiss();
                    }
                    if (this.details.length < 25) {
                        directionsService.route({
                            origin: origin,
                            destination: destination,
                            waypoints: waypts,
                            travelMode: google.maps.TravelMode.DRIVING
                        }, function (response, status) {
                            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                (yield loader).dismiss();
                                if (status === google.maps.DirectionsStatus.OK) {
                                    directionsDisplay.setDirections(response);
                                    console.log("center", center);
                                    console.log("Response Directions", response);
                                    _this.map.setCenter(center);
                                    if (_this.order.status_order != 25 && _this.order.status_order != 31 && _this.order.status_order != 48 && _this.order.status_order != 36) {
                                        _this.realtime.getFirebaseCollectionObject(`status_order_mobile/${_this.order.city_id}/${_this.order.customer_id}/${_this.order.id}`)
                                            .valueChanges().subscribe((res) => {
                                            if (res != null) {
                                                if (res.status_order == 31) {
                                                    _this.dismiss();
                                                    _this.clearLocals();
                                                    if (this.subscription) {
                                                        _this.subscription.unsubscribe();
                                                    }
                                                    if (this.subscription2) {
                                                        _this.subscription2.unsubscribe();
                                                    }
                                                    _this.ui.presentAlert({
                                                        mode: 'ios',
                                                        header: 'Advertencia',
                                                        message: 'La orden ha sido cancelada por el cliente',
                                                        buttons: [
                                                            {
                                                                text: 'Aceptar',
                                                                role: 'cancel',
                                                                cssClass: 'secondary',
                                                                handler: (blah) => {
                                                                }
                                                            }
                                                        ]
                                                    });
                                                    return;
                                                }
                                            }
                                        });
                                    }
                                    if (_this.order.status_order != 25 && _this.order.status_order != 31) {
                                        _this.changeAvailability(true);
                                        const detail = _this.details[0];
                                        console.log("Routes", response.routes);
                                        console.log("Overview Path", response.routes[0].overview_path);
                                        const paths = [];
                                        response.routes[0].overview_path.map(l => {
                                            paths.push({
                                                lat: l.lat(),
                                                lng: l.lng()
                                            });
                                        });
                                        console.log("Path", paths);
                                        _this.paths = paths;
                                        if (localStorage.getItem("latitude") && localStorage.getItem("longitude")) {
                                            const latitude = localStorage.getItem("latitude");
                                            const longitude = localStorage.getItem("longitude");
                                            const pos_lat_lng = new google.maps.LatLng(parseFloat(latitude), parseFloat(longitude));
                                            const ordered_paths = _this.paths.sort((a, b) => {
                                                return _this.place.calcCrow(a.lat, a.lng, latitude, longitude) - _this.place.calcCrow(b.lat, b.lng, latitude, longitude);
                                            });
                                            const net_location = _this.paths.find(p => !p.read);
                                            net_location.read = true;
                                            const next_lat_lng = new google.maps.LatLng(net_location.lat, net_location.lng);
                                            const angle = _this.rotateMarker('assets/imgs/moto-new.svg', pos_lat_lng, next_lat_lng);
                                            _this.updatePosition(_this.auth.user.id, _this.auth.vehicles.id, latitude, longitude, _this.order.id, angle);
                                        }
                                    }
                                }
                                else {
                                    _this.clearLocals();
                                    yield _this.ui.presentAlert({
                                        mode: 'ios',
                                        header: 'No se ha podido mostrar el mapa',
                                        message: status,
                                        buttons: [
                                            {
                                                text: 'Aceptar',
                                                role: 'cancel',
                                                cssClass: 'secondary',
                                                handler: (blah) => {
                                                    _this.dismiss();
                                                }
                                            },
                                        ]
                                    });
                                    console.log('Ha fallat la comunicació amb el mapa a causa de: ' + status);
                                }
                            });
                        });
                    }
                    //calcular distancia
                    if (this.order.status_order != 25 && this.order.status_order != 31) {
                        for (let i = 0; i < waypts.length; i++) {
                            let a = null, b = null;
                            if (i < waypts.length - 1) {
                                a = { lat: waypts[i].location.lat, lng: waypts[i].location.lng };
                            }
                            let j = i + 1;
                            if (j <= waypts.length - 1) {
                                b = { lat: waypts[j].location.lat, lng: waypts[j].location.lng };
                            }
                            if (a != null && b != null) {
                                this.getDistanceMatrix(a, b);
                            }
                        }
                    }
                }
                catch (e) {
                    (yield loader).dismiss();
                    // this.ui.showToast("No se pudo obtener la ubicación load MAp")
                    console.log("Error", e);
                    return;
                }
            }
            else {
                this.ui.showToast("Verifique su conexión e intentelo de nuevo", () => {
                    localStorage.removeItem("current_order");
                    this.clearLocals();
                    this.dismiss();
                });
            }
        });
    }
    printDirections(service_options, map) {
        const _this = this;
        var directionsService = new google.maps.DirectionsService;
        var directionsDisplay = new google.maps.DirectionsRenderer({ suppressMarkers: true });
        directionsDisplay.setMap(map);
        return new Promise((resolve, reject) => {
            directionsService.route(service_options, function (response, status) {
                return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                    // (await loader).dismiss()
                    if (status === google.maps.DirectionsStatus.OK) {
                        directionsDisplay.setDirections(response);
                        resolve({});
                        // console.log("center", center)
                        // _this.map.setCenter(center)
                        if (_this.order.status_order != 25 && _this.order.status_order != 31) {
                            _this.changeAvailability(true);
                        }
                    }
                    else {
                        resolve({});
                        _this.clearLocals();
                        console.log('Ha fallat la comunicació amb el mapa a causa de: ' + status);
                    }
                });
            });
        });
    }
    callANumber(number) {
        clearInterval(this.positionTracking);
        console.log("Phone", number);
        this.ui.call(number);
    }
    parseFloat(long) {
        return parseFloat(long);
    }
    getDistanceMatrix(origin, destination, loader) {
        var service = new google.maps.DistanceMatrixService();
        var _this = this;
        //calculo distancia
        service.getDistanceMatrix({
            origins: [origin],
            destinations: [destination],
            travelMode: google.maps.TravelMode.DRIVING,
            unitSystem: google.maps.UnitSystem.METRIC,
            avoidHighways: false,
            avoidTolls: false
        }, function (response, status) {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                if (status != google.maps.DistanceMatrixStatus.OK) {
                    yield _this.ui.presentAlert({
                        mode: 'ios',
                        header: 'No se pudo mostrar el mapa, verifique su conexión y reintentelo de nuevo',
                        buttons: [
                            {
                                text: 'Aceptar',
                                role: 'cancel',
                                cssClass: 'secondary',
                                handler: (blah) => {
                                    console.log('Confirm Cancel: blah');
                                    _this.dismiss();
                                }
                            }
                        ]
                    });
                    console.log("Error was: " + status);
                }
                else {
                    try {
                        const { distance, duration: dur } = response.rows[0].elements[0];
                        console.log("Response", response.rows[0].elements[0]);
                        let distance_text = response.rows[0].elements[0].distance.text;
                        console.log("Distance Text", distance_text);
                        let duration = dur.value;
                        _this.getCalculateDistance(distance_text, duration);
                    }
                    catch (e) {
                        console.log("error", e);
                    }
                }
            });
        });
    }
    getCalculateDistance(distance, duration) {
        this.distance = distance;
        // this.duration = 0;
        const y = Number(duration);
        this.duration += duration;
        let hour;
        let minutes;
        if (this.duration >= 3600) {
            hour = (this.duration / 3600).toFixed(0);
            if ((this.duration - 3600) >= 60) {
                minutes = ((this.duration - 3600) / 60).toFixed(0);
                if (minutes > 60) {
                    hour = Number(hour) + Number((minutes / 60).toFixed(0));
                    minutes -= Number((minutes / 60).toFixed(0)) * 60;
                }
            }
            else {
                minutes = (1).toFixed(0);
            }
        }
        else {
            minutes = (this.duration / 60).toFixed(0);
        }
        const hour_unit = Number(hour) == 1 ? ' hora' : this.duration < 3600 ? '' : ' horas';
        const min_unit = Number(minutes) == 1 ? ' minuto' : ' minutos';
        hour = hour ? hour : '';
        this.duration_text = hour + hour_unit + " " + minutes + min_unit;
    }
    /**
     * This method is for calculate the distance between the current location
     * and the detail is currently active
     */
    calculateAndEndDetail(item, latitude, longitude) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            this.detailActive.loading = true;
            this.detailActive.text_loading = "Calculando la distancia";
            let y = this.place.calcCrow(latitude, longitude, parseFloat(this.detailActive.latitude), parseFloat(this.detailActive.longitude));
            console.log("Distance", y);
            if (!this.equal_or_greater_than_a_kilometer) {
                y = (Number(y)) * 1000;
            }
            console.log("Y ", y);
            this.minimum_distance = this.minimum_distance ? this.minimum_distance : 1;
            this.detailActive.loading = false;
            this.detailActive.text_loading = "";
            if (y <= Number(this.minimum_distance)) {
                yield this.ui.presentAlert({
                    mode: 'ios',
                    header: '¿Desea notificar que ya llegaste a este punto?',
                    buttons: [
                        {
                            text: 'No',
                            role: 'cancel',
                            cssClass: 'secondary',
                            handler: (blah) => {
                                console.log('Confirm Cancel: blah');
                            }
                        }, {
                            text: 'Sí',
                            handler: () => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                clearInterval(this.positionTracking);
                                this.detailActive.loading = true;
                                this.detailActive.text_loading = "Enviando la información";
                                const data = new FormData();
                                const latitude = localStorage.getItem("latitude");
                                const longitude = localStorage.getItem("longitude");
                                data.append("order_detail_id", this.detailActive.id);
                                data.append("latitude", latitude);
                                data.append("longitude", longitude);
                                data.append("description", "El mensajero ya llegó al destino " + this.detailActive.address);
                                data.append("user_id", this.auth.user.id.toString());
                                this.request.post('driver/register_event', data)
                                    .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                    this.detailActive.loading = false;
                                    this.detailActive.text_loading = "";
                                    if (this.order.diligence) {
                                        this.initTimer();
                                    }
                                    item.ended = true;
                                    //Update real time timer for the client
                                    this.realtime.getFirebaseCollection(`order_detail_report/${this.order.id}/${this.detailActive.id}`)
                                        .update(Object.assign({}, item));
                                    localStorage.setItem("current_order", JSON.stringify(this.order));
                                }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                    console.log("Error", err);
                                    this.detailActive.loading = false;
                                    this.detailActive.text_loading = "";
                                }));
                            })
                        }
                    ]
                });
            }
            else {
                yield this.ui.presentAlert({
                    mode: 'ios',
                    header: 'Advertencia',
                    message: 'Para poder finalizar, <br>debes estar cerca de la dirección',
                    buttons: [
                        {
                            text: 'Aceptar',
                            role: 'cancel',
                            cssClass: 'secondary',
                            handler: (blah) => {
                                console.log('Confirm Cancel: blah');
                            }
                        }
                    ]
                });
            }
        });
    }
    end(item) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            if (this.network.getNetworkStatus().connected) {
                console.log("Detail", item);
                //Validate if the deatil isn't finished
                if (item.status != 25 && item.status != 48) {
                    //The current order is a diligence?
                    if (this.order.diligence) {
                        //The current detail isn't ended?
                        if (!this.detailActive.ended) {
                            // The proxiimity is activated?
                            if (this.proximity == 1) {
                                let loader;
                                this.detailActive.loading = true;
                                this.detailActive.text_loading = "Obteniendo tu ubicación";
                                //Getting the current user location
                                try {
                                    //Get current user position
                                    let position;
                                    //Validate if the user is on a mobile
                                    if (_capacitor_core__WEBPACK_IMPORTED_MODULE_6__["Capacitor"].platform != 'web') {
                                        //Work with background CORDOVA
                                        position = yield cordova_background_geolocation_lt__WEBPACK_IMPORTED_MODULE_14__["default"].getCurrentPosition({
                                            timeout: 30000,
                                        });
                                    }
                                    else {
                                        //Work with Capacitot PWA
                                        position = yield Geolocation.getCurrentPosition({
                                            timeout: 30000
                                        });
                                    }
                                    this.detailActive.loading = false;
                                    this.detailActive.text_loading = "";
                                    let latitude = position.coords.latitude;
                                    let longitude = position.coords.longitude;
                                    this.latitude = latitude;
                                    this.longitude = longitude;
                                    localStorage.setItem("latitude", latitude.toString());
                                    localStorage.setItem("longitude", longitude.toString());
                                    this.calculateAndEndDetail(item, latitude, longitude);
                                }
                                catch (e) {
                                    this.detailActive.loading = false;
                                    this.detailActive.text_loading = "";
                                    // (await loader).dismiss();
                                    // this.ui.showToast("Error Geolocation" + e)
                                    let latitude = localStorage.getItem("latitude");
                                    let longitude = localStorage.getItem("longitude");
                                    if (latitude && longitude) {
                                        this.latitude = latitude;
                                        this.longitude = longitude;
                                        localStorage.setItem("latitude", latitude.toString());
                                        localStorage.setItem("longitude", longitude.toString());
                                        this.calculateAndEndDetail(item, latitude, longitude);
                                    }
                                    else {
                                        yield this.ui.presentAlert({
                                            mode: 'ios',
                                            header: 'Advertencia',
                                            message: 'Su ubicación no está disponible ',
                                            buttons: [
                                                {
                                                    text: 'Aceptar',
                                                    role: 'cancel',
                                                    cssClass: 'secondary',
                                                    handler: (blah) => {
                                                        console.log('Confirm Cancel: blah');
                                                    }
                                                }
                                            ]
                                        });
                                    }
                                }
                            }
                            else {
                                yield this.ui.presentAlert({
                                    mode: 'ios',
                                    header: '¿Desea notificar que ya llegaste a este punto?',
                                    buttons: [
                                        {
                                            text: 'No',
                                            role: 'cancel',
                                            cssClass: 'secondary',
                                            handler: (blah) => {
                                                console.log('Confirm Cancel: blah');
                                            }
                                        }, {
                                            text: 'Sí',
                                            handler: () => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                clearInterval(this.positionTracking);
                                                this.detailActive.loading = true;
                                                this.detailActive.text_loading = "Enviando información";
                                                const data = new FormData();
                                                const latitude = localStorage.getItem("latitude");
                                                const longitude = localStorage.getItem("latitude");
                                                data.append("order_detail_id", this.detailActive.id);
                                                data.append("latitude", latitude.toString());
                                                data.append("longitude", longitude.toString());
                                                data.append("description", "El mensajero ya llegó al destino " + this.detailActive.address);
                                                data.append("user_id", this.auth.user.id.toString());
                                                this.request.post('driver/register_event', data)
                                                    .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                    this.detailActive.loading = false;
                                                    this.detailActive.text_loading = "";
                                                    if (this.order.diligence == 1) {
                                                        this.initTimer();
                                                    }
                                                    item.ended = true;
                                                    this.realtime.getFirebaseCollection(`order_detail_report/${this.order.id}/${this.detailActive.id}`)
                                                        .update(Object.assign({}, item));
                                                }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                    console.log("Error", err);
                                                    this.detailActive.loading = false;
                                                    this.detailActive.text_loading = "";
                                                }));
                                            })
                                        }
                                    ]
                                });
                            }
                        }
                        else {
                            yield this.ui.presentAlert({
                                mode: 'ios',
                                header: 'Finalizar',
                                buttons: [
                                    {
                                        text: 'Finalizado con éxito',
                                        cssClass: 'secondary',
                                        handler: (blah) => {
                                            this.initTimerB = false;
                                            this.sTopTimer();
                                            this.endDetail(item);
                                        }
                                    },
                                    {
                                        text: 'El cliente no se presentó',
                                        cssClass: 'secondary',
                                        handler: (blah) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                            if (this.m >= Number(this.order.time_wait)) {
                                                this.detailActive.loading = true;
                                                this.detailActive.text_loading = "Enviando información";
                                                const data = new FormData();
                                                data.append("order_detail_id", this.detailActive.id);
                                                data.append("latitude", this.latitude.toString());
                                                data.append("longitude", this.longitude.toString());
                                                data.append("wait_time", this.detailActive.timer ? this.detailActive.timer.minutes ? this.detailActive.timer.minutes.toString() : (0).toString() : (0).toString());
                                                data.append("surplus_money", this.detailActive.total_charge ? this.detailActive.total_charge.toString() : (0).toString());
                                                data.append("description", "El cliente no se presentó " + this.detailActive.address);
                                                data.append("user_id", this.auth.user.id.toString());
                                                const loader = yield this.ui.loading("Por favor espere...");
                                                this.request.post("driver/delivery_change_order_to_ineffective", data)
                                                    .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                    (yield loader).dismiss();
                                                    this.initTimerB = false;
                                                    this.sTopTimer();
                                                    this.detailActive.loading = false;
                                                    this.detailActive.text_loading = "";
                                                    item.status = 48;
                                                    item.ended = true;
                                                    let cash = 0;
                                                    localStorage.setItem("current_order", JSON.stringify(this.order));
                                                    console.log("No effective", res);
                                                    if (res.data.order_no_effective || this.getOrderDetailStatusSuccessful()) {
                                                        yield this.ui.presentAlert({
                                                            mode: 'ios',
                                                            header: 'Advertencia',
                                                            message: 'La orden no ha sido efectiva',
                                                            buttons: [
                                                                {
                                                                    text: 'Aceptar',
                                                                    role: 'cancel',
                                                                    cssClass: 'secondary',
                                                                    handler: (blah) => {
                                                                        this.clearLocals();
                                                                        this.dismiss();
                                                                    }
                                                                }
                                                            ]
                                                        });
                                                    }
                                                    //Update real time timer for the client
                                                    this.realtime.getFirebaseCollection(`order_detail_report/${this.order.id}/${item.id}`)
                                                        .update({
                                                        status: 48
                                                    });
                                                }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                    console.log("Err", err);
                                                    (yield loader).dismiss();
                                                    if (err.status == 200) {
                                                        yield this.ui.presentAlert({
                                                            mode: 'ios',
                                                            header: 'El detalle ha sido marcado como no efectivo',
                                                            buttons: [
                                                                {
                                                                    text: 'Aceptar',
                                                                    role: 'cancel',
                                                                    cssClass: 'secondary',
                                                                    handler: (blah) => {
                                                                    }
                                                                }
                                                            ]
                                                        });
                                                    }
                                                    if (err.status == 400) {
                                                        yield this.ui.presentAlert({
                                                            mode: 'ios',
                                                            header: 'Error',
                                                            message: err.error.messages[0],
                                                            buttons: [
                                                                {
                                                                    text: 'Aceptar',
                                                                    role: 'cancel',
                                                                    cssClass: 'secondary',
                                                                    handler: (blah) => {
                                                                    }
                                                                }
                                                            ]
                                                        });
                                                    }
                                                }));
                                            }
                                            else {
                                                yield this.ui.presentAlert({
                                                    mode: 'ios',
                                                    header: 'No se puede finalizar esta dirección ',
                                                    message: 'Al menos debe esperar ' + this.order.time_wait + ' minutos para poder finalizarlo',
                                                    buttons: [
                                                        {
                                                            text: 'Aceptar',
                                                            role: '',
                                                            cssClass: 'secondary',
                                                            handler: (blah) => {
                                                            }
                                                        }
                                                    ]
                                                });
                                            }
                                        })
                                    },
                                ]
                            });
                        }
                    }
                    else {
                        //The current detail isn't ended?
                        if (!this.detailActive.ended) {
                            //The proximity is activated?
                            if (this.proximity == 1) {
                                this.detailActive.loading = true;
                                this.detailActive.text_loading = "Obteniendo tu ubicación";
                                try {
                                    //Get current user position
                                    let position;
                                    //Validate if the user is on a mobile
                                    if (_capacitor_core__WEBPACK_IMPORTED_MODULE_6__["Capacitor"].platform != 'web') {
                                        //Work with background CORDOVA
                                        position = yield cordova_background_geolocation_lt__WEBPACK_IMPORTED_MODULE_14__["default"].getCurrentPosition({
                                            timeout: 30000,
                                        });
                                    }
                                    else {
                                        //Work with Capacitot PWA
                                        position = yield Geolocation.getCurrentPosition({
                                            timeout: 30000
                                        });
                                    }
                                    this.detailActive.loading = false;
                                    this.detailActive.text_loading = "";
                                    let latitude = position.coords.latitude;
                                    let longitude = position.coords.longitude;
                                    this.latitude = latitude;
                                    this.longitude = longitude;
                                    localStorage.setItem("latitude", latitude.toString());
                                    localStorage.setItem("longitude", longitude.toString());
                                    this.calculateAndEndDetail(item, latitude, longitude);
                                }
                                catch (e) {
                                    this.detailActive.loading = false;
                                    this.detailActive.text_loading = "";
                                    let latitude = localStorage.getItem("latitude");
                                    let longitude = localStorage.getItem("longitude");
                                    if (latitude && longitude) {
                                        this.latitude = latitude;
                                        this.longitude = longitude;
                                        localStorage.setItem("latitude", latitude.toString());
                                        localStorage.setItem("longitude", longitude.toString());
                                        this.calculateAndEndDetail(item, latitude, longitude);
                                    }
                                    else {
                                        yield this.ui.presentAlert({
                                            mode: 'ios',
                                            header: 'Advertencia',
                                            message: 'Su ubicación no está disponible ',
                                            buttons: [
                                                {
                                                    text: 'Aceptar',
                                                    role: 'cancel',
                                                    cssClass: 'secondary',
                                                    handler: (blah) => {
                                                        console.log('Confirm Cancel: blah');
                                                    }
                                                }
                                            ]
                                        });
                                    }
                                }
                            }
                            else {
                                yield this.ui.presentAlert({
                                    mode: 'ios',
                                    header: '¿Desea notificar que ya llegaste a este punto?',
                                    buttons: [
                                        {
                                            text: 'No',
                                            role: 'cancel',
                                            cssClass: 'secondary',
                                            handler: (blah) => {
                                                console.log('Confirm Cancel: blah');
                                            }
                                        }, {
                                            text: 'Sí',
                                            handler: () => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                clearInterval(this.positionTracking);
                                                this.detailActive.loading = true;
                                                this.detailActive.text_loading = "Enviando información";
                                                const data = new FormData();
                                                data.append("order_detail_id", this.detailActive.id);
                                                data.append("latitude", this.latitude.toString());
                                                data.append("longitude", this.longitude.toString());
                                                data.append("description", "El mensajero ya llegó al destino " + this.detailActive.address);
                                                data.append("user_id", this.auth.user.id.toString());
                                                this.request.post('driver/register_event', data)
                                                    .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                    this.detailActive.loading = false;
                                                    this.detailActive.text_loading = "";
                                                    if (this.order.diligence == 1) {
                                                        this.initTimer();
                                                    }
                                                    item.ended = true;
                                                    this.realtime.getFirebaseCollection(`order_detail_report/${this.order.id}/${this.detailActive.id}`)
                                                        .update(Object.assign({}, item));
                                                }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                    console.log("Error", err);
                                                    this.detailActive.loading = false;
                                                    this.detailActive.text_loading = "";
                                                }));
                                            })
                                        }
                                    ]
                                });
                            }
                        }
                        else {
                            yield this.ui.presentAlert({
                                mode: 'ios',
                                header: 'Finalizar',
                                buttons: [
                                    {
                                        text: 'Finalizado con éxito',
                                        cssClass: 'secondary',
                                        handler: (blah) => {
                                            this.endDetail(item);
                                        }
                                    },
                                    {
                                        text: 'El cliente no se presentó',
                                        cssClass: 'secondary',
                                        handler: (blah) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                            const data = new FormData();
                                            data.append("order_detail_id", this.detailActive.id);
                                            data.append("latitude", this.latitude.toString());
                                            data.append("longitude", this.longitude.toString());
                                            data.append("wait_time", this.detailActive.timer ? this.detailActive.timer.minutes ? this.detailActive.timer.minutes.toString() : (0).toString() : (0).toString());
                                            data.append("surplus_money", this.detailActive.total_charge ? this.detailActive.total_charge.toString() : (0).toString());
                                            data.append("description", "El cliente no se presentó " + this.detailActive.address);
                                            data.append("user_id", this.auth.user.id.toString());
                                            this.detailActive.loading = true;
                                            this.detailActive.text_loading = "Enviando información";
                                            this.request.post("driver/delivery_change_order_to_ineffective", data)
                                                .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                this.detailActive.loading = false;
                                                this.detailActive.text_loading = "";
                                                this.initTimerB = false;
                                                this.sTopTimer();
                                                item.status = 48;
                                                this.realtime.getFirebaseCollection(`order_detail_report/${this.order.id}/${item.id}`)
                                                    .update(Object.assign({}, item));
                                                localStorage.setItem("current_order", JSON.stringify(this.order));
                                                console.log("No effective", res);
                                                if (res.data.order_no_effective || this.getOrderDetailStatusSuccessful()) {
                                                    yield this.ui.presentAlert({
                                                        mode: 'ios',
                                                        header: 'Advertencia',
                                                        message: 'La orden no ha sido efectiva',
                                                        buttons: [
                                                            {
                                                                text: 'Aceptar',
                                                                role: 'cancel',
                                                                cssClass: 'secondary',
                                                                handler: (blah) => {
                                                                    this.clearLocals();
                                                                    this.dismiss();
                                                                }
                                                            }
                                                        ]
                                                    });
                                                }
                                            }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                console.log("Err", err);
                                                this.detailActive.loading = false;
                                                this.detailActive.text_loading = "";
                                                if (err.status == 200) {
                                                    yield this.ui.presentAlert({
                                                        mode: 'ios',
                                                        header: 'El detalle ha sido marcado como no efectivo',
                                                        buttons: [
                                                            {
                                                                text: 'Aceptar',
                                                                role: 'cancel',
                                                                cssClass: 'secondary',
                                                                handler: (blah) => {
                                                                }
                                                            }
                                                        ]
                                                    });
                                                }
                                                if (err.status == 400) {
                                                    yield this.ui.presentAlert({
                                                        mode: 'ios',
                                                        header: 'Error',
                                                        message: err.error.messages[0],
                                                        buttons: [
                                                            {
                                                                text: 'Aceptar',
                                                                role: 'cancel',
                                                                cssClass: 'secondary',
                                                                handler: (blah) => {
                                                                }
                                                            }
                                                        ]
                                                    });
                                                }
                                            }));
                                        })
                                    },
                                ]
                            });
                        }
                    }
                }
                else {
                    this.ui.showToast("La dirección ya está realizada en el detalle del servicio");
                }
            }
            else {
                this.ui.showToast("Verifique su conexión");
            }
        });
    }
    endTimeOrder() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const loader = yield this.ui.loading("Por favor espere...");
            const data = new FormData();
            const latitude = localStorage.getItem("latitude");
            const longitude = localStorage.getItem("longitude");
            data.append("order_detail_id", this.detailActive.id);
            data.append("latitude", latitude.toString());
            data.append("longitude", longitude.toString());
            data.append("wait_time", this.detailActive.timer ? this.detailActive.timer.minutes ? this.detailActive.timer.minutes.toString() : (0).toString() : (0).toString());
            data.append("surplus_money", this.detailActive.total_charge ? this.detailActive.total_charge.toString() : (0).toString());
            data.append("description", "Finalización " + this.detailActive.address);
            data.append("user_id", this.auth.user.id.toString());
            this.request.post("driver/end_order_detail", data)
                .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                (yield loader).dismiss();
                this.detailActive.status = 25;
                this.initTimerB = false;
                this.sTopTimer();
                localStorage.removeItem("timer");
                localStorage.removeItem(this.keyDetail);
                localStorage.removeItem("initTimer");
                localStorage.removeItem("app_close_date");
                localStorage.removeItem("app_background_date");
                console.log("Order", this.order);
                const detail = this.order.details.find(d => d == this.detailActive);
                console.log("Detail", detail);
                localStorage.setItem("current_order", JSON.stringify(this.order));
                this.save();
            }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                console.log("Error", err);
                (yield loader).dismiss();
                if (err.status == 400) {
                    yield this.ui.presentAlert({
                        mode: 'ios',
                        header: err.error.messages[0],
                    });
                }
                this.ui.showToast("Ha ocurrido un error");
            }));
        });
    }
    cancel() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            if (this.network.getNetworkStatus().connected) {
                yield this.ui.presentAlert({
                    mode: 'ios',
                    header: '¿Estás seguro que quieres cancelar la orden?',
                    buttons: [
                        {
                            text: 'No',
                            role: 'cancel',
                            cssClass: 'secondary',
                            handler: (blah) => {
                            }
                        },
                        {
                            text: 'Sí',
                            handler: (blah) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                yield this.ui.presentAlert({
                                    mode: 'ios',
                                    header: '¿Por qué desea cancelarla?',
                                    inputs: [
                                        {
                                            name: 'why',
                                            id: 'paragraph',
                                            type: 'textarea',
                                            placeholder: 'Razón',
                                            mode: 'ios'
                                        },
                                    ],
                                    buttons: [
                                        {
                                            text: 'Enviar',
                                            handler: (res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                const latitude = localStorage.getItem("latitude");
                                                const longitude = localStorage.getItem("longitude");
                                                const data = new FormData();
                                                const detail = this.detailActive ? this.detailActive : this.details[this.details.length - 1];
                                                data.append("order_detail_id", detail.id);
                                                data.append("latitude", latitude.toString());
                                                data.append("longitude", longitude.toString());
                                                data.append("description", res.why);
                                                data.append("user_id", this.auth.user.id.toString());
                                                const loader = yield this.ui.loading("Por favor espere...");
                                                this.request.post('driver/delivery_cancel_order', data).subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                    (yield loader).dismiss();
                                                    this.order.status_order = 25;
                                                    localStorage.removeItem("current_order");
                                                    this.clearLocals();
                                                    if (this.subscription) {
                                                        this.subscription.unsubscribe();
                                                    }
                                                    if (this.subscription2) {
                                                        this.subscription2.unsubscribe();
                                                    }
                                                    this.dismiss();
                                                }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                                                    (yield loader).dismiss();
                                                    yield this.ui.presentAlert({
                                                        mode: 'ios',
                                                        header: 'No se ha podido cancelar la orden',
                                                        buttons: [{
                                                                text: "Aceptar",
                                                                role: 'cancel',
                                                                handler: () => {
                                                                }
                                                            }]
                                                    });
                                                }));
                                            })
                                        },
                                    ]
                                });
                            })
                        },
                    ]
                });
            }
            else {
                this.ui.showToast("Verifique su conexión");
            }
        });
    }
    endDetail(item) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            if (this.network.getNetworkStatus().connected) {
                this.detailActive.loading = true;
                this.detailActive.text_loading = "Enviando información";
                const data = new FormData();
                data.append("order_detail_id", item.id);
                data.append("latitude", this.latitude.toString());
                data.append("longitude", this.longitude.toString());
                data.append("wait_time", this.detailActive.timer ? this.detailActive.timer.minutes ? this.detailActive.timer.minutes.toString() : (0).toString() : (0).toString());
                data.append("surplus_money", this.detailActive.total_charge ? this.detailActive.total_charge.toString() : (0).toString());
                data.append("description", "Finalización " + item.address);
                data.append("user_id", this.auth.user.id.toString());
                this.request.post("driver/end_order_detail", data)
                    .subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                    this.detailActive.loading = false;
                    this.detailActive.text_loading = "";
                    //Update real time timer for the client
                    this.realtime.getFirebaseCollection(`order_detail_report/${this.order.id}/${this.detailActive.id}`)
                        .update(Object.assign(Object.assign({}, item), { status: 25 }));
                    item.status = 25;
                    this.initTimerB = false;
                    this.sTopTimer();
                    localStorage.removeItem("timer");
                    localStorage.removeItem(this.keyDetail);
                    localStorage.removeItem("initTimer");
                    localStorage.removeItem("app_close_date");
                    localStorage.removeItem("app_background_date");
                    console.log("Order", this.order);
                    const detail = this.order.details.find(d => d == item);
                    console.log("Detail", detail);
                    if (this.order.zapp_store_order == 1) {
                        this.order.status_order = 54;
                    }
                    localStorage.setItem("current_order", JSON.stringify(this.order));
                    if (this.getOrderDetailStatusSuccessful()) {
                        if (this.order.zapp_store_order == 1) {
                            this.order.status_order = 55;
                        }
                        localStorage.setItem("current_order", JSON.stringify(this.order));
                        const amount_to_pay = this.order.payment_method.toLowerCase() == 'efectivo' ? this.order.zapp_store_order == 1 ? Number(this.order.total_zapp_store) : Number(this.order.total) : 0;
                        let message = "Método de pago: <strong>" + (this.order.payment_method) + "</strong>";
                        let cash = 0;
                        if (this.order.payment_method.toLowerCase() == 'masivo') {
                            let details = this.order.details ? this.order.details : this.order.detail;
                            details.forEach(d => {
                                cash += d.declared_value ? d.declared_value : 0;
                            });
                            message += "<br> Valor del servicio: <strong>$" + (cash) + "</strong> <br>";
                        }
                        else {
                            message += "<br> Valor del servicio: <strong>$" + (amount_to_pay) + "</strong> <br>";
                        }
                        let wait_time = 0;
                        let total_charge = 0;
                        if (this.order.details) {
                            this.order.details.map(d => {
                                wait_time += d.wait_time ? Number(d.wait_time) : 0;
                                total_charge += d.total_charge ? Number(d.total_charge) : 0;
                            });
                        }
                        else {
                            this.order.detail.map(d => {
                                wait_time += d.wait_time ? Number(d.wait_time) : 0;
                                total_charge += d.total_charge ? Number(d.total_charge) : 0;
                            });
                        }
                        if (total_charge > 0) {
                            message += " Tiempo de espera : <strong>$" + (total_charge) + "</strong> <br>";
                        }
                        total_charge = Number(total_charge);
                        const total = Number(amount_to_pay + total_charge + cash);
                        message += "Total a pagar : <strong>$" + total + "</strong>";
                        yield this.ui.presentAlert({
                            mode: 'ios',
                            header: '¡Tu viaje ha finalizado!',
                            message,
                            backdropDismiss: false,
                            buttons: [
                                {
                                    text: 'Aceptar',
                                    role: 'cancel',
                                    cssClass: 'secondary',
                                    handler: (blah) => {
                                        if (this.order.service_type_id != 3) {
                                            this.save();
                                        }
                                        else {
                                            this.order.status_order = 25;
                                            localStorage.removeItem("current_order");
                                            this.clearLocals();
                                            this.dismiss();
                                        }
                                    }
                                },
                            ]
                        });
                    }
                    else {
                        yield this.ui.presentAlert({
                            mode: 'ios',
                            header: '¡Acción Completada!',
                            message: item.address,
                            buttons: [
                                {
                                    text: 'Aceptar',
                                    role: 'cancel',
                                    cssClass: 'secondary',
                                    handler: (blah) => {
                                    }
                                },
                            ]
                        });
                    }
                }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                    console.log("Error", err);
                    this.detailActive.loading = false;
                    this.detailActive.text_loading = "";
                    if (err.status == 400) {
                        this.ui.showToast("Ha ocurrido un error " + err.error.messages[0]);
                        return;
                    }
                }));
            }
            else {
                this.ui.showToast("Verifique su conexión");
            }
        });
    }
    viewEvent(order) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            clearInterval(this.positionTracking);
            if (this.network.getNetworkStatus().connected) {
                const modal = yield this.ui.presentModal(_events_events_page__WEBPACK_IMPORTED_MODULE_5__["EventsPage"], {
                    order,
                    latitude: this.latitude,
                    longitude: this.longitude
                });
                const m = yield modal.onDidDismiss();
                if (!this.view_more && this.order.status_order != 25) {
                    // this.changeAvailability()
                }
            }
            else {
                this.ui.showToast("Verifique su conexión");
            }
        });
    }
    getOrderDetailStatusSuccessful() {
        if (this.order.details) {
            return this.order.details.every(d => d.status == 25 || d.status == 48);
        }
        return this.order.detail.every(d => d.status == 25 || d.status == 48);
    }
    save() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            if (this.getOrderDetailStatusSuccessful()) {
                console.log("Id", this.order.id);
                if (this.network.getNetworkStatus().connected) {
                    const data = new FormData();
                    // this.ui.showToast("Latitude " + this.latitude + " Longitud" + this.longitude)
                    let wait_time = 0;
                    let total_charge = 0;
                    this.order.details.map(d => {
                        wait_time += d.wait_time ? Number(d.wait_time) : 0;
                        total_charge += d.total_charge ? Number(d.total_charge) : 0;
                    });
                    const latitude = localStorage.getItem("latitude");
                    const longitude = localStorage.getItem("longitude");
                    data.append("order_id", this.order.id);
                    data.append("latitude", latitude.toString());
                    data.append("longitude", longitude.toString());
                    data.append("description", "Finalización Servicio");
                    data.append("user_id", this.auth.user.id.toString());
                    data.append("wait_time", wait_time.toString());
                    data.append("surplus_money", total_charge.toString());
                    const loader = this.ui.loading("Por favor espere...");
                    this.request.post("driver/end_service", data).subscribe((res) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                        (yield loader).dismiss();
                        clearInterval(this.positionTracking);
                        this.order.status_order = 25;
                        localStorage.setItem('end_order_id', String(this.order.id));
                        // localStorage.removeItem("latitude");
                        // localStorage.removeItem("longitude");
                        localStorage.removeItem("current_order");
                        this.clearLocals();
                        this.ui.showToast("Orden finalizada.", () => {
                            this.dismiss();
                            if (this.order.zapp_store_order == 1) {
                                const obj = {
                                    data: {
                                        status: "completed"
                                    }
                                };
                                //?option=update_order&id=2638
                                //wc_order_id
                                this.request
                                    .post(`?option=update_order&id=${this.order.wc_order_id}`, obj, true)
                                    .subscribe((res) => {
                                    console.log("Res", res);
                                }, err => {
                                    if (err.status == 400) {
                                        this.ui.showToast(err.error.message);
                                    }
                                });
                            }
                        });
                    }), (err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                        console.log("Error", err);
                        (yield loader).dismiss();
                        this.ui.showToast(err.error.messages[0]);
                    }));
                }
                else {
                    this.ui.showToast("Verifique su conexión");
                }
            }
            else {
                this.ui.showToast("Debe finalizar cada una de las direcciones antes de finalizar la orden");
            }
        });
    }
    startWatchingPosition(mode) {
        // if (this.auth.user.available != 0) {
        //   if (Capacitor.platform !== 'web') {
        //     // this.backgroundMode.isScreenOff((status) => {
        //     //   if (status) {
        //     //     if (this.auth.user != null && this.auth.user.available != 0) {
        //     //       this.backgroundMode.wakeUp()
        //     //     }
        //     //   }
        //     // })
        //   }
        //   this.id = Geolocation.watchPosition({
        //     // enableHighAccuracy: true
        //   }, async (position, err) => {
        //     if (!err) {
        //       const prev_latitude = this.latitude;
        //       const prev_longitude = this.longitude;
        //       localStorage.setItem("latitude", position.coords.latitude.toString());
        //       localStorage.setItem("longitude", position.coords.longitude.toString());
        //       this.details.shift();
        //       this.details.unshift({
        //         latitude: position.coords.latitude,
        //         longitude: position.coords.longitude
        //       });
        //       this.latitude = position.coords.latitude;
        //       this.longitude = position.coords.longitude;
        //       localStorage.setItem("latitude", position.coords.latitude.toString());
        //       localStorage.setItem("longitude", position.coords.longitude.toString());
        //       // find address from lat lng
        //       //check if the network is available
        //       console.log("GPS", position.coords);
        //       this.latitude = position.coords.latitude.toString();
        //       this.longitude = position.coords.longitude.toString();
        //       console.log("Latitude 2", this.latitude)
        //       console.log("Longitud 2", this.longitude);
        //       this.details.shift();
        //       this.details.unshift({
        //         latitude: position.coords.latitude,
        //         longitude: position.coords.longitude
        //       })
        //       console.log("Marker Points", this.markerPoints)
        //       // this.map.setCenter({ lat: parseFloat(this.details[0].latitude), lng: parseFloat(this.details[0].longitude) },)
        //       let latlng = new google.maps.LatLng(parseFloat(this.latitude), parseFloat(this.longitude))
        //       let prev_lat_lng = new google.maps.LatLng(parseFloat(prev_latitude), parseFloat(prev_longitude));
        //       console.log("Prev latitude", prev_latitude, "Prev longitude", prev_longitude)
        //       console.log("latitude", this.latitude, "longitude", this.longitude)
        //       var marker_icon = {
        //         url: this.markers[0], // url
        //         scaledSize: new google.maps.Size(35, 50), // size
        //         // origin: new google.maps.Point(0, 0), // origin
        //         // anchor: new google.maps.Point(0, 0) // anchor 
        //       };
        //       this.markerPoints[0].setPosition(latlng);
        //       const url = "img[src='" + this.markers[0] + "']";
        //       console.log("Url", url)
        //       const y: any = document.querySelectorAll(url);
        //       const marker_div: any = document.querySelector(url)
        //       console.log("img", marker_div)
        //       const ordered_paths = this.paths.sort((a, b) => {
        //         return this.place.calcCrow(a.lat, a.lng, position.coords.latitude, position.coords.longitude) - this.place.calcCrow(b.lat, b.lng, position.coords.latitude, position.coords.longitude)
        //       })
        //       const net_location = this.paths.find(p => !p.read);
        //       net_location.read = true;
        //       const next_lat_lng = new google.maps.LatLng(net_location.lat, net_location.lng);
        //       const heading = position.coords.heading ? position.coords.heading : 0;
        //       if(localStorage.getItem("bearing")){
        //         const bearing= localStorage.getItem("bearing");
        //         localStorage.setItem("bearing_used", bearing);
        //       }
        //       localStorage.setItem("bearing", heading.toString())
        //       const angle = this.rotateMarker(this.markers[0], prev_lat_lng, latlng, heading);
        //       this.updatePosition(this.auth.user.id, this.auth.vehicles.id, position.coords.latitude, position.coords.longitude, this.order.id, angle)
        //       // Haptics.vibrate()  
        //       if (localStorage.getItem("current_order")) {
        //         const order = JSON.parse(localStorage.getItem("current_order"));
        //         if (order) {
        //           let path = 'order_gps/' + order.id + '/' + this.auth.user.id;
        //           this.db.object(path).update({
        //             order: order.id,
        //             key: this.auth.user.id,
        //             vehicleId: this.auth.vehicles.id,
        //             lat: position.coords.latitude,
        //             lng: position.coords.longitude,
        //             oldLat: position.coords.latitude,
        //             oldLng: position.coords.longitude,
        //             // last_active: Date.now(),
        //             code: environment.VERSION_NAME
        //           });
        //           this.realtime.getFirebaseCollectionObject('order_history_reports/' + order.id + '/' + this.auth.user.id)
        //             .valueChanges().pipe(take(1)).subscribe((value: any) => {
        //               // this.ui.showToast("Locations " + "Latitude " + lat + " Longitud " + lng + "Hora" + Date.now())
        //               if (value === null) {
        //                 const locations = [{
        //                   lat: position.coords.latitude, lng: position.coords.longitude, created_at: Date.now()
        //                 }]
        //                 // this.ui.showToast("Locations " + "Latitude " + lat + " Longitud " + lng + "Hora" + Date.now())
        //                 this.realtime.getFirebaseCollectionObject('order_history_reports/' + order.id + '/' + this.auth.user.id).set({
        //                   order,
        //                   key: this.auth.user.id,
        //                   user_id: this.auth.user.id,
        //                   locations,
        //                   code: environment.VERSION_NAME
        //                 });
        //               } else {
        //                 // update
        //                 let locations: any[] = value.locations;
        //                 locations.push({
        //                   lat: position.coords.latitude, lng: position.coords.longitude, created_at: Date.now()
        //                 })
        //                 this.realtime.getFirebaseCollectionObject('order_history_reports/' + order.id + '/' + this.auth.user.id)
        //                   .update({
        //                     order,
        //                     key: this.auth.user.id,
        //                     locations,
        //                     code: environment.VERSION_NAME
        //                   });
        //               }
        //             })
        //         }
        //       }
        //     } else {
        //       // this.ui.showToast("Entré en el error watch position" + err);
        //       await Geolocation.clearWatch({ id: this.id });
        //       this.startWatchingPosition();
        //       if (Capacitor.platform !== 'web') {
        //         await this.backgroundGeolocation.removeAllListeners();
        //       }
        //       this.initializeBackgroundGeolocation()
        //     }
        //   });
        // }
        // setTimeout(async () => {
        //   await Geolocation.clearWatch({ id: this.id });
        //   this.startWatchingPosition();
        //   if (Capacitor.platform !== 'web') {
        //     await this.backgroundGeolocation.removeAllListeners();
        //   }
        //   this.initializeBackgroundGeolocation()
        // }, 240000)
    }
    initializeBackgroundGeolocation() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            // if (this.auth.user.available != 0) {
            //   if (Capacitor.platform !== 'web') {
            //     const config: BackgroundGeolocationConfig = {
            //       desiredAccuracy: 10,
            //       stationaryRadius: 2,
            //       distanceFilter: 1,
            //       // startOnBoot: true,
            //       debug: false, //  enable this hear sounds for background-geolocation life-cycle.
            //       stopOnTerminate: false, // enable this to clear background location settings when the app terminates
            //     };
            //     this.backgroundGeolocation.configure(config)
            //       .then(() => {
            //         this.backgroundGeolocation.on(BackgroundGeolocationEvents.location)
            //           .subscribe((location: BackgroundGeolocationResponse) => {
            //             console.log(location);
            //             const prev_latitude = localStorage.getItem("latitude");
            //             const prev_longitude = localStorage.getItem("longitude");
            //             // Haptics.vibrate()
            //             localStorage.setItem("latitude", location.latitude.toString());
            //             localStorage.setItem("longitude", location.longitude.toString());
            //             this.realtime.getUserGeolocation().update({
            //               key: this.auth.user.id,
            //               user_id: this.auth.user.id,
            //               latitude: location.latitude.toString(),
            //               longitude: location.longitude.toString(),
            //               city_id: this.auth.person.city_id,
            //               state_id: Number(this.auth.person.state_id),
            //               level_id : Number(this.auth.user.level_id),
            //               // last_active: Date.now(),
            //               available: this.auth.user.available,
            //               driver_name: this.auth.user.name,
            //               transport_type_id: this.auth.vehicles.transport_type_id,
            //             });
            //             const latitude = localStorage.getItem("latitude");
            //             const longitude = localStorage.getItem("longitude");
            //             const lat_lng = new google.maps.LatLng(parseFloat(prev_latitude), parseFloat(prev_longitude));
            //             const pos_lat_lng = new google.maps.LatLng(parseFloat(latitude), parseFloat(longitude));
            //             this.markerPoints[0].setPosition(pos_lat_lng);
            //             const ordered_paths = this.paths.sort((a, b) => {
            //               return this.place.calcCrow(a.lat, a.lng, latitude, longitude) - this.place.calcCrow(b.lat, b.lng, latitude, longitude)
            //             })
            //             const net_location = this.paths.find(p => !p.read);
            //             net_location.read = true;
            //             const next_lat_lng = new google.maps.LatLng(net_location.lat, net_location.lng);
            //             const bearing_ = location.bearing ? location.bearing : 0
            //             if(localStorage.getItem("bearing")){
            //               const bearing= localStorage.getItem("bearing");
            //               localStorage.setItem("bearing_used", bearing);
            //             }
            //             localStorage.setItem("bearing", bearing_.toString())
            //             const angle = this.rotateMarker(this.markers[0], lat_lng, pos_lat_lng, bearing_);
            //             this.updatePosition(this.auth.user.id, this.auth.vehicles.id, location.latitude, location.longitude, this.order.id, angle)
            //             // IMPORTANT:  You must execute the finish method here to inform the native plugin that you're finished,
            //             // and the background-task may be completed.  You must do this regardless if your operations are successful or not.
            //             // IF YOU DON'T, ios will CRASH YOUR APP for spending too much time in the background.
            //             this.backgroundGeolocation.finish(); // FOR IOS ONLY
            //           });
            //       });
            //     // start recording location
            //     this.backgroundGeolocation.start();
            //     setTimeout(async () => {
            //       // if(this.backgroundGeolocation.c)
            //       this.backgroundGeolocation.removeAllListeners()
            //       this.initializeBackgroundGeolocation()
            //     }, 240000)
            //   }
            // }
        });
    }
    rotateMarker(url_image, prev_position, position, angle_to_rotate) {
        const url = `img[src='${url_image}']`;
        console.log("Url", url);
        const y = document.querySelectorAll(url);
        const marker_div = document.querySelector(url);
        console.log("img", marker_div);
        let angle = 0;
        if (y[0]) { // when it hasn't loaded, it's null
            console.log("Encontrado Marker");
            if (typeof angle_to_rotate == 'undefined') {
                const angle = google.maps.geometry.spherical.computeHeading(prev_position, position);
                const actual_angle = angle - 180;
                console.log("Angle", angle);
                console.log("Actual Angle", actual_angle);
                y[0].style.transform = `rotate(${actual_angle}deg)`;
                return actual_angle;
            }
            else {
                let bearing = 0;
                if (localStorage.getItem("bearing_used")) {
                    bearing = parseFloat(localStorage.getItem("bearing_used"));
                }
                else {
                    bearing = 180;
                }
                const actual_angle = angle_to_rotate - (bearing);
                y[0].style.transform = `rotate(${actual_angle}deg)`;
                return actual_angle;
            }
        }
        else {
            console.log("Image Angle Not Found");
        }
        return angle;
    }
    changeAvailability(firstTime) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            // clearInterval(this.positionTracking);
            this.startWatchingPosition();
            this.initializeBackgroundGeolocation();
            _capacitor_core__WEBPACK_IMPORTED_MODULE_6__["Network"].addListener('networkStatusChange', (status) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                console.log("Network status changed", status);
                localStorage.setItem("network_status", JSON.stringify(status));
                if (status.connected) {
                    Geolocation.clearWatch({ id: this.id });
                    if (_capacitor_core__WEBPACK_IMPORTED_MODULE_6__["Capacitor"].platform !== 'web') {
                        // await this.backgroundGeolocation.removeAllListeners();
                    }
                    this.startWatchingPosition();
                    this.initializeBackgroundGeolocation();
                }
            }));
        });
    }
    updatePosition(user_id, vehicleId, lat, lng, order, angle) {
        let path = 'order_gps/' + order + '/' + user_id;
        this.subscription = this.db.object(path).valueChanges().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["take"])(1))
            .subscribe((snapshot) => {
            if (localStorage.getItem("current_order")) {
                console.log("Este es el console.log de update position");
                if (this.network.getNetworkStatus().connected) {
                    if (snapshot === null) {
                        const obj_create = {
                            order,
                            key: user_id,
                            vehicleId,
                            lat,
                            lng,
                            oldLat: lat,
                            oldLng: lng,
                            angle,
                            // last_active: Date.now(),
                            code: src_environments_environment__WEBPACK_IMPORTED_MODULE_12__["environment"].VERSION_NAME
                        };
                        if (typeof angle != 'undefined') {
                            obj_create.angle = angle;
                        }
                        this.db.object(path).set(obj_create);
                    }
                    else {
                        // update
                        const obj_update = {
                            order,
                            key: user_id,
                            vehicleId,
                            lat,
                            lng,
                            oldLat: snapshot.lat,
                            oldLng: snapshot.lng,
                            // last_active: Date.now(),
                            code: src_environments_environment__WEBPACK_IMPORTED_MODULE_12__["environment"].VERSION_NAME
                        };
                        if (typeof angle != 'undefined') {
                            obj_update.angle = angle;
                        }
                        this.db.object(path).update(obj_update);
                    }
                }
                else {
                }
            }
            else {
                this.subscription.unsubscribe();
            }
            console.log(snapshot);
            // insert if not exists
        });
        this.subscription2 = this.realtime.getFirebaseCollectionObject('order_history_reports/' + order + '/' + user_id)
            .valueChanges().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["take"])(1)).subscribe((value) => {
            // this.ui.showToast("Locations " + "Latitude " + lat + " Longitud " + lng + "Hora" + Date.now())
            if (localStorage.getItem("current_order")) {
                if (value === null) {
                    const locations = [{
                            lat, lng, created_at: Date.now()
                        }];
                    // this.ui.showToast("Locations " + "Latitude " + lat + " Longitud " + lng + "Hora" + Date.now())
                    this.realtime.getFirebaseCollectionObject('order_history_reports/' + order + '/' + user_id).set({
                        order,
                        key: user_id,
                        user_id,
                        locations,
                        code: src_environments_environment__WEBPACK_IMPORTED_MODULE_12__["environment"].VERSION_NAME
                    });
                }
                else {
                    // update
                    let locations = value.locations;
                    locations.push({
                        lat, lng, created_at: Date.now()
                    });
                    this.realtime.getFirebaseCollectionObject('order_history_reports/' + order + '/' + user_id).update({
                        order,
                        key: user_id,
                        locations,
                        code: src_environments_environment__WEBPACK_IMPORTED_MODULE_12__["environment"].VERSION_NAME
                    });
                }
            }
            else {
                this.subscription2.unsubscribe();
            }
        });
    }
};
ViewDetailPage.ctorParameters = () => [
    { type: src_app_services_ui_service__WEBPACK_IMPORTED_MODULE_2__["UiService"] },
    { type: src_app_services_request_service__WEBPACK_IMPORTED_MODULE_3__["RequestService"] },
    { type: src_app_services_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] },
    { type: _angular_fire_database__WEBPACK_IMPORTED_MODULE_7__["AngularFireDatabase"] },
    { type: src_app_services_place_service__WEBPACK_IMPORTED_MODULE_9__["PlaceService"] },
    { type: _services_network_status_service__WEBPACK_IMPORTED_MODULE_10__["NetworkStatusService"] },
    { type: src_app_services_realtime_service__WEBPACK_IMPORTED_MODULE_11__["RealtimeService"] },
    { type: src_app_services_days_service__WEBPACK_IMPORTED_MODULE_13__["DaysService"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_15__["Platform"] },
    { type: _ionic_native_foreground_service_ngx__WEBPACK_IMPORTED_MODULE_16__["ForegroundService"] }
];
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], ViewDetailPage.prototype, "order", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], ViewDetailPage.prototype, "orders", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], ViewDetailPage.prototype, "latLng", void 0);
ViewDetailPage = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-view-detail',
        template: Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! raw-loader!./view-detail.page.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/screens/forms/view-detail/view-detail.page.html")).default,
        styles: [Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! ./view-detail.page.scss */ "./src/app/screens/forms/view-detail/view-detail.page.scss")).default]
    })
], ViewDetailPage);



/***/ }),

/***/ "./src/app/services/auth.service.ts":
/*!******************************************!*\
  !*** ./src/app/services/auth.service.ts ***!
  \******************************************/
/*! exports provided: AuthService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthService", function() { return AuthService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _request_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./request.service */ "./src/app/services/request.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _angular_fire_database__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/fire/database */ "./node_modules/@angular/fire/__ivy_ngcc__/fesm2015/angular-fire-database.js");
/* harmony import */ var _angular_fire_auth___WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/fire/auth/ */ "./node_modules/@angular/fire/__ivy_ngcc__/fesm2015/angular-fire-auth.js");
/* harmony import */ var _storage_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./storage.service */ "./src/app/services/storage.service.ts");
/* harmony import */ var cordova_background_geolocation_lt__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! cordova-background-geolocation-lt */ "./node_modules/cordova-background-geolocation-lt/src/ionic/index.js");









let AuthService = class AuthService {
    constructor(request, router, db, afAuth, storage) {
        this.request = request;
        this.router = router;
        this.db = db;
        this.afAuth = afAuth;
        this.storage = storage;
        this.setData();
    }
    login(email, password) {
        const body = { email: email, password: password };
        return this.request.post('login', body);
    }
    setData() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            if (localStorage.getItem('data')) {
                const data = JSON.parse(localStorage.getItem('data'));
                const { user, person, token, role, vehicles, collection_id } = data;
                this.collection_id = collection_id;
                this.user = user;
                this.person = person;
                this.token = token;
                this.role = role;
                this.vehicles = vehicles;
            }
        });
    }
    register(userInfo) {
        console.log(userInfo);
        return rxjs__WEBPACK_IMPORTED_MODULE_4__["Observable"].create(observer => {
            this.afAuth.createUserWithEmailAndPassword(userInfo.email, userInfo.password).then((authData) => {
                // update driver object
                console.log(authData);
                userInfo.uid = authData.user.uid;
                this.afAuth.currentUser.then(res => {
                    res.updateProfile({
                        displayName: userInfo.name,
                    });
                    this.db.object('drivers/' + userInfo.uid).update(userInfo);
                    observer.next();
                });
            }).catch((error) => {
                if (error) {
                    observer.error(error);
                }
            });
        });
    }
    setVehicles(vehicles) {
        this.vehicles = Object.assign(Object.assign({}, this.vehicles), vehicles);
        const data = JSON.parse(localStorage.getItem('data'));
        data.vehicles = this.vehicles;
        localStorage.setItem("data", JSON.stringify(data));
    }
    setPerson(person) {
        this.person = Object.assign(Object.assign({}, this.person), person);
        const data = JSON.parse(localStorage.getItem('data'));
        data.person = this.person;
        localStorage.setItem("data", JSON.stringify(data));
    }
    setUser(user) {
        this.user = Object.assign(Object.assign({}, this.user), user);
        const data = JSON.parse(localStorage.getItem('data'));
        data.user = this.user;
        localStorage.setItem("data", JSON.stringify(data));
    }
    getFirebaseUser() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const user = yield this.afAuth.currentUser;
        });
    }
    logOut() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            localStorage.removeItem("isLoggedIn");
            localStorage.removeItem("data");
            localStorage.removeItem("current_order");
            localStorage.removeItem("current_status");
            localStorage.removeItem("current_status");
            localStorage.removeItem("currentDocuments");
            localStorage.removeItem("longitude");
            localStorage.removeItem("latitude");
            localStorage.removeItem("watchPositionId");
            localStorage.removeItem("current_massive_order");
            //current_massive_order
            this.router.navigate(['/login']);
            this.person = null;
            this.role = null;
            this.token = "";
            this.user = null;
            this.vehicles = null;
            if (cordova_background_geolocation_lt__WEBPACK_IMPORTED_MODULE_8__["default"]) {
                yield cordova_background_geolocation_lt__WEBPACK_IMPORTED_MODULE_8__["default"].stop();
            }
            // this.companies = null
        });
    }
};
AuthService.ctorParameters = () => [
    { type: _request_service__WEBPACK_IMPORTED_MODULE_2__["RequestService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] },
    { type: _angular_fire_database__WEBPACK_IMPORTED_MODULE_5__["AngularFireDatabase"] },
    { type: _angular_fire_auth___WEBPACK_IMPORTED_MODULE_6__["AngularFireAuth"] },
    { type: _storage_service__WEBPACK_IMPORTED_MODULE_7__["StorageService"] }
];
AuthService = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    })
], AuthService);



/***/ }),

/***/ "./src/app/services/background.service.ts":
/*!************************************************!*\
  !*** ./src/app/services/background.service.ts ***!
  \************************************************/
/*! exports provided: BackgroundService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BackgroundService", function() { return BackgroundService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @capacitor/core */ "./node_modules/@capacitor/core/dist/esm/index.js");
/* harmony import */ var _realtime_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./realtime.service */ "./src/app/services/realtime.service.ts");
/* harmony import */ var _auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./auth.service */ "./src/app/services/auth.service.ts");
/* harmony import */ var _network_status_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./network-status.service */ "./src/app/services/network-status.service.ts");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _ionic_native_foreground_service_ngx__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ionic-native/foreground-service/ngx */ "./node_modules/@ionic-native/foreground-service/__ivy_ngcc__/ngx/index.js");
/* harmony import */ var src_environments_environment__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! src/environments/environment */ "./src/environments/environment.ts");



const { App, BackgroundTask } = _capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Plugins"];






let BackgroundService = class BackgroundService {
    constructor(realtime, auth, network, zone, foregroundService) {
        this.realtime = realtime;
        this.auth = auth;
        this.network = network;
        this.zone = zone;
        this.foregroundService = foregroundService;
    }
    /**
     * Start Background MOde
     * This function make the app can work work as a background service
     * It take 3 steps, if one failed the others won't execute anything
     * 1. Check if the user is available
     * 2. Check if the device has FOREGROUND_SERVICE permission
     * 3. Enable the background mode
     */
    startBackgroundMode() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            App.addListener("appStateChange", (state) => {
                clearInterval(this.interval);
                // if (Capacitor.platform !== 'web') {
                // }
                // if (this.geoLocationSubscription) {
                //   this.geoLocationSubscription.unsubscribe()
                // }
                console.log("Background mode");
                if (!state.isActive) {
                    if (this.auth.user != null && this.auth.user.available != 0) {
                        if (_capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Capacitor"].platform !== 'web') {
                            console.log("Foreground START");
                            this.foregroundService.start('GPS Running', 'Background Service');
                        }
                        else {
                        }
                    }
                }
                else {
                    if (_capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Capacitor"].platform !== 'web') {
                        this.foregroundService.stop();
                    }
                }
            });
        });
    }
    startWatchingPosition(mode) {
        // if (this.watchPositionId) {
        //   Geolocation.clearWatch({ id: this.watchPositionId });
        // }
        // if (this.geoLocationSubscription) {
        //   this.geoLocationSubscription.unsubscribe();
        // }
        if (this.auth.user != null && this.auth.user.available != 0) {
            this.watchPositionId = _capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Geolocation"].watchPosition({
                enableHighAccuracy: true
            }, (position, err) => {
                console.log("This is my position", mode);
                localStorage.setItem("latitude", position.coords.latitude.toString());
                localStorage.setItem("longitude", position.coords.longitude.toString());
                this.geoLocationSubscription = this.realtime.getUserGeolocation().valueChanges().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["take"])(1))
                    .subscribe((snapshot) => {
                    console.log(snapshot);
                    console.log("This is my position 2", mode);
                    if (snapshot === null) {
                        this.realtime.getUserGeolocation().set({
                            key: this.auth.user.id,
                            user_id: this.auth.user.id,
                            latitude: position.coords.latitude.toString(),
                            longitude: position.coords.longitude.toString(),
                            city_id: this.auth.person.city_id,
                            state_id: Number(this.auth.person.state_id),
                            level_id: Number(this.auth.user.level_id),
                            // last_active: Date.now(),
                            available: this.auth.user.available,
                            driver_name: this.auth.user.name,
                            transport_type_id: this.auth.vehicles.transport_type_id,
                            code: src_environments_environment__WEBPACK_IMPORTED_MODULE_8__["environment"].VERSION_NAME
                        });
                    }
                    else {
                        // update
                        this.realtime.getUserGeolocation().update({
                            key: this.auth.user.id,
                            user_id: this.auth.user.id,
                            latitude: position.coords.latitude.toString(),
                            longitude: position.coords.longitude.toString(),
                            city_id: this.auth.person.city_id,
                            state_id: Number(this.auth.person.state_id),
                            level_id: Number(this.auth.user.level_id),
                            // last_active: Date.now(),
                            available: this.auth.user.available,
                            driver_name: this.auth.user.name,
                            transport_type_id: this.auth.vehicles.transport_type_id,
                            code: src_environments_environment__WEBPACK_IMPORTED_MODULE_8__["environment"].VERSION_NAME
                        });
                    }
                });
            });
        }
    }
    /**
     * Stop Background Mode
     * This is necessary when the user isn't available
     */
    stopBackgroundMode() {
        clearInterval(this.interval);
        if (this.watchPositionId) {
        }
        if (this.geoLocationSubscription) {
            this.geoLocationSubscription.unsubscribe();
        }
        if (_capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Capacitor"].platform !== 'web') {
            // if (this.backgroundMode.isActive) {
            //   this.backgroundMode.setEnabled(false);
            //   this.backgroundMode.disable();
            // }
            // this.foregroundService.stop();
        }
    }
    checkStatus() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
        });
    }
};
BackgroundService.ctorParameters = () => [
    { type: _realtime_service__WEBPACK_IMPORTED_MODULE_3__["RealtimeService"] },
    { type: _auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] },
    { type: _network_status_service__WEBPACK_IMPORTED_MODULE_5__["NetworkStatusService"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"] },
    { type: _ionic_native_foreground_service_ngx__WEBPACK_IMPORTED_MODULE_7__["ForegroundService"] }
];
BackgroundService = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    })
], BackgroundService);



/***/ }),

/***/ "./src/app/services/days.service.ts":
/*!******************************************!*\
  !*** ./src/app/services/days.service.ts ***!
  \******************************************/
/*! exports provided: DaysService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DaysService", function() { return DaysService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/esm/index.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);




let DaysService = class DaysService {
    constructor() {
        /**
      * Esta función dcompara si la fecha dada es igual a la de hoy
      * @access public
      * @param {string} someDate fecha
      * @return string
      */
        this.isToday = (someDate) => {
            const today = new Date();
            return someDate.getDate() == today.getDate() &&
                someDate.getMonth() == today.getMonth() &&
                someDate.getFullYear() == today.getFullYear();
        };
    }
    formatDays(days) {
        let daysS = 0;
        let months = 0;
        let years = 0;
        if (days >= 365) {
            years = Number((days / 365).toFixed(0));
            let cal_months = days - (365 * years);
            if (cal_months > 0) {
                if (cal_months >= 30) {
                    months = Number(((cal_months / 30)).toFixed(0));
                    let calcul_day = cal_months - (30 * months);
                    daysS = calcul_day;
                }
            }
            else {
            }
        }
        else {
            if (days >= 30) {
                months = Number((days / 30).toFixed(0));
                daysS = days - (30 * months);
            }
            else {
                daysS = days;
            }
        }
        let format_days = "";
        format_days += years > 0 ? years + (years == 1 ? ' año ' : ' años ') : '';
        format_days += months > 0 ? months + (months == 1 ? ' mes ' : ' meses ') : '';
        format_days += daysS > 0 ? daysS + (daysS == 1 ? ' día ' : ' días ') : '';
        return format_days;
    }
    formatDaysWithDate(date) {
        let today = new Date();
        let date_of = new Date(date);
        let difference = Math.floor(((today.getTime() - date_of.getTime()) / (1000 * 60 * 60 * 24)));
        return this.formatDays(difference);
    }
    getHourDiff(initial_hour, final_hour, format) {
        var entryHour = moment__WEBPACK_IMPORTED_MODULE_3__(initial_hour, 'hh:mm ');
        var exitHour = moment__WEBPACK_IMPORTED_MODULE_3__(final_hour, 'hh:mm ');
        const duration = moment__WEBPACK_IMPORTED_MODULE_3__["duration"](exitHour.diff(entryHour));
        if (!format) {
            return duration.asHours();
        }
        if (format == "hours") {
            return duration.asHours();
        }
        else {
            if (format == "minutes") {
                return duration.asMinutes();
            }
            else {
                if (format == "seconds") {
                    return duration.asSeconds();
                }
                else {
                    if (format == "miliseconds") {
                        return duration.asMilliseconds();
                    }
                }
            }
        }
    }
    /**
  * Esta función compara dos fechas dadas y retorna si es igual
  * @access public
  * @param {Date} date1 fecha uno
  * @param {Date} date2 fecha dos
  *
  * @return boolean
  */
    isEqualDate(date1, date2) {
        return date1.getDate() == date2.getDate() &&
            date1.getMonth() == date2.getMonth() &&
            date1.getFullYear() == date2.getFullYear();
    }
    /**
   * Esta función suma un número de días a una fecha dada
   * @access public
   * @param {Date} date fecha uno
   * @param {number} numberOfDays número de días
   *
   * @return Date
   */
    addDays(date, numberOfDays) {
        console.log("Date", date);
        const dateMoment = Object(date_fns__WEBPACK_IMPORTED_MODULE_2__["add"])(date, {
            days: numberOfDays
        });
        return dateMoment;
    }
    /**
   * Esta función suma un número de minutos a una fecha dada
   * @access public
   * @param {Date} date fecha
   * @param {number} numberOfMinutes número de minutos
   *
   * @return Date
   */
    substractMinutes(date, numberOfMinutes) {
        const dateMoment = Object(date_fns__WEBPACK_IMPORTED_MODULE_2__["subMinutes"])(date, numberOfMinutes);
        return dateMoment;
    }
    /**
  * Esta función suma un número de horas a una fecha dada
  * @access public
  * @param {Date} date fecha
  * @param {number} numberOfHours número de horas
  *
  * @return Date
  */
    substractHours(date, numberOfHours) {
        const dateMoment = Object(date_fns__WEBPACK_IMPORTED_MODULE_2__["subHours"])(date, numberOfHours);
        return dateMoment;
    }
};
DaysService = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    })
], DaysService);



/***/ }),

/***/ "./src/app/services/fcm.service.ts":
/*!*****************************************!*\
  !*** ./src/app/services/fcm.service.ts ***!
  \*****************************************/
/*! exports provided: FcmService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FcmService", function() { return FcmService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @capacitor/core */ "./node_modules/@capacitor/core/dist/esm/index.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../environments/environment */ "./src/environments/environment.ts");






const { PushNotifications, Haptics } = _capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Plugins"];
const { Network, LocalNotifications } = _capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Plugins"];
let FcmService = class FcmService {
    constructor(router) {
        this.router = router;
        this.notifications = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
    }
    initPush() {
        if (_capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Capacitor"].platform !== 'web') {
            if (_capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Capacitor"].platform == "android") {
                /**
                 * Build the notification channel with high imporatnce
                 */
                const notificationChannel = {
                    id: 'pop-notifications',
                    name: 'Pop notifications',
                    description: 'Pop notifications',
                    importance: 5,
                    visibility: 1,
                    vibration: true,
                    lights: true
                };
                LocalNotifications.createChannel(notificationChannel);
                PushNotifications.createChannel(notificationChannel);
            }
            this.registerPush();
        }
    }
    playAudio() {
        if (_environments_environment__WEBPACK_IMPORTED_MODULE_5__["environment"].PLAY_AUDIO_ON_REQUEST == true) {
            this.audio = new Audio(_environments_environment__WEBPACK_IMPORTED_MODULE_5__["environment"].AUDIO_PATH);
            this.audio.play();
        }
    }
    stopAudio() {
        this.audio.pause();
    }
    registerPush() {
        PushNotifications.requestPermission().then((permission) => {
            if (permission.granted) {
                // Register with Apple / Google to receive push via APNS/FCM
                PushNotifications.register();
            }
            else {
                // No permission for push granted
            }
        });
        PushNotifications.addListener('registration', (data) => {
            //console.log('My token: ' + JSON.stringify(data));
            localStorage.setItem('fcmId', data.value);
        });
        PushNotifications.addListener('registrationError', (error) => {
            console.log('Error: ' + JSON.stringify(error));
        });
        PushNotifications.addListener('pushNotificationReceived', (notification) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const isPushNotification = !!notification.title || !!notification.body;
            // if this is a push notification received when the app is in the foreground on Android
            if (isPushNotification) {
                // We schedule a LocalNotification 1 second later since Capacitor for Android doesn't show anything in this case
                LocalNotifications.schedule({
                    notifications: [{
                            title: notification.title,
                            body: notification.body,
                            id: new Date().getUTCMilliseconds(),
                            schedule: {
                                at: new Date(Date.now() + 1000)
                            },
                            extra: notification.data,
                            channelId: 'pop-notifications'
                        }]
                });
            }
            Haptics.vibrate();
            setTimeout(() => {
                this.stopAudio();
            }, 3000);
            this.notifications.next(notification);
            this.notifications = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
            console.log('Push received: ' + JSON.stringify(notification));
        }));
        PushNotifications.addListener('pushNotificationActionPerformed', (notification) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const data = notification.notification.data;
            console.log('Action performed: ' + JSON.stringify(notification.notification));
            if (data.detailsId) {
                // this.router.navigateByUrl(`/home/${data.detailsId}`);
                this.router.navigateByUrl('tabs/home');
            }
        }));
    }
};
FcmService.ctorParameters = () => [
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] }
];
FcmService = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    })
], FcmService);



/***/ }),

/***/ "./src/app/services/geolocation.service.ts":
/*!*************************************************!*\
  !*** ./src/app/services/geolocation.service.ts ***!
  \*************************************************/
/*! exports provided: GeolocationService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeolocationService", function() { return GeolocationService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @capacitor/core */ "./node_modules/@capacitor/core/dist/esm/index.js");
/* harmony import */ var _ionic_native_diagnostic_ngx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ionic-native/diagnostic/ngx */ "./node_modules/@ionic-native/diagnostic/__ivy_ngcc__/ngx/index.js");
/* harmony import */ var _ui_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui.service */ "./src/app/services/ui.service.ts");






let GeolocationService = class GeolocationService {
    constructor(diagnostic, ui) {
        this.diagnostic = diagnostic;
        this.ui = ui;
    }
    /**
   * Funcion parao obtener la position actual del usuario
   *
   * Este metodo se encarga de obtener las coordenadas del usuario en sesion,
   *  una vez obtenido, se almacena en el localStorage para su posterior uso.
   * En caso de que falle se obtiene la ultima posicion almacenada en localStorage
   * en caso de que la haya
   *
   * @access public
   * @param  GeolocationOptions options?  , los cuales son los criterios para obtener la posicion
   * @return Retorna una promesa de tipo GeolocationPosition
   */
    getCurrentPosition(options) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            let enabledHighAccuracy;
            let availableHighAccuracy;
            let enabledNetwork;
            let availableNetwork;
            if (_capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Capacitor"].platform !== 'web') {
                enabledNetwork = yield this.diagnostic.isNetworkLocationAvailable();
                availableHighAccuracy = yield this.diagnostic.isNetworkLocationEnabled();
                enabledHighAccuracy = yield this.diagnostic.isGpsLocationEnabled();
                availableHighAccuracy = yield this.diagnostic.isGpsLocationAvailable();
            }
            else {
                enabledNetwork = true;
                availableHighAccuracy = true;
                enabledHighAccuracy = true;
                availableHighAccuracy = true;
            }
            console.log(` Geolocation Enabled Network ${enabledNetwork} available Network ${availableNetwork}`);
            console.log(` Geolocation Enabled ${enabledHighAccuracy} available ${availableHighAccuracy}`);
            let geolocation;
            if (enabledNetwork || enabledHighAccuracy) {
                try {
                    console.log(` Geolocation is Enabled `);
                    let position;
                    if (options) {
                        position = yield _capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Geolocation"].getCurrentPosition(options);
                    }
                    else {
                        position = yield _capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Geolocation"].getCurrentPosition();
                    }
                    console.log(` Geolocation is Enabled Latitude`, position.coords.latitude, `Geolocation is Enabled Longitude`, position.coords.longitude);
                    localStorage.setItem("latitude", position.coords.latitude.toString());
                    localStorage.setItem("longitude", position.coords.longitude.toString());
                    return position;
                }
                catch (e) {
                    console.log(` Geolocation Catch Error`);
                    if (localStorage.getItem("latitude") && localStorage.getItem("longitude")) {
                        console.log(` Geolocation Catch Error Have Position`);
                        return {
                            coords: {
                                latitude: parseFloat(localStorage.getItem("latitude")),
                                longitude: parseFloat(localStorage.getItem("longitude")),
                                accuracy: 0
                            },
                            timestamp: Date.now()
                        };
                    }
                    else {
                        console.log(` Geolocation Catch Error Don´t Have Position`);
                        this.showNotInStock();
                    }
                }
            }
            else {
                this.showNotInStock();
            }
        });
    }
    showModal(obj) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            //const modal = await this.ui.presentModal(CloseShopPage, obj, ["modal-xs"])
        });
    }
    showNotInStock() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            /*
            const obj: ModalOptions = {
              image: 'assets/imgs/location-animation.gif',
              title: "Por favor, active su ubicación",
              color_message: "#eb445a",
              color_title: "#5952fd"
              //  color_title : "#eb445a"
            }*/
            //this.showModal(obj);
        });
    }
    isLocationEnabled() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            let enabled;
            let available;
            if (_capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Capacitor"].platform !== 'web') {
                enabled = yield this.diagnostic.isGpsLocationEnabled();
                available = yield this.diagnostic.isGpsLocationAvailable();
            }
            else {
                enabled = false;
                available = false;
            }
            console.log(`Enabled ${enabled} available ${available}`);
            if (!enabled) {
                this.showNotInStock();
            }
            else {
            }
        });
    }
};
GeolocationService.ctorParameters = () => [
    { type: _ionic_native_diagnostic_ngx__WEBPACK_IMPORTED_MODULE_3__["Diagnostic"] },
    { type: _ui_service__WEBPACK_IMPORTED_MODULE_4__["UiService"] }
];
GeolocationService = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    })
], GeolocationService);



/***/ }),

/***/ "./src/app/services/network-status.service.ts":
/*!****************************************************!*\
  !*** ./src/app/services/network-status.service.ts ***!
  \****************************************************/
/*! exports provided: NetworkStatusService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NetworkStatusService", function() { return NetworkStatusService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @capacitor/core */ "./node_modules/@capacitor/core/dist/esm/index.js");
/* harmony import */ var _ui_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui.service */ "./src/app/services/ui.service.ts");




const { Network } = _capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Plugins"];
let NetworkStatusService = class NetworkStatusService {
    constructor(ui) {
        this.ui = ui;
    }
    // getNetworkStatus = (subscription: Observable<Object>, res: any, err: any) {
    // }
    getNetworkStatusSubscription(subscription, res, err, loader) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const networkStatus = JSON.parse(localStorage.getItem("network_status"));
            if (networkStatus.connected) {
                subscription.subscribe(res, err);
                if (networkStatus.connectionType.includes("slow")) {
                    this.ui.showToast("Su conexión es lenta podría tomar un tiempo");
                }
            }
            else {
                if (loader) {
                    (yield loader).dismiss();
                }
                this.ui.presentAlert({
                    mode: 'ios',
                    header: 'La conexión no está disponible',
                    buttons: [
                        {
                            text: 'Aceptar',
                            role: 'cancel',
                            cssClass: 'secondary',
                            handler: (blah) => {
                            }
                        },
                    ]
                });
            }
        });
    }
    getNetworkStatus() {
        const networkStatus = JSON.parse(localStorage.getItem("network_status"));
        return networkStatus;
    }
};
NetworkStatusService.ctorParameters = () => [
    { type: _ui_service__WEBPACK_IMPORTED_MODULE_3__["UiService"] }
];
NetworkStatusService = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    })
], NetworkStatusService);



/***/ }),

/***/ "./src/app/services/photo.service.ts":
/*!*******************************************!*\
  !*** ./src/app/services/photo.service.ts ***!
  \*******************************************/
/*! exports provided: PhotoService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PhotoService", function() { return PhotoService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @capacitor/core */ "./node_modules/@capacitor/core/dist/esm/index.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js");
/* harmony import */ var _ui_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui.service */ "./src/app/services/ui.service.ts");






const { FilePicker } = _capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Plugins"];
const { Camera } = _capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Plugins"];
let PhotoService = class PhotoService {
    constructor(actionSheetCtrl, ui) {
        this.actionSheetCtrl = actionSheetCtrl;
        this.ui = ui;
        this.imageSubject = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"]({});
    }
    takePicture(source) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            try {
                localStorage.setItem("takingPhoto", "yes");
                const image = yield Camera.getPhoto({
                    quality: 60,
                    allowEditing: false,
                    correctOrientation: true,
                    promptLabelPhoto: 'Elegir de la galería',
                    promptLabelPicture: 'Tomar foto',
                    resultType: _capacitor_core__WEBPACK_IMPORTED_MODULE_2__["CameraResultType"].DataUrl,
                    source
                });
                this.imageSubject.next(image);
                localStorage.removeItem("takingPhoto");
                this.imageSubject.complete();
                this.imageSubject = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"]({});
            }
            catch (e) {
                console.log("Error", e);
                localStorage.removeItem("takingPhoto");
                this.imageSubject.complete();
                this.imageSubject = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"]({});
            }
        });
    }
    selectImageSource() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const buttons = [
                {
                    text: 'Tomar foto',
                    icon: 'camera',
                    handler: () => {
                        this.takePicture(_capacitor_core__WEBPACK_IMPORTED_MODULE_2__["CameraSource"].Camera);
                    }
                },
                {
                    text: 'Elegir galeria',
                    icon: 'image',
                    handler: () => {
                        this.takePicture(_capacitor_core__WEBPACK_IMPORTED_MODULE_2__["CameraSource"].Photos);
                    }
                },
                {
                    text: 'Cancelar',
                    icon: 'close',
                    role: 'cancel',
                    handler: () => {
                        this.imageSubject.complete();
                        this.imageSubject = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"]({});
                    }
                }
            ];
            // Only allow file selection inside a browser
            const actionSheet = yield this.actionSheetCtrl.create({
                mode: 'ios',
                header: 'Escoger',
                buttons
            });
            yield actionSheet.present();
        });
    }
    dataUrlToBlob(dataUrl) {
        const arr = dataUrl.split(',');
        const mime = arr[0].match(/:(.*?);/)[1];
        const bstr = atob(arr[1]);
        let n = bstr.length;
        const u8arr = new Uint8Array(n);
        while (n--) {
            u8arr[n] = bstr.charCodeAt(n);
        }
        return new Blob([u8arr], { type: mime });
    }
    blobToDataUrl(blob) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader;
            reader.onerror = reject;
            reader.onload = () => {
                resolve(reader.result);
            };
            reader.readAsDataURL(blob);
        });
    }
    getFileImage(dataUrl, name, format, useFormat) {
        const type = useFormat ? format : `image/${format}`;
        console.log("Type", type);
        const options = {
            type,
        };
        return new File([this.dataUrlToBlob(dataUrl)], name, { type });
    }
    getFileImageByBlob(blob, name, format, useFormat) {
        const type = useFormat ? format : `image/${format}`;
        console.log("Type", type);
        const options = {
            type
        };
        return new File([blob], name, options);
    }
};
PhotoService.ctorParameters = () => [
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["ActionSheetController"] },
    { type: _ui_service__WEBPACK_IMPORTED_MODULE_5__["UiService"] }
];
PhotoService = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    })
], PhotoService);



/***/ }),

/***/ "./src/app/services/place.service.ts":
/*!*******************************************!*\
  !*** ./src/app/services/place.service.ts ***!
  \*******************************************/
/*! exports provided: PlaceService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlaceService", function() { return PlaceService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");


let PlaceService = class PlaceService {
    constructor() {
    }
    //This function takes in latitude and longitude of two location and returns the distance between them as the crow flies (in km)
    calcCrow(lat1, lon1, lat2, lon2) {
        let R = 6371; // km
        let dLat = this.toRad(lat2 - lat1);
        let dLon = this.toRad(lon2 - lon1);
        lat1 = this.toRad(lat1);
        lat2 = this.toRad(lat2);
        let a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
            Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);
        let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        let d = R * c;
        return d;
    }
    // Converts numeric degrees to radians
    toRad(value) {
        return value * Math.PI / 180;
    }
    // set locality from geocoder result
    // @param results: Geocoder array results
    setLocalityFromGeocoder(results) {
        let component;
        let address;
        for (let i = 0; i < results.length; i++) {
            address = results[i];
            for (let j = 0; j < address.address_components.length; j++) {
                component = address.address_components[j];
                if (component.types[0] == 'locality') {
                    // if (component.types[0] == 'administrative_area_level_2') {
                    // escape firebase characters
                    let locality = component.short_name.replace(/[\%\.\#\$\/\[\]]/, '_');
                    this.setLocality(locality);
                    return locality;
                }
            }
        }
        return false;
    }
    setLocality(locality) {
        return this.locality = locality;
    }
    getLocality() {
        return this.locality;
    }
};
PlaceService = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    })
], PlaceService);



/***/ }),

/***/ "./src/app/services/realtime.service.ts":
/*!**********************************************!*\
  !*** ./src/app/services/realtime.service.ts ***!
  \**********************************************/
/*! exports provided: RealtimeService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RealtimeService", function() { return RealtimeService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_fire_database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/fire/database */ "./node_modules/@angular/fire/__ivy_ngcc__/fesm2015/angular-fire-database.js");
/* harmony import */ var _storage_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./storage.service */ "./src/app/services/storage.service.ts");
/* harmony import */ var _auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./auth.service */ "./src/app/services/auth.service.ts");





let RealtimeService = class RealtimeService {
    constructor(db, storage, auth) {
        this.db = db;
        this.storage = storage;
        this.auth = auth;
    }
    getFirebaseCollection(path) {
        return this.db.object(path);
    }
    getFirebaseCollectionObject(path) {
        return this.db.object(path);
    }
    getFirebaseCollectionList(path) {
        return this.db.list(path);
    }
    getMassivesOrders() {
        //massive_new_order
        console.log("Root", `massive_new_order/${this.auth.person.city_id}/${this.auth.user.id}`);
        return this.getFirebaseCollection(`massive_new_order/${this.auth.person.city_id}/${this.auth.user.id}`);
    }
    getStatus() {
        return this.db.object(`status_user/${this.auth.user.id}`);
    }
    getNewOrder() {
        console.log(`new_orders/${this.auth.person.city_id}/${this.auth.user.id}`);
        this.appsRef = this.db.object(`new_orders/${this.auth.person.city_id}/${this.auth.user.id}`);
        return this.appsRef;
    }
    getUserGeolocation() {
        console.log(`driver_geolocation/${this.auth.person.city_id}/${this.auth.user.id}`);
        return this.db.object(`driver_geolocation/${this.auth.person.city_id}/${this.auth.user.id}`);
    }
};
RealtimeService.ctorParameters = () => [
    { type: _angular_fire_database__WEBPACK_IMPORTED_MODULE_2__["AngularFireDatabase"] },
    { type: _storage_service__WEBPACK_IMPORTED_MODULE_3__["StorageService"] },
    { type: _auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }
];
RealtimeService = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    })
], RealtimeService);



/***/ }),

/***/ "./src/app/services/request.service.ts":
/*!*********************************************!*\
  !*** ./src/app/services/request.service.ts ***!
  \*********************************************/
/*! exports provided: RequestService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RequestService", function() { return RequestService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/http.js");
/* harmony import */ var _environments_environment_prod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../environments/environment.prod */ "./src/environments/environment.prod.ts");
/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @capacitor/core */ "./node_modules/@capacitor/core/dist/esm/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");






const { Network } = _capacitor_core__WEBPACK_IMPORTED_MODULE_4__["Plugins"];
let RequestService = class RequestService {
    constructor(http) {
        this.http = http;
    }
    getHeader(data_header) {
        const data = localStorage.getItem('data');
        let header = {};
        if (data) {
            const y = JSON.parse(data);
            const options = {
                Authorization: `Bearer ${y.token}`
            };
            if (data_header) {
                Object.keys(data_header).forEach(key => {
                    options[key] = data_header[key];
                });
            }
            const headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"](options);
            header = {
                headers
            };
            console.log("Header", header);
        }
        return header;
    }
    get(url, useSecondUrl) {
        let url_base = !useSecondUrl ? _environments_environment_prod__WEBPACK_IMPORTED_MODULE_3__["environment"].BASEURL : _environments_environment_prod__WEBPACK_IMPORTED_MODULE_3__["environment"].SECONDARY_URL;
        console.log("Url", `${url_base}${url}`);
        return this.http.get(`${url_base}${url}`, this.getHeader()).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["timeout"])(30000));
    }
    post(url, body, useSecondUrl, headers) {
        let url_base = !useSecondUrl ? _environments_environment_prod__WEBPACK_IMPORTED_MODULE_3__["environment"].BASEURL : _environments_environment_prod__WEBPACK_IMPORTED_MODULE_3__["environment"].SECONDARY_URL;
        console.log("Url", `${url_base}${url}`);
        return this.http.post(`${url_base}${url}`, body, this.getHeader(headers)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["timeout"])(30000));
    }
    put(url, body, useSecondUrl) {
        let url_base = !useSecondUrl ? _environments_environment_prod__WEBPACK_IMPORTED_MODULE_3__["environment"].BASEURL : _environments_environment_prod__WEBPACK_IMPORTED_MODULE_3__["environment"].SECONDARY_URL;
        return this.http.put(`${url_base}${url}`, body, this.getHeader()).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["timeout"])(10000));
    }
    delete(url, useSecondUrl) {
        let url_base = !useSecondUrl ? _environments_environment_prod__WEBPACK_IMPORTED_MODULE_3__["environment"].BASEURL : _environments_environment_prod__WEBPACK_IMPORTED_MODULE_3__["environment"].SECONDARY_URL;
        return this.http.delete(`${url_base}${url}`, this.getHeader()).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["timeout"])(10000));
    }
};
RequestService.ctorParameters = () => [
    { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"] }
];
RequestService = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    })
], RequestService);



/***/ }),

/***/ "./src/app/services/storage.service.ts":
/*!*********************************************!*\
  !*** ./src/app/services/storage.service.ts ***!
  \*********************************************/
/*! exports provided: StorageService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StorageService", function() { return StorageService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @capacitor/core */ "./node_modules/@capacitor/core/dist/esm/index.js");



const { Storage } = _capacitor_core__WEBPACK_IMPORTED_MODULE_2__["Plugins"];
let StorageService = class StorageService {
    constructor() { }
    // JSON "set" 
    setObject(key, jsonOject) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            yield Storage.set({
                key: key,
                value: JSON.stringify(jsonOject)
            });
        });
    }
    // JSON "get" 
    getObject(key) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const ret = yield Storage.get({ key });
            return JSON.parse(ret.value);
        });
    }
    setItem(key, value) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            yield Storage.set({ key, value });
        });
    }
    getItem(key) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const { value } = yield Storage.get({ key });
            return value;
        });
    }
    removeItem(key) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            yield Storage.remove({ key });
        });
    }
    keys() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const { keys } = yield Storage.keys();
            return keys;
        });
    }
    clear() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            yield Storage.clear();
        });
    }
};
StorageService = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    })
], StorageService);



/***/ }),

/***/ "./src/app/services/ui.service.ts":
/*!****************************************!*\
  !*** ./src/app/services/ui.service.ts ***!
  \****************************************/
/*! exports provided: UiService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UiService", function() { return UiService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js");
/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @capacitor/core */ "./node_modules/@capacitor/core/dist/esm/index.js");
/* harmony import */ var _ionic_native_call_number_ngx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic-native/call-number/ngx */ "./node_modules/@ionic-native/call-number/__ivy_ngcc__/ngx/index.js");





let UiService = class UiService {
    constructor(loadingController, toastController, alertController, modalController, callNumber, actionSheetCtrl) {
        this.loadingController = loadingController;
        this.toastController = toastController;
        this.alertController = alertController;
        this.modalController = modalController;
        this.callNumber = callNumber;
        this.actionSheetCtrl = actionSheetCtrl;
    }
    loading(message, duration) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const loader = yield this.loadingController.create({
                mode: 'ios',
                message,
                //Set the maximum duration to load the current loader
                duration: duration || 10000
            });
            //Finish the loader no matter if it not finish the operation
            setTimeout(() => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
                (loader).dismiss();
            }), 10000);
            yield loader.present();
            return loader;
        });
    }
    loadingDissmiss() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            (yield this.loader).dismiss();
        });
    }
    call(number) {
        this.callNumber.callNumber(number, true)
            .then(res => console.log('Launched dialer!', res))
            .catch((err) => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            yield this.presentAlert({
                mode: 'ios',
                header: 'No se ha podido iniciar la llamada',
                buttons: [
                    {
                        text: 'Aceptar',
                        role: 'cancel',
                        cssClass: 'secondary',
                        handler: (blah) => {
                        }
                    },
                ]
            });
        }));
    }
    presentActionSheet(header, buttons) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            // Only allow file selection inside a browser
            const actionSheet = yield this.actionSheetCtrl.create({
                mode: 'ios',
                header,
                buttons
            });
            yield actionSheet.present();
            return actionSheet;
        });
    }
    presentAlert(opttion) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const alert = yield this.alertController.create(Object.assign(Object.assign({}, opttion), { mode: 'ios' }));
            yield alert.present();
            return alert;
        });
    }
    presentModal(component, properties, cssClass = 'my-custom-class') {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const modal = yield this.modalController.create({
                component,
                cssClass,
                componentProps: properties
            });
            yield modal.present();
            return modal;
        });
    }
    dismiss(obj) {
        // using the injected ModalController this page
        // can "dismiss" itself and optionally pass back data
        this.modalController.dismiss({
            obj
        });
    }
    showToast(message, action) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const toast = yield this.toastController.create({ message, duration: 3000, position: 'bottom', });
            toast.present();
            if (action) {
                toast.onDidDismiss().then(() => {
                    action();
                });
            }
        });
    }
    fileRead() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            let contents = yield _capacitor_core__WEBPACK_IMPORTED_MODULE_3__["Filesystem"].readFile({
                path: 'secrets/text.txt',
                directory: _capacitor_core__WEBPACK_IMPORTED_MODULE_3__["FilesystemDirectory"].Documents,
                encoding: _capacitor_core__WEBPACK_IMPORTED_MODULE_3__["FilesystemEncoding"].UTF8
            });
            console.log(contents);
        });
    }
};
UiService.ctorParameters = () => [
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["LoadingController"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["ToastController"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["AlertController"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["ModalController"] },
    { type: _ionic_native_call_number_ngx__WEBPACK_IMPORTED_MODULE_4__["CallNumber"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["ActionSheetController"] }
];
UiService = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    })
], UiService);



/***/ }),

/***/ "./src/environments/environment.prod.ts":
/*!**********************************************!*\
  !*** ./src/environments/environment.prod.ts ***!
  \**********************************************/
/*! exports provided: environment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "environment", function() { return environment; });
/**
 * Before
 * apiKey: "AIzaSyAwimUJ6tDpOR2-y8jAzXBFgGs_Qanbcss",
    authDomain: "zapp-logistica-45aac.firebaseapp.com",
    databaseURL: "https://zapp-logistica-45aac.firebaseio.com",
    projectId: "zapp-logistica-45aac",
    storageBucket: "zapp-logistica-45aac.appspot.com",
    messagingSenderId: "838612036195",
    appId: "1:838612036195:web:ca521abe7c13b296866656",
    measurementId: "G-Z1K2M86CG4"
 */
/**
 * This is the update
 * apiKey: "AIzaSyBQiPuLL1oaU8qehYLOaASCE7thzXGiYus",
    authDomain: "zapplogistica-prod.firebaseapp.com",
    projectId: "zapplogistica-prod",
    storageBucket: "zapplogistica-prod.appspot.com",
    messagingSenderId: "355844923625",
    appId: "1:355844923625:web:a22c07e65d7078449e5078",
    measurementId: "G-SFPNWYRG8J"
 */
const environment = {
    production: true,
    BASEURL: 'https://zappstore.com.co/zapp-back/public/api/',
    SECONDARY_URL: 'https://zappstore.com.co/nuevo/wp-api/',
    firebaseConfig: {
        apiKey: "AIzaSyATr-dHHfoI0fz07QM8JrYqlFT23hmONUE",
        authDomain: "zapplogistica-76f1a.firebaseapp.com",
        databaseURL: "https://zapplogistica-76f1a-default-rtdb.firebaseio.com/",
        projectId: "zapplogistica-76f1a",
        storageBucket: "zapplogistica-76f1a.appspot.com",
        messagingSenderId: "109401557615",
        appId: "1:109401557615:web:6c2a68e7e0c5cccd4a9b9a",
        measurementId: "G-S93W4WF67T"
    },
    PLAY_AUDIO_ON_REQUEST: true,
    AUDIO_PATH: "./assets/audio/notification.mpeg",
    VERSION_NAME: "2.1.7.1",
    PLAY_STORE_URL: "https://play.google.com/store/apps/details?id=com.zapp.driver.app"
};


/***/ }),

/***/ "./src/environments/environment.ts":
/*!*****************************************!*\
  !*** ./src/environments/environment.ts ***!
  \*****************************************/
/*! exports provided: environment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "environment", function() { return environment; });
// This file can be replaced during build by using the `fileReplacements` array.
// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.
// The list of file replacements can be found in `angular.json`.
const environment = {
    production: false,
    BASEURL: 'https://appewc.com/zapp/zapp-back/public/api/',
    SECONDARY_URL: 'https://zappstore.com.co/nuevo/wp-api/',
    firebaseConfig: {
        apiKey: "AIzaSyDa-PwG6r2LrtKHjwRWoB5MgnBoZaYT3Wk",
        authDomain: "zapp-logistica-dev.firebaseapp.com",
        databaseURL: "https://zapp-logistica-dev.firebaseio.com",
        projectId: "zapp-logistica-dev",
        storageBucket: "zapp-logistica-dev.appspot.com",
        messagingSenderId: "408995173697",
        appId: "1:408995173697:web:3cabbfbbf09e3e922ffdc0",
        measurementId: "G-PQS21Z48YG"
    },
    PLAY_AUDIO_ON_REQUEST: true,
    AUDIO_PATH: "./assets/audio/notification.mpeg",
    VERSION_NAME: "2.1.6",
    PLAY_STORE_URL: "https://play.google.com/store/apps/details?id=com.zapp.driver.app"
};
/*
 * For easier debugging in development mode, you can import the following file
 * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.
 *
 * This import should be commented out in production mode because it will have a negative impact
 * on performance if an error is thrown.
 */
// import 'zone.js/dist/zone-error';  // Included with Angular CLI.


/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ "./node_modules/@angular/platform-browser-dynamic/__ivy_ngcc__/fesm2015/platform-browser-dynamic.js");
/* harmony import */ var _ionic_pwa_elements_loader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ionic/pwa-elements/loader */ "./node_modules/@ionic/pwa-elements/loader/index.es2017.mjs");
/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/app.module */ "./src/app/app.module.ts");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./environments/environment */ "./src/environments/environment.ts");





if (_environments_environment__WEBPACK_IMPORTED_MODULE_4__["environment"].production) {
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["enableProdMode"])();
}
Object(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__["platformBrowserDynamic"])().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_3__["AppModule"])
    .catch(err => console.log(err));
//pwa elements
Object(_ionic_pwa_elements_loader__WEBPACK_IMPORTED_MODULE_2__["defineCustomElements"])(window);


/***/ }),

/***/ 0:
/*!***************************!*\
  !*** multi ./src/main.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! /Users/masprilla/DocumentosMiguel/Proyectos/zapp/zapp-driver-app-rpenaloza/src/main.ts */"./src/main.ts");


/***/ })

},[[0,"runtime","vendor"]]]);
//# sourceMappingURL=main-es2015.js.map