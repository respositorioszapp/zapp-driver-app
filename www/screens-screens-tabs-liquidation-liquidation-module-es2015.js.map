{"version":3,"sources":["./node_modules/capacitor-blob-writer/dist/plugin.esm.js","./src/app/screens/screens-tabs/liquidation/liquidation.page.html","./src/app/enums/mime-types.enum.ts","./src/app/screens/screens-tabs/liquidation/liquidation-routing.module.ts","./src/app/screens/screens-tabs/liquidation/liquidation.module.ts","./src/app/screens/screens-tabs/liquidation/liquidation.page.scss","./src/app/screens/screens-tabs/liquidation/liquidation.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAwE;;AAExE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;;AAEA,OAAO,aAAa,GAAG,uDAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,kBAAkB,MAAM;AAC7B;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;;AAEA,4BAA4B,yDAAS;AACrC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAiB;AACjB;AACA;AACA;AACA,oBAAoB,qBAAqB,GAAG,MAAM;AAClD,gBAAgB,uDAAO;AACvB,gBAAgB,uDAAO;AACvB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B,0BAA0B,2BAA2B;AACrD;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;AACL;;AAEqB;AACrB;;;;;;;;;;;;;AChIA;AAAe,2cAA4Y,gCAAgC,soBAAsoB,iCAAiC,ihBAAihB,wBAAwB,mHAAmH,E;;;;;;;;;;;;ACA9vD;AAAA;AAAA,IAAY,SAEX;AAFD,WAAY,SAAS;IACjB,wFAA2E;AAC/E,CAAC,EAFW,SAAS,KAAT,SAAS,QAEpB;;;;;;;;;;;;;;;;;;;;ACFwC;A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","file":"screens-screens-tabs-liquidation-liquidation-module-es2015.js","sourcesContent":["import { Plugins, registerWebPlugin, WebPlugin } from '@capacitor/core';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nconst { Filesystem } = Plugins;\r\n// By choosing a chunk size which is a multiple of 3, we avoid a bug in\r\n// Filesystem.appendFile, only on the web platform, which corrupts files by\r\n// inserting Base64 padding characters within the file. See\r\n// https://github.com/ionic-team/capacitor-plugins/issues/649.\r\nconst chunkSize = 3 * 128 * 1024;\r\nfunction arrayBufferToBase64(buffer) {\r\n    const bytes = new Uint8Array(buffer);\r\n    let binary = '';\r\n    let i = 0;\r\n    while (i < bytes.byteLength) {\r\n        binary += String.fromCharCode(bytes[i]);\r\n        i++;\r\n    }\r\n    return btoa(binary);\r\n}\r\nfunction append(directory, path, data) {\r\n    if (data.size === 0) {\r\n        return Promise.resolve();\r\n    }\r\n    return new Response(data.slice(0, chunkSize)).arrayBuffer().then(function (buffer) {\r\n        return Filesystem.appendFile({\r\n            directory,\r\n            path,\r\n            data: arrayBufferToBase64(buffer),\r\n        });\r\n    }).then(function () {\r\n        return append(directory, path, data.slice(chunkSize));\r\n    });\r\n}\r\nfunction writeFileViaBridge(directory, path, data, recursive) {\r\n    // create & truncate file\r\n    return Filesystem.writeFile({\r\n        directory,\r\n        path,\r\n        recursive,\r\n        data: '',\r\n    }).then(function ({ uri }) {\r\n        // write file incrementally to be enconomical with memory\r\n        return append(directory, path, data).then(function () {\r\n            return uri;\r\n        });\r\n    });\r\n}\r\nvar writeFileViaBridge$1 = Object.freeze(writeFileViaBridge);\n\nclass BlobWriterWeb extends WebPlugin {\r\n    constructor() {\r\n        super({\r\n            name: 'BlobWriter',\r\n            platforms: ['web']\r\n        });\r\n    }\r\n    getConfig() {\r\n        const err = new Error('Not implemented for web');\r\n        err.code = 'NOT_IMPLEMENTED';\r\n        return Promise.reject(err);\r\n    }\r\n}\r\nconst BlobWriter = new BlobWriterWeb();\r\nregisterWebPlugin(BlobWriter);\r\nfunction writeFile(options) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            const [{ baseUrl, authToken }, { uri }] = yield Promise.all([\r\n                Plugins.BlobWriter.getConfig(),\r\n                Plugins.Filesystem.getUri({\r\n                    path: options.path,\r\n                    directory: options.directory,\r\n                }),\r\n            ]);\r\n            const absolutePath = uri.replace('file://', '');\r\n            const queryString = options.recursive ? '?recursive=true' : '';\r\n            const url = baseUrl + absolutePath + queryString;\r\n            const { status } = yield fetch(url, {\r\n                headers: { authorization: authToken },\r\n                method: 'put',\r\n                body: options.data,\r\n            });\r\n            if (status !== 204) {\r\n                throw new Error('unexpected HTTP status: ' + status);\r\n            }\r\n            return { uri };\r\n        }\r\n        catch (err) {\r\n            if (typeof options.fallback === 'function'\r\n                ? options.fallback(err)\r\n                : options.fallback !== false) {\r\n                if (err.code !== 'NOT_IMPLEMENTED') {\r\n                    console.error(err);\r\n                }\r\n                return writeFileViaBridge$1(options.directory, options.path, options.data, options.recursive).then(function (uri) {\r\n                    return { uri };\r\n                });\r\n            }\r\n            throw err;\r\n        }\r\n    });\r\n}\n\nexport { writeFile };\n//# sourceMappingURL=plugin.esm.js.map\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Liquidación</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"row justify-content-center\\\">\\n    <div class=\\\"col-sm-6 ion-text-center w-50\\\" style=\\\"padding: 0 10px\\\" >\\n      <h4 class=\\\"ion-text-center\\\">Fecha Inicio\\n      </h4>\\n      <ion-item class=\\\"input-text date\\\" (click)=\\\"init.open()\\\">\\n        <label  >{{min_date | date:\\\"dd/MM/yyyy\\\"}} </label>\\n        <ion-datetime displayFormat=\\\"DD/MM/YYYY\\\" class=\\\"hidden\\\" #init cancelText=\\\"Cancelar\\\" doneText=\\\"Guardar\\\" mode=\\\"ios\\\"\\n          [max]=\\\"max_date\\\" [(ngModel)]=\\\"min_date\\\" ></ion-datetime>\\n        <ion-button  fill=\\\"clear\\\" slot=\\\"end\\\" class=\\\"ion-no-padding ion-no-margin\\\"    >\\n          <ion-icon name=\\\"calendar-outline\\\"></ion-icon>\\n        </ion-button>\\n      </ion-item>\\n    </div>\\n    <div class=\\\"col-sm-6 ion-text-center w-50\\\" style=\\\"padding: 0 10px\\\">\\n      <h4 class=\\\"ion-text-center\\\">Fecha Fin\\n      </h4>\\n      <ion-item class=\\\"input-text date\\\" (click)=\\\"end.open()\\\">\\n        <label  >{{max_date | date:\\\"dd/MM/yyyy\\\" }} </label>\\n        <ion-datetime class=\\\"input-text hidden\\\" displayFormat=\\\"DD/MM/YYYY\\\" #end cancelText=\\\"Cancelar\\\" doneText=\\\"Guardar\\\" mode=\\\"ios\\\"\\n          [(ngModel)]=\\\"max_date\\\" ></ion-datetime>\\n        <ion-button  fill=\\\"clear\\\" slot=\\\"end\\\"  class=\\\"ion-no-padding ion-no-margin\\\" >\\n          <ion-icon name=\\\"calendar-outline\\\"></ion-icon>\\n        </ion-button>\\n      </ion-item>\\n\\n    </div>\\n  </div>\\n  <div class=\\\"row ion-text-center\\\">\\n    <ion-button (click)=\\\"download()\\\" style=\\\"text-align: center;\\n    margin: 10px auto;\\\">Descargar <ion-icon name=\\\"arrow-down-circle-outline\\\"></ion-icon></ion-button>\\n  </div>\\n  \\n</ion-content>\\n\";","export enum MimeTypes {\n    Excel = \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LiquidationPage } from './liquidation.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LiquidationPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LiquidationPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LiquidationPageRoutingModule } from './liquidation-routing.module';\n\nimport { LiquidationPage } from './liquidation.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LiquidationPageRoutingModule\n  ],\n  declarations: [LiquidationPage]\n})\nexport class LiquidationPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NjcmVlbnMvc2NyZWVucy10YWJzL2xpcXVpZGF0aW9uL2xpcXVpZGF0aW9uLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { FileTransfer } from '@ionic-native/file-transfer/ngx';\nimport { File } from '@ionic-native/file/ngx';\nimport { FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport { format, add, startOfWeek } from 'date-fns'\nimport { environment } from 'src/environments/environment';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { Capacitor, FilesystemDirectory, Plugins } from '@capacitor/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { UiService } from 'src/app/services/ui.service';\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\nconst { Filesystem, Storage } = Plugins;\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\nimport { PhotoService } from 'src/app/services/photo.service';\nimport { MimeTypes } from 'src/app/enums/mime-types.enum';\nimport { writeFile } from 'capacitor-blob-writer'\n\n@Component({\n  selector: 'app-liquidation',\n  templateUrl: './liquidation.page.html',\n  styleUrls: ['./liquidation.page.scss'],\n})\nexport class LiquidationPage implements OnInit {\n\n  urlDownload: string\n  max\n\n  min_date\n  max_date\n\n  constructor(private transfer: FileTransfer,\n    private file: File,\n    private auth: AuthService,\n    private http: HttpClient,\n    private ui: UiService,\n    private iab: InAppBrowser,\n    private fileOpener: FileOpener,\n    private photo: PhotoService\n  ) { }\n\n\n\n  ngOnInit() {\n  }\n\n\n  ionViewWillEnter() {\n    // this.min_date = this.formatDated(y);\n    // console.log(\"Fecha min\", this.min_date)\n\n    // this.max_date = this.formatDated(maxf);\n    const today = new Date();\n    //This method is for get the first day of a week\n    const firstDay = startOfWeek(today);\n    this.min_date = this.formatDated(firstDay);\n    this.max_date = this.formatDated(today);\n  }\n\n  formatDated(date) {\n    let d = new Date(date),\n      day = '' + d.getDate(),\n      month = '' + (d.getMonth() + 1),\n      year = d.getFullYear();\n    if (month.length < 2) month = '0' + month;\n    if (day.length < 2) day = '0' + day;\n    console.log(\"Fecha\", [year, month, day].join('-'))\n    return [year, month, day].join('-');\n  }\n\n  async download() {\n\n    // Download a file:\n\n    //exports_to_excel/liquidation_of_orders_driver?driver_id=6&start_date=2020/12/20&end_date=2020/12/22\n    const url = environment.BASEURL + \"exports_to_excel/liquidation_of_orders_of_driver?driver_id=\" + this.auth.user.id\n      + \"&start_date=\" + this.min_date.split(\"T\")[0]+\"T00:00:00\" + \"&end_date=\" + this.max_date.split(\"T\")[0] + \"T23:59:00\";\n    const loader = await this.ui.loading(\"Por favor espere...\")\n    this.http.get(url, { responseType: 'blob' }).subscribe(async res => {\n      \n      try {\n        console.log(\"File\", res)\n        const file_name = \"Liquidacion\" + new Date().getTime() + \".xlsx\";\n        // const base64 = await this.photo.blobToDataUrl(res) as string;\n        (await loader).dismiss()\n        //Save File\n        // const savedFile = await Filesystem.writeFile({\n        //   path: file_name,\n        //   data: base64,\n        //   directory: FilesystemDirectory.Documents\n        // })\n        const { uri } = await writeFile({\n          path: file_name,\n          directory: FilesystemDirectory.Data,\n      \n          // data must be a Blob (creating a Blob which wraps other data types\n          // is trivial)\n          data: res,\n      \n          // create intermediate directories if they don't already exist\n          // default: false\n          recursive: true,\n      \n          // fallback to Filesystem.writeFile instead of throwing an error\n          // (you may also specify a unary callback, which takes an Error and returns\n          // a boolean)\n          // default: true\n          fallback: (err) => {\n            return err != undefined\n          }\n        })\n\n        console.log(\"Saved File\", uri)\n        //Save the file url to show it\n        const path = uri;\n        //Set the mime type for excel\n        const mimeType = MimeTypes.Excel.toString();\n\n\n        if (Capacitor.platform !== 'web') {\n          this.fileOpener.open(path, mimeType)\n            .then(() => { console.log(\"File is opened\") })\n            .catch((err) => { console.log(\"Error opening file\", err) })\n        }\n      } catch (e) {\n        (await loader).dismiss()\n        this.ui.showToast(\"Error\", e)\n      }\n      this.ui.showToast(\"Descargado\")\n\n    }, async err => {\n      (await loader).dismiss()\n      this.ui.showToast(\"El mensajero no tiene liquidación en este rango\");\n    });\n\n\n\n\n  }\n\n\n\n\n\n}\n"],"sourceRoot":"webpack:///"}