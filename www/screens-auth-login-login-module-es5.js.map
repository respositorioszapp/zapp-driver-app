{"version":3,"sources":["webpack:///src/app/screens/auth/login/login.page.html","webpack:///src/app/guards/login.guard.ts","webpack:///src/app/screens/auth/login/login-routing.module.ts","webpack:///src/app/screens/auth/login/login.module.ts","webpack:///src/app/screens/auth/login/login.page.scss","webpack:///src/app/screens/auth/login/login.page.ts"],"names":["LoginGuard","router","auth","next","state","isLoggedIn","localStorage","getItem","navigate","providedIn","routes","path","component","canActivate","LoginPageRoutingModule","imports","forChild","exports","LoginPageModule","declarations","LoginPage","storage","ui","fcm","request","network","view","loginData","email","required","password","minLength","maxLength","removeItem","controls","valid","value","getNetworkStatus","connected","loadier","loading","login","subscribe","res","dismiss","console","log","data","role","id","code_version","platform","VERSION_NAME","setObject","setItem","JSON","stringify","setData","sendToken","then","user","available","presentAlert","mode","header","message","buttons","text","cssClass","handler","blah","location","href","PLAY_STORE_URL","getCurrentPosition","enableHighAccuracy","position","coords","latitude","toString","longitude","showToast","err","status","error","messages","obj","user_id","token","post","selector","template"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACQf,QAAaA,UAAU;AAErB,0BAAoBC,MAApB,EAA2CC,IAA3C,EAA6D;AAAA;;AAAzC,aAAAD,MAAA,GAAAA,MAAA;AAAuB,aAAAC,IAAA,GAAAA,IAAA;AAE3C;;AAJqB;AAAA;AAAA,eAKrB,qBACEC,IADF,EAEEC,KAFF,EAE4B;AACxB,cAAIC,UAAU,GAAIC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAlB;;AACA,cAAG,CAACF,UAAJ,EAAe;AACb,mBAAO,IAAP;AACD,WAFD,MAEK;AACH,gBAAGA,UAAU,IAAE,IAAf,EAAoB;AAClB,mBAAKJ,MAAL,CAAYO,QAAZ,CAAqB,CAAC,WAAD,CAArB;AACA,qBAAO,KAAP;AACD,aAHD,MAGK;AACH,qBAAO,IAAP;AACD;AACF;AAEJ;AApBoB;;AAAA;AAAA,OAAvB;;;;cAE8B;;cAAsB;;;;AAFvCR,cAAU,6DAHtB,iEAAW;AACVS,gBAAU,EAAE;AADF,KAAX,CAGsB,GAAVT,UAAU,CAAV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFb,QAAMU,MAAM,GAAW,CACrB;AACEC,UAAI,EAAE,EADR;AAEEC,eAAS,EAAE,qDAFb;AAGEC,iBAAW,EAAE,CAAC,qEAAD;AAHf,KADqB,CAAvB;;AAYA,QAAaC,sBAAsB;AAAA;AAAA,MAAnC;;AAAaA,0BAAsB,6DAJlC,+DAAS;AACRC,aAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBN,MAAtB,CAAD,CADD;AAERO,aAAO,EAAE,CAAC,4DAAD;AAFD,KAAT,CAIkC,GAAtBH,sBAAsB,CAAtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEb,QAAaI,eAAe;AAAA;AAAA,MAA5B;;AAAaA,mBAAe,6DAV3B,+DAAS;AACRH,aAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,kEAHO,EAIP,0DAJO,EAKP,4EALO,CADD;AAQRI,kBAAY,EAAE,CAAC,qDAAD;AARN,KAAT,CAU2B,GAAfD,eAAe,CAAf;;;;;;;;;;;;;;;;ACpBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsCf,QAAaE,SAAS;AAMpB,yBACUC,OADV,EAEUC,EAFV,EAGUpB,IAHV,EAIUD,MAJV,EAKUsB,GALV,EAMUC,OANV,EAOUC,OAPV,EAOuC;AAAA;;AAN7B,aAAAJ,OAAA,GAAAA,OAAA;AACA,aAAAC,EAAA,GAAAA,EAAA;AACA,aAAApB,IAAA,GAAAA,IAAA;AACA,aAAAD,MAAA,GAAAA,MAAA;AACA,aAAAsB,GAAA,GAAAA,GAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AAZV,aAAAC,IAAA,GAAO,KAAP;AACA,aAAAC,SAAA,GAAuB,IAAI,wDAAJ,CAAc;AACnCC,eAAK,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAWC,QAAZ,EAAsB,0DAAWD,KAAjC,CAApB,CAD4B;AAEnCE,kBAAQ,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CAAC,0DAAWD,QAAZ,EAAsB,0DAAWE,SAAX,CAAqB,CAArB,CAAtB,EAA+C,0DAAWC,SAAX,CAAqB,EAArB,CAA/C,CAApB;AAFyB,SAAd,CAAvB;AAaK;;AAfe;AAAA;AAAA,eAiBpB,oBAAW;AAET1B,sBAAY,CAAC2B,UAAb,CAAwB,YAAxB;AACA3B,sBAAY,CAAC2B,UAAb,CAAwB,MAAxB;AACA3B,sBAAY,CAAC2B,UAAb,CAAwB,eAAxB;AACA3B,sBAAY,CAAC2B,UAAb,CAAwB,gBAAxB;AACA3B,sBAAY,CAAC2B,UAAb,CAAwB,gBAAxB;AACA3B,sBAAY,CAAC2B,UAAb,CAAwB,kBAAxB;AACA3B,sBAAY,CAAC2B,UAAb,CAAwB,WAAxB;AACA3B,sBAAY,CAAC2B,UAAb,CAAwB,UAAxB;AACA3B,sBAAY,CAAC2B,UAAb,CAAwB,iBAAxB;AAGD;AA9BmB;AAAA;AAAA,eAgCd,4BAAmB;;;;;;;;;;;;AAExB;AAlCmB;AAAA;AAAA,aAoCpB,eAAe;AACb,iBAAO,KAAKN,SAAL,CAAeO,QAAtB;AACD;AAtCmB;AAAA;AAAA,eAwCd,gBAAO;;;;;;;;;;AACX,wBAAI,KAAKP,SAAL,CAAeQ,KAAnB,EAA0B;AAAA,8CACE,KAAKR,SAAL,CAAeS,KADjB,EAClBR,KADkB,yBAClBA,KADkB,EACXE,QADW,yBACXA,QADW;;AAGxB,0BAAI,KAAKL,OAAL,CAAaY,gBAAb,GAAgCC,SAApC,EAA+C;AACvCC,+BADuC,GAC7B,KAAKjB,EAAL,CAAQkB,OAAR,CAAgB,qBAAhB,CAD6B;AAE7C,6BAAKtC,IAAL,CAAUuC,KAAV,CAAgBb,KAAhB,EAAuBE,QAAvB,EACGY,SADH,CAEI,UAAOC,GAAP;AAAA,iCAAoB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACjB,2CAAMJ,OAAN;;AADiB;AAAA,mDACFK,OADE;;AAElBC,2CAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBH,GAAG,CAACI,IAA1B;;AAFkB,0CAGdJ,GAAG,CAACI,IAAJ,CAASC,IAAT,CAAcC,EAAd,IAAoB,CAHN;AAAA;AAAA;AAAA;;AAIhBJ,2CAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBH,GAAG,CAACI,IAAJ,CAASG,YAAhC;;AAJgB,0CAKZ,2DAAUC,QAAV,KAAuB,KALX;AAAA;AAAA;AAAA;;AAAA,0CAMVR,GAAG,CAACI,IAAJ,CAASG,YAAT,IAAyB,yEAAYE,YAN3B;AAAA;AAAA;AAAA;;AAOZ,yCAAK/B,OAAL,CAAagC,SAAb,CAAuB,MAAvB,EAA+BV,GAAG,CAACI,IAAnC;AACAzC,gDAAY,CAACgD,OAAb,CAAqB,YAArB,EAAmC,IAAnC;AACAhD,gDAAY,CAACgD,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeb,GAAG,CAACI,IAAnB,CAA7B;AACA,yCAAK7C,IAAL,CAAUuD,OAAV;AACA,yCAAKC,SAAL;AAEA,yCAAKzD,MAAL,CAAYO,QAAZ,CAAqB,cAArB,EAAqCmD,IAArC,CAA0C;AAAA,6CAAY;AAAA;AAAA;AAAA;AAAA;AACpD,oDAAI,KAAKzD,IAAL,CAAU0D,IAAV,CAAeC,SAAf,IAA4B,CAAhC,EAAmC,CAElC;;AAHmD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAAZ;AAAA,qCAA1C;AAMAvD,gDAAY,CAAC2B,UAAb,CAAwB,eAAxB;AAnBY;AAAA;;AAAA;AAAA;AAqBZ,2CAAM,KAAKX,EAAL,CAAQwC,YAAR,CAAqB;AACzBC,0CAAI,EAAE,KADmB;AAEzBC,4CAAM,EAAE,kCAFiB;AAGzBC,6CAAO,EAAE,+DAHgB;AAIzBC,6CAAO,EAAE,CACP;AACEC,4CAAI,EAAE,SADR;AAEEnB,4CAAI,EAAE,QAFR;AAGEoB,gDAAQ,EAAE,WAHZ;AAIEC,+CAAO,EAAE,iBAACC,IAAD,EAAU;AACjBC,kDAAQ,CAACC,IAAT,GAAgB,yEAAYC,cAA5B;AACD;AANH,uCADO;AAJgB,qCAArB,CAAN;;AArBY;AAAA;AAAA;;AAAA;AAsCd,yCAAKpD,OAAL,CAAagC,SAAb,CAAuB,MAAvB,EAA+BV,GAAG,CAACI,IAAnC;AACAzC,gDAAY,CAACgD,OAAb,CAAqB,YAArB,EAAmC,IAAnC;AACAhD,gDAAY,CAACgD,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeb,GAAG,CAACI,IAAnB,CAA7B;AACA,yCAAK7C,IAAL,CAAUuD,OAAV;AACA,yCAAKC,SAAL;AACA,yCAAKzD,MAAL,CAAYO,QAAZ,CAAqB,cAArB,EAAqCmD,IAArC,CAA0C;AAAA,6CAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sDAChD,KAAKzD,IAAL,CAAU0D,IAAV,CAAeC,SAAf,IAA4B,CADoB;AAAA;AAAA;AAAA;;AAAA;AAEjC,uDAAM,6DAAYa,kBAAZ,CAA+B;AACpDC,oEAAkB,EAAE;AADgC,iDAA/B,CAAN;;AAFiC;AAE5CC,wDAF4C;AAMlD;AACAtE,4DAAY,CAACgD,OAAb,CAAqB,UAArB,EAAiCsB,QAAQ,CAACC,MAAT,CAAgBC,QAAhB,CAAyBC,QAAzB,EAAjC;AACAzE,4DAAY,CAACgD,OAAb,CAAqB,WAArB,EAAkCsB,QAAQ,CAACC,MAAT,CAAgBG,SAAhB,CAA0BD,QAA1B,EAAlC;;AARkD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAAZ;AAAA,qCAA1C;;AA3Cc;AAAA;AAAA;;AAAA;AA0DhB,yCAAKzD,EAAL,CAAQ2D,SAAR,CAAkB,4DAAlB;;AA1DgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAApB;AAAA,yBAFJ,EA+DI,UAAOC,GAAP;AAAA,iCAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AACjB,2CAAM3C,OAAN;;AADiB;AAAA,mDACFK,OADE;;AAAA,0CAEdsC,GAAG,CAACC,MAAJ,IAAc,GAFA;AAAA;AAAA;AAAA;;AAGhB,yCAAK7D,EAAL,CAAQ2D,SAAR,CAAkBC,GAAG,CAACE,KAAJ,CAAUC,QAAV,CAAmB,CAAnB,CAAlB;AAHgB;;AAAA;AAMlB,yCAAK/D,EAAL,CAAQ2D,SAAR,CAAkB,mBAAlB;;AANkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAApB;AAAA,yBA/DJ;AAwED,uBA1ED,MA0EO;AACL,6BAAK3D,EAAL,CAAQ2D,SAAR,CAAkB,uBAAlB;AACD;AAEF;;;;;;;;;AACF;AA3HmB;AAAA;AAAA,eA6HpB,mBAAU;AACR,eAAKvD,IAAL,GAAY,CAAC,KAAKA,IAAlB;AACD;AA/HmB;AAAA;AAAA,eAiIpB,qBAAY;AACV,cAAIpB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;AAEjC,gBAAM+E,GAAG,GAAG;AACVC,qBAAO,EAAE,KAAKrF,IAAL,CAAU0D,IAAV,CAAeX,EADd;AAEVuC,mBAAK,EAAElF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFG;AAGV4C,sBAAQ,EAAE;AAHA,aAAZ;AAKA,iBAAK3B,OAAL,CAAaiE,IAAb,CAAkB,WAAlB,EAA+BH,GAA/B,EAAoC5C,SAApC,CAA8C,UAAAC,GAAG,EAAI,CAEpD,CAFD,EAEG,UAAAuC,GAAG,EAAI,CAET,CAJD;AAMD,WAbD,MAaO,CAEN;AACF;AAlJmB;;AAAA;AAAA,OAAtB;;;;cAOqB;;cACL;;cACE;;cACE;;cACH;;cACI;;cACA;;;;AAbR9D,aAAS,6DALrB,gEAAU;AACTsE,cAAQ,EAAE,WADD;AAETC,cAAQ,EAAR;AAAA;AAAA,uGAFS;;;;AAAA,KAAV,CAKqB,GAATvE,SAAS,CAAT","file":"screens-auth-login-login-module-es5.js","sourcesContent":["export default \"<ion-content color=\\\"warning\\\" class=\\\"ion-padding\\\">\\n  <div class=\\\"ion-text-center margin-top-15vh ion-padding-bottom\\\">\\n    <img src=\\\"assets/imgs/logo-morado.png\\\" width=\\\"180\\\">\\n  </div>\\n  <ion-card class=\\\"border-radius\\\">\\n    <ion-card-content>\\n      <form  [formGroup]=\\\"loginData\\\" (submit)=\\\"send()\\\" novalidate>\\n        <ion-item lines=\\\"none\\\" class=\\\"input-text ion-margin-top\\\">\\n          <ion-icon name=\\\"person-circle\\\" slot=\\\"start\\\"></ion-icon>\\n          <ion-input placeholder=\\\"Email\\\" formControlName=\\\"email\\\" required></ion-input>\\n        </ion-item>\\n        <ion-item lines=\\\"none\\\" class=\\\"danger-color-text\\\" *ngIf=\\\" controls.email.dirty && controls.email.touched && controls.email.errors\\\">\\n          <ion-icon name=\\\"alert-circle\\\" slot=\\\"start\\\" class=\\\"danger-color-text\\\"></ion-icon>\\n          <ion-label *ngIf=\\\"controls.email.errors.required\\\">Email es requerido</ion-label>\\n          <ion-label *ngIf=\\\"controls.email.errors.email\\\">Debe ser un email válido</ion-label>\\n        </ion-item>\\n        <ion-item lines=\\\"none\\\" class=\\\"input-text ion-margin-top ion-margin-bottom\\\">\\n          <ion-icon name=\\\"lock-closed\\\" slot=\\\"start\\\"  ></ion-icon>\\n          <ion-input [type]=\\\"view ?'text': 'password'\\\" placeholder=\\\"Password\\\" formControlName=\\\"password\\\" required ></ion-input>\\n          <ion-icon [name]=\\\"view ? 'eye-outline': 'eye-off-outline'\\\" slot=\\\"end\\\" (click)=\\\"setView()\\\"></ion-icon>\\n        </ion-item>\\n        <ion-item lines=\\\"none\\\" class=\\\"danger-color-text\\\" *ngIf=\\\"controls.password.dirty && controls.password.touched && controls.password.errors\\\">\\n          <ion-icon name=\\\"alert-circle\\\" slot=\\\"start\\\" class=\\\"danger-color-text\\\" ></ion-icon>\\n          <ion-label *ngIf=\\\"controls.password.errors.required\\\">La contraseña es requerida</ion-label>\\n          <ion-label *ngIf=\\\"controls.password.errors.minlength || controls.password.errors.maxlength\\\">La contraseña debe ser\\n            de 8 a 16 caracteres</ion-label>\\n        </ion-item>\\n        \\n        <ion-button fill=\\\"clear\\\" expand=\\\"block\\\" mode=\\\"ios\\\" class=\\\"grey-color\\\" routerLink=\\\"/signup/forgotpassword\\\">\\n          ¿Olvidaste tu contraseña?\\n        </ion-button>\\n        <ion-button type=\\\"submit\\\"  expand=\\\"block\\\" mode=\\\"ios\\\" color=\\\"primary\\\"  class=\\\"ion-margin-bottom\\\">\\n          INICIAR SESION\\n        </ion-button>\\n        <ion-button fill=\\\"outline\\\" color=\\\"primary\\\" expand=\\\"block\\\" mode=\\\"ios\\\" class=\\\"grey-color\\\" routerLink=\\\"/signup\\\">\\n          REGÍSTRARSE\\n        </ion-button>\\n      </form>\\n    </ion-card-content>\\n  </ion-card>\\n</ion-content>\\n\";","import { Injectable } from '@angular/core';\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { AuthService } from '../services/auth.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LoginGuard implements CanActivate {\n\n  constructor(private router: Router,private auth : AuthService)\n  {\n }\n  canActivate(\n    next: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\n      let isLoggedIn =  localStorage.getItem('isLoggedIn');\n      if(!isLoggedIn){\n        return true;\n      }else{\n        if(isLoggedIn=='si'){ \n          this.router.navigate(['tabs/home'])       \n          return false;\n        }else{\n          return true;\n        }\n      }\n      \n  }\n  \n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { LoginGuard } from 'src/app/guards/login.guard';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage,\n    canActivate: [LoginGuard]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","export default \".margin-top-15vh {\\n  margin-top: 15vh;\\n}\\n\\nion-icon {\\n  -webkit-margin-end: 10px !important;\\n          margin-inline-end: 10px !important;\\n  margin-top: 7px;\\n  margin-bottom: 7px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXNwcmlsbGEvRG9jdW1lbnRvc01pZ3VlbC9Qcm95ZWN0b3MvemFwcC96YXBwLWRyaXZlci1hcHAtcnBlbmFsb3phL3NyYy9hcHAvc2NyZWVucy9hdXRoL2xvZ2luL2xvZ2luLnBhZ2Uuc2NzcyIsInNyYy9hcHAvc2NyZWVucy9hdXRoL2xvZ2luL2xvZ2luLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFBO0FDQ0o7O0FERUE7RUFDSSxtQ0FBQTtVQUFBLGtDQUFBO0VBQ0EsZUFBQTtFQUNBLGtCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9zY3JlZW5zL2F1dGgvbG9naW4vbG9naW4ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1hcmdpbi10b3AtMTV2aHtcbiAgICBtYXJnaW4tdG9wOiAxNXZoO1xufVxuXG5pb24taWNvbntcbiAgICBtYXJnaW4taW5saW5lLWVuZDogMTBweCAhaW1wb3J0YW50O1xuICAgIG1hcmdpbi10b3A6IDdweDtcbiAgICBtYXJnaW4tYm90dG9tOiA3cHg7XG59IiwiLm1hcmdpbi10b3AtMTV2aCB7XG4gIG1hcmdpbi10b3A6IDE1dmg7XG59XG5cbmlvbi1pY29uIHtcbiAgbWFyZ2luLWlubGluZS1lbmQ6IDEwcHggIWltcG9ydGFudDtcbiAgbWFyZ2luLXRvcDogN3B4O1xuICBtYXJnaW4tYm90dG9tOiA3cHg7XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { UiService } from \"../../../services/ui.service\";\nimport { AuthService } from \"../../../services/auth.service\";\nimport { Router } from '@angular/router';\nimport { FcmService } from 'src/app/services/fcm.service';\nimport { RequestService } from 'src/app/services/request.service';\n\nimport { StorageService } from \"src/app/services/storage.service\";\nimport { environment } from 'src/environments/environment';\n\nimport { Capacitor, Geolocation } from '@capacitor/core';\nimport { NetworkStatusService } from 'src/app/services/network-status.service';\nimport { RequestLocationPermissionPage } from 'src/app/screens/forms/request-location-permission/request-location-permission.page';\n\nimport BackgroundGeolocation, {\n  State,\n  Config,\n  Location,\n  LocationError,\n  Geofence,\n  HttpEvent,\n  MotionActivityEvent,\n  ProviderChangeEvent,\n  MotionChangeEvent,\n  GeofenceEvent,\n  GeofencesChangeEvent,\n  HeartbeatEvent,\n  ConnectivityChangeEvent,\n  DeviceSettingsRequest\n} from \"cordova-background-geolocation-lt\";\n\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  view = false\n  loginData: FormGroup = new FormGroup({\n    email: new FormControl('', [Validators.required, Validators.email]),\n    password: new FormControl('', [Validators.required, Validators.minLength(8), Validators.maxLength(20)]),\n  });\n  constructor(\n    private storage: StorageService,\n    private ui: UiService,\n    private auth: AuthService,\n    private router: Router,\n    private fcm: FcmService,\n    private request: RequestService,\n    private network: NetworkStatusService,\n\n  ) { }\n\n  ngOnInit() {\n\n    localStorage.removeItem(\"isLoggedIn\");\n    localStorage.removeItem(\"data\");\n    localStorage.removeItem(\"current_order\")\n    localStorage.removeItem(\"current_status\")\n    localStorage.removeItem(\"current_status\")\n    localStorage.removeItem(\"currentDocuments\")\n    localStorage.removeItem(\"longitude\")\n    localStorage.removeItem(\"latitude\")\n    localStorage.removeItem(\"watchPositionId\")\n\n\n  }\n\n  async ionViewWillEnter() {\n   \n  }\n\n  get controls() {\n    return this.loginData.controls;\n  }\n\n  async send() {\n    if (this.loginData.valid) {\n      let { email, password } = this.loginData.value;\n\n      if (this.network.getNetworkStatus().connected) {\n        const loadier = this.ui.loading('Por favor espere...');\n        this.auth.login(email, password)\n          .subscribe(\n            async (res: any) => {\n              (await loadier).dismiss()\n              console.log(\"Rol id\", res.data);\n              if (res.data.role.id == 5) {\n                console.log(\"Version\", res.data.code_version)\n                if (Capacitor.platform !== 'web') {\n                  if (res.data.code_version == environment.VERSION_NAME) {\n                    this.storage.setObject('data', res.data);\n                    localStorage.setItem('isLoggedIn', 'si');\n                    localStorage.setItem('data', JSON.stringify(res.data));\n                    this.auth.setData();\n                    this.sendToken();\n                    \n                    this.router.navigate([`/tabs/home`]).then(async () => {\n                      if (this.auth.user.available != 0) {\n                        \n                      }\n\n                    });\n                    localStorage.removeItem(\"current_order\")\n                  } else {\n                    await this.ui.presentAlert({\n                      mode: 'ios',\n                      header: '¡Existe una nueva actualización!',\n                      message: 'Por favor actualizala, para obtener mejor rendimiento posible',\n                      buttons: [\n                        {\n                          text: 'Aceptar',\n                          role: 'cancel',\n                          cssClass: 'secondary',\n                          handler: (blah) => {\n                            location.href = environment.PLAY_STORE_URL\n                          }\n                        }\n                      ]\n                    })\n                  }\n                } else {\n                  this.storage.setObject('data', res.data);\n                  localStorage.setItem('isLoggedIn', 'si');\n                  localStorage.setItem('data', JSON.stringify(res.data));\n                  this.auth.setData();\n                  this.sendToken();\n                  this.router.navigate([`/tabs/home`]).then(async () => {\n                    if (this.auth.user.available != 0) {\n                      const position = await Geolocation.getCurrentPosition({\n                        enableHighAccuracy: true\n                      });\n\n                      // (await loader).dismiss();\n                      localStorage.setItem(\"latitude\", position.coords.latitude.toString());\n                      localStorage.setItem(\"longitude\", position.coords.longitude.toString());\n                    }\n\n                  });\n                }\n\n              } else {\n                this.ui.showToast(\"El usuario existe, pero  no tiene acceso a esta aplicación\")\n              }\n            },\n            async (err: any) => {\n              (await loadier).dismiss()\n              if (err.status == 400) {\n                this.ui.showToast(err.error.messages[0]);\n                return;\n              }\n              this.ui.showToast(\"Error de conexión\");\n            }\n          );\n      } else {\n        this.ui.showToast(\"Verifique su conexión\")\n      }\n\n    }\n  }\n\n  setView() {\n    this.view = !this.view;\n  }\n\n  sendToken() {\n    if (localStorage.getItem('fcmId')) {\n\n      const obj = {\n        user_id: this.auth.user.id,\n        token: localStorage.getItem('fcmId'),\n        platform: \"mobile\"\n      }\n      this.request.post(\"get_token\", obj).subscribe(res => {\n\n      }, err => {\n\n      })\n\n    } else {\n\n    }\n  }\n}\n"]}